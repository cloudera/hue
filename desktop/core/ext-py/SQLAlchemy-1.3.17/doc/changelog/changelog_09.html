<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        
        <title>
            
    
    0.9 Changelog
 &mdash;
    SQLAlchemy 1.3 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../_static/changelog.css" type="text/css" />
                <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
        <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="SQLAlchemy 1.3 Documentation" href="../index.html" />
        <link rel="up" title="Changes and Migration" href="index.html" />
        <link rel="next" title="0.8 Changelog" href="changelog_08.html" />
        <link rel="prev" title="1.0 Changelog" href="changelog_10.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">1.3.17</span>


        | Release Date: May 13, 2020

    </div>

    <h1>SQLAlchemy 1.3 Documentation</h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">


        <div id="docs-sidebar-popout">
            <h3><a href="../index.html">SQLAlchemy 1.3 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../contents.html">Contents</a> |
                <a href="../genindex.html">Index</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="index.html" title="Changes and Migration">Changes and Migration</a>
        </h3>

        <ul>
<li><span class="link-container"><a class="reference external" href="migration_13.html">What’s New in SQLAlchemy 1.3?</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_13.html">1.3 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_12.html">1.2 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_11.html">1.1 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_10.html">1.0 Changelog</a></span></li>
<li class="selected"><span class="link-container"><strong>0.9 Changelog</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-0.9.10">0.9.10</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-0.9.10-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.10-engine">engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.10-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.10-postgresql">postgresql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.10-mysql">mysql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.10-sqlite">sqlite</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.10-misc">misc</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.9">0.9.9</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-0.9.9-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.9-engine">engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.9-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.9-schema">schema</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.9-postgresql">postgresql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.9-mysql">mysql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.9-sqlite">sqlite</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.9-misc">misc</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.8">0.9.8</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-0.9.8-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.8-orm-declarative">orm declarative</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.8-engine">engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.8-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.8-postgresql">postgresql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.8-mysql">mysql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.8-sqlite">sqlite</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.8-mssql">mssql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.8-oracle">oracle</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.8-misc">misc</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.7">0.9.7</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-0.9.7-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.7-engine">engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.7-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.7-postgresql">postgresql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.7-mysql">mysql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.7-sqlite">sqlite</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.7-mssql">mssql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.7-oracle">oracle</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.7-misc">misc</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.6">0.9.6</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-0.9.6-orm">orm</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.5">0.9.5</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-0.9.5-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.5-engine">engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.5-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.5-postgresql">postgresql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.5-mysql">mysql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.5-mssql">mssql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.5-firebird">firebird</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.5-misc">misc</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.4">0.9.4</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-0.9.4-general">general</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.4-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.4-engine">engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.4-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.4-postgresql">postgresql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.4-mysql">mysql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.4-oracle">oracle</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.4-misc">misc</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.3">0.9.3</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-0.9.3-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.3-orm-declarative">orm declarative</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.3-engine">engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.3-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.3-postgresql">postgresql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.3-mysql">mysql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.3-sqlite">sqlite</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.3-misc">misc</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.2">0.9.2</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-0.9.2-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.2-engine">engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.2-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.2-schema">schema</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.2-postgresql">postgresql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.2-mysql">mysql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.2-sqlite">sqlite</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.2-mssql">mssql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.2-oracle">oracle</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.2-misc">misc</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.1">0.9.1</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-0.9.1-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.1-orm-declarative">orm declarative</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.1-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.1-schema">schema</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0">0.9.0</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0-orm-declarative">orm declarative</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0-engine">engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0-schema">schema</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0-postgresql">postgresql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0-mysql">mysql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0-mssql">mssql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0-oracle">oracle</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0-firebird">firebird</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0-misc">misc</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0b1">0.9.0b1</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0b1-general">general</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0b1-orm">orm</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0b1-orm-declarative">orm declarative</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0b1-engine">engine</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0b1-sql">sql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0b1-postgresql">postgresql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0b1-mysql">mysql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0b1-sqlite">sqlite</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0b1-mssql">mssql</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0b1-oracle">oracle</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0b1-firebird">firebird</a></span></li>
<li><span class="link-container"><a class="reference external" href="#change-0.9.0b1-misc">misc</a></span></li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="changelog_08.html">0.8 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_07.html">0.7 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_06.html">0.6 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_05.html">0.5 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_04.html">0.4 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_03.html">0.3 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_02.html">0.2 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="changelog_01.html">0.1 Changelog</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_12.html">What’s New in SQLAlchemy 1.2?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_11.html">What’s New in SQLAlchemy 1.1?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_10.html">What’s New in SQLAlchemy 1.0?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_09.html">What’s New in SQLAlchemy 0.9?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_08.html">What’s New in SQLAlchemy 0.8?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_07.html">What’s New in SQLAlchemy 0.7?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_06.html">What’s New in SQLAlchemy 0.6?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_05.html">What’s new in SQLAlchemy 0.5?</a></span></li>
<li><span class="link-container"><a class="reference external" href="migration_04.html">What’s new in SQLAlchemy 0.4?</a></span></li>
</ul>



        </div>

        </div>

    </div>

    

    <div id="docs-body" class="withsidebar" >
        
<div class="section" id="changelog">
<h1>0.9 Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<div class="section" id="change-0.9.10">
<h2 class="release-version">0.9.10<a class="headerlink" href="#change-0.9.10" title="Permalink to this headline">¶</a></h2>
Released: July 22, 2015<div class="section" id="change-0.9.10-orm">
<h3>orm<a class="headerlink" href="#change-0.9.10-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.10-0"><span class="target" id="change-ca4fc751ceaa91a33992ee87c9a525a3"><strong>[orm] [feature]</strong> </span><p>Added a new entry <code class="docutils literal notranslate"><span class="pre">&quot;entity&quot;</span></code> to the dictionaries returned by
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.column_descriptions" title="sqlalchemy.orm.query.Query.column_descriptions"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Query.column_descriptions</span></code></a>.  This refers to the primary ORM
mapped class or aliased class that is referred to by the expression.
Compared to the existing entry for <code class="docutils literal notranslate"><span class="pre">&quot;type&quot;</span></code>, it will always be
a mapped entity, even if extracted from a column expression, or
None if the given expression is a pure core expression.
See also <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3403">#3403</a> which repaired a regression in this feature
which was unreleased in 0.9.10 but was released in the 1.0 version.</p>
<a class="changelog-reference headerlink reference internal" href="#change-ca4fc751ceaa91a33992ee87c9a525a3">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3320">#3320</a></p>
</p>
</li>
<li><p id="change-0.9.10-1"><span class="target" id="change-af136f4c0f377ed2650ebb765f409144"><strong>[orm] [bug]</strong> </span><p><a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> doesn’t support joins, subselects, or special
FROM clauses when using the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.update" title="sqlalchemy.orm.query.Query.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.update()</span></code></a> or
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.delete" title="sqlalchemy.orm.query.Query.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.delete()</span></code></a> methods; instead of silently ignoring these
fields if methods like <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.join()</span></code></a> or
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.select_from()</span></code></a> has been called, a warning is emitted.
As of 1.0.0b5 this will raise an error.</p>
<a class="changelog-reference headerlink reference internal" href="#change-af136f4c0f377ed2650ebb765f409144">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3349">#3349</a></p>
</p>
</li>
<li><p id="change-0.9.10-2"><span class="target" id="change-ee81192da55510d7336bb2550e22a385"><strong>[orm] [bug]</strong> </span><p>Fixed bug where the state tracking within multiple, nested
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.begin_nested" title="sqlalchemy.orm.session.Session.begin_nested"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.begin_nested()</span></code></a> operations would fail to propagate
the “dirty” flag for an object that had been updated within
the inner savepoint, such that if the enclosing savepoint were
rolled back, the object would not be part of the state that was
expired and therefore reverted to its database state.</p>
<a class="changelog-reference headerlink reference internal" href="#change-ee81192da55510d7336bb2550e22a385">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3352">#3352</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.10-engine">
<h3>engine<a class="headerlink" href="#change-0.9.10-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.10-3"><span class="target" id="change-2bc8922c3d02ea661e42e2f54e7c7201"><strong>[engine] [bug]</strong> </span><p>Added the string value <code class="docutils literal notranslate"><span class="pre">&quot;none&quot;</span></code> to those accepted by the
<a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.Pool.params.reset_on_return" title="sqlalchemy.pool.Pool"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Pool.reset_on_return</span></code></a> parameter as a synonym for <code class="docutils literal notranslate"><span class="pre">None</span></code>,
so that string values can be used for all settings, allowing
utilities like <a class="reference internal" href="../core/engines.html#sqlalchemy.engine_from_config" title="sqlalchemy.engine_from_config"><code class="xref py py-func docutils literal notranslate"><span class="pre">engine_from_config()</span></code></a> to be usable without
issue.</p>
<a class="changelog-reference headerlink reference internal" href="#change-2bc8922c3d02ea661e42e2f54e7c7201">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3375">#3375</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.10-sql">
<h3>sql<a class="headerlink" href="#change-0.9.10-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.10-4"><span class="target" id="change-f8414532972c2d7d0d9d856124692667"><strong>[sql] [feature]</strong> </span><p>Added official support for a CTE used by the SELECT present
inside of <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert.from_select" title="sqlalchemy.sql.expression.Insert.from_select"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Insert.from_select()</span></code></a>.  This behavior worked
accidentally up until 0.9.9, when it no longer worked due to
unrelated changes as part of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3248">#3248</a>.   Note that this
is the rendering of the WITH clause after the INSERT, before the
SELECT; the full functionality of CTEs rendered at the top
level of INSERT, UPDATE, DELETE is a new feature targeted for a
later release.</p>
<a class="changelog-reference headerlink reference internal" href="#change-f8414532972c2d7d0d9d856124692667">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3418">#3418</a></p>
</p>
</li>
<li><p id="change-0.9.10-5"><span class="target" id="change-9a35a9fd17b1c1a118ee92550ccf0b00"><strong>[sql] [bug]</strong> </span><p>Fixed issue where a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> object that used a naming
convention would not properly work with pickle.  The attribute was
skipped leading to inconsistencies and failures if the unpickled
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> object were used to base additional tables
from.</p>
<a class="changelog-reference headerlink reference internal" href="#change-9a35a9fd17b1c1a118ee92550ccf0b00">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3362">#3362</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.10-postgresql">
<h3>postgresql<a class="headerlink" href="#change-0.9.10-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.10-6"><span class="target" id="change-f48ebfdbd81e4166cec7fa2687c381e8"><strong>[postgresql] [bug]</strong> </span><p>Fixed a long-standing bug where the <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></a> type as used
with the psycopg2 dialect in conjunction with non-ascii values
and <code class="docutils literal notranslate"><span class="pre">native_enum=False</span></code> would fail to decode return results properly.
This stemmed from when the PG <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.ENUM" title="sqlalchemy.dialects.postgresql.ENUM"><code class="xref py py-class docutils literal notranslate"><span class="pre">ENUM</span></code></a> type used
to be a standalone type without a “non native” option.</p>
<a class="changelog-reference headerlink reference internal" href="#change-f48ebfdbd81e4166cec7fa2687c381e8">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3354">#3354</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.10-mysql">
<h3>mysql<a class="headerlink" href="#change-0.9.10-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.10-7"><span class="target" id="change-5898fc79f1b4c5e52fc6ecd0a9319733"><strong>[mysql] [bug] [pymysql]</strong> </span><p>Fixed unicode support for PyMySQL when using an “executemany”
operation with unicode parameters.  SQLAlchemy now passes both
the statement as well as the bound parameters as unicode
objects, as PyMySQL generally uses string interpolation
internally to produce the final statement, and in the case of
executemany does the “encode” step only on the final statement.</p>
<a class="changelog-reference headerlink reference internal" href="#change-5898fc79f1b4c5e52fc6ecd0a9319733">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3337">#3337</a></p>
</p>
</li>
<li><p id="change-0.9.10-8"><span class="target" id="change-966802f406201dd8d7ea0b0b85d328ec"><strong>[mysql] [bug] [py3k]</strong> </span><p>Fixed the <a class="reference internal" href="../dialects/mysql.html#sqlalchemy.dialects.mysql.BIT" title="sqlalchemy.dialects.mysql.BIT"><code class="xref py py-class docutils literal notranslate"><span class="pre">BIT</span></code></a> type on Py3K which was not using the
<code class="docutils literal notranslate"><span class="pre">ord()</span></code> function correctly.  Pull request courtesy David Marin.</p>
<a class="changelog-reference headerlink reference internal" href="#change-966802f406201dd8d7ea0b0b85d328ec">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3333">#3333</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.10-sqlite">
<h3>sqlite<a class="headerlink" href="#change-0.9.10-sqlite" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.10-9"><span class="target" id="change-ca0388dc5ea3dd8415b40032f83e85d0"><strong>[sqlite] [bug]</strong> </span><p>Fixed bug in SQLite dialect where reflection of UNIQUE constraints
that included non-alphabetic characters in the names, like dots or
spaces, would not be reflected with their name.</p>
<a class="changelog-reference headerlink reference internal" href="#change-ca0388dc5ea3dd8415b40032f83e85d0">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3495">#3495</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.10-misc">
<h3>misc<a class="headerlink" href="#change-0.9.10-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.10-10"><span class="target" id="change-bd0e166193a07e1132fc4c7f5a08f039"><strong>[bug] [ext]</strong> </span><p>Fixed bug where when using extended attribute instrumentation system,
the correct exception would not be raised when <a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.class_mapper" title="sqlalchemy.orm.class_mapper"><code class="xref py py-func docutils literal notranslate"><span class="pre">class_mapper()</span></code></a>
were called with an invalid input that also happened to not
be weak referencable, such as an integer.</p>
<a class="changelog-reference headerlink reference internal" href="#change-bd0e166193a07e1132fc4c7f5a08f039">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3408">#3408</a></p>
</p>
</li>
<li><p id="change-0.9.10-11"><span class="target" id="change-0fcc791335c7b1ce1b81b5dbeaaa9cc1"><strong>[bug] [pypy] [tests]</strong> </span><p>Fixed an import that prevented “pypy setup.py test” from working
correctly.</p>
<a class="changelog-reference headerlink reference internal" href="#change-0fcc791335c7b1ce1b81b5dbeaaa9cc1">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3406">#3406</a></p>
</p>
</li>
<li><p id="change-0.9.10-12"><span class="target" id="change-df562f4956e8b2f2c636405cbb360d54"><strong>[bug] [ext]</strong> </span><p>Fixed regression from 0.9.9 where the <a class="reference internal" href="../orm/extensions/declarative/api.html#sqlalchemy.ext.declarative.as_declarative" title="sqlalchemy.ext.declarative.as_declarative"><code class="xref py py-func docutils literal notranslate"><span class="pre">as_declarative()</span></code></a>
symbol was removed from the <code class="docutils literal notranslate"><span class="pre">sqlalchemy.ext.declarative</span></code>
namespace.</p>
<a class="changelog-reference headerlink reference internal" href="#change-df562f4956e8b2f2c636405cbb360d54">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3324">#3324</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.9">
<h2 class="release-version">0.9.9<a class="headerlink" href="#change-0.9.9" title="Permalink to this headline">¶</a></h2>
Released: March 10, 2015<div class="section" id="change-0.9.9-orm">
<h3>orm<a class="headerlink" href="#change-0.9.9-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.9-0"><span class="target" id="change-257ec602824da39666b558dd308ddd68"><strong>[orm] [feature]</strong> </span><p>Added new parameter <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.connection.params.execution_options" title="sqlalchemy.orm.session.Session.connection"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.connection.execution_options</span></code></a>
which may be used to set up execution options on a <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
when it is first checked out, before the transaction has begun.
This is used to set up options such as isolation level on the
connection before the transaction starts.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/session_transaction.html#session-transaction-isolation"><span class="std std-ref">Setting Transaction Isolation Levels</span></a> - new documentation section
detailing best practices for setting transaction isolation with
sessions.</p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-257ec602824da39666b558dd308ddd68">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3296">#3296</a></p>
</p>
</li>
<li><p id="change-0.9.9-1"><span class="target" id="change-81f7e383b3862c1f1b3ec7f7a6e0aafe"><strong>[orm] [feature]</strong> </span><p>Added new method <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.invalidate" title="sqlalchemy.orm.session.Session.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.invalidate()</span></code></a>, functions similarly
to <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.close" title="sqlalchemy.orm.session.Session.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.close()</span></code></a>, except also calls
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.invalidate()</span></code></a>
on all connections, guaranteeing that they will not be returned to
the connection pool.  This is useful in situations e.g. dealing
with gevent timeouts when it is not safe to use the connection further,
even for rollbacks.</p>
<a class="changelog-reference headerlink reference internal" href="#change-81f7e383b3862c1f1b3ec7f7a6e0aafe">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.9-2"><span class="target" id="change-2df829d258aa418fc9764a2c877c271f"><strong>[orm] [bug]</strong> </span><p>Fixed bugs in ORM object comparisons where comparison of
many-to-one <code class="docutils literal notranslate"><span class="pre">!=</span> <span class="pre">None</span></code> would fail if the source were an aliased
class, or if the query needed to apply special aliasing to the
expression due to aliased joins or polymorphic querying; also fixed
bug in the case where comparing a many-to-one to an object state
would fail if the query needed to apply special aliasing
due to aliased joins or polymorphic querying.</p>
<a class="changelog-reference headerlink reference internal" href="#change-2df829d258aa418fc9764a2c877c271f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3310">#3310</a></p>
</p>
</li>
<li><p id="change-0.9.9-3"><span class="target" id="change-7b35681c2beaa12811329756cbdad1b5"><strong>[orm] [bug]</strong> </span><p>Fixed bug where internal assertion would fail in the case where
an <code class="docutils literal notranslate"><span class="pre">after_rollback()</span></code> handler for a <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> incorrectly
adds state to that <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> within the handler, and the task
to warn and remove this state (established by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2389">#2389</a>) attempts
to proceed.</p>
<a class="changelog-reference headerlink reference internal" href="#change-7b35681c2beaa12811329756cbdad1b5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3309">#3309</a></p>
</p>
</li>
<li><p id="change-0.9.9-4"><span class="target" id="change-ec432e8e77803ef9276f98ec61867b39"><strong>[orm] [bug]</strong> </span><p>Fixed bug where TypeError raised when <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.join()</span></code></a> called
with unknown kw arguments would raise its own TypeError due
to broken formatting.  Pull request courtesy Malthe Borch.</p>
<a class="changelog-reference headerlink reference internal" href="#change-ec432e8e77803ef9276f98ec61867b39">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.9-5"><span class="target" id="change-3ce9474490eb936aecbfe90a61b6989b"><strong>[orm] [bug]</strong> </span><p>Fixed bug in lazy loading SQL construction whereby a complex
primaryjoin that referred to the same “local” column multiple
times in the “column that points to itself” style of self-referential
join would not be substituted in all cases.   The logic to determine
substitutions here has been reworked to be more open-ended.</p>
<a class="changelog-reference headerlink reference internal" href="#change-3ce9474490eb936aecbfe90a61b6989b">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3300">#3300</a></p>
</p>
</li>
<li><p id="change-0.9.9-6"><span class="target" id="change-cb85bfd5b9268fd26d4bb6655f9647fc"><strong>[orm] [bug]</strong> </span><p>The “wildcard” loader options, in particular the one set up by
the <a class="reference internal" href="../orm/loading_columns.html#sqlalchemy.orm.load_only" title="sqlalchemy.orm.load_only"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_only()</span></code></a> option to cover all attributes not
explicitly mentioned, now takes into account the superclasses
of a given entity, if that entity is mapped with inheritance mapping,
so that attribute names within the superclasses are also omitted
from the load.  Additionally, the polymorphic discriminator column
is unconditionally included in the list, just in the same way that
primary key columns are, so that even with load_only() set up,
polymorphic loading of subtypes continues to function correctly.</p>
<a class="changelog-reference headerlink reference internal" href="#change-cb85bfd5b9268fd26d4bb6655f9647fc">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3287">#3287</a></p>
</p>
</li>
<li><p id="change-0.9.9-7"><span class="target" id="change-eb4c6d7da5a58814047869eac9bfc873"><strong>[orm] [bug] [pypy]</strong> </span><p>Fixed bug where if an exception were thrown at the start of a
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> before it fetched results, particularly when
row processors can’t be formed, the cursor would stay open with
results pending and not actually be closed.  This is typically only
an issue on an interpreter like PyPy where the cursor isn’t
immediately GC’ed, and can in some circumstances lead to transactions/
locks being open longer than is desirable.</p>
<a class="changelog-reference headerlink reference internal" href="#change-eb4c6d7da5a58814047869eac9bfc873">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3285">#3285</a></p>
</p>
</li>
<li><p id="change-0.9.9-8"><span class="target" id="change-11dd64077e54acf0bf1bb5947c23de22"><strong>[orm] [bug]</strong> </span><p>Fixed a leak which would occur in the unsupported and highly
non-recommended use case of replacing a relationship on a fixed
mapped class many times, referring to an arbitrarily growing number of
target mappers.  A warning is emitted when the old relationship is
replaced, however if the mapping were already used for querying, the
old relationship would still be referenced within some registries.</p>
<a class="changelog-reference headerlink reference internal" href="#change-11dd64077e54acf0bf1bb5947c23de22">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3251">#3251</a></p>
</p>
</li>
<li><p id="change-0.9.9-9"><span class="target" id="change-34fb265e26bf9318cfcc46fe62fabfd6"><strong>[orm] [bug] [sqlite]</strong> </span><p>Fixed bug regarding expression mutations which could express
itself as a “Could not locate column” error when using
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> to  select from multiple, anonymous column
entities when querying against SQLite, as a side effect of the
“join rewriting” feature used by the SQLite dialect.</p>
<a class="changelog-reference headerlink reference internal" href="#change-34fb265e26bf9318cfcc46fe62fabfd6">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3241">#3241</a></p>
</p>
</li>
<li><p id="change-0.9.9-10"><span class="target" id="change-80b153398da9fb25bd731706ec2ce525"><strong>[orm] [bug]</strong> </span><p>Fixed bug where the ON clause for <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.join()</span></code></a>,
and <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.outerjoin" title="sqlalchemy.orm.query.Query.outerjoin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.outerjoin()</span></code></a> to a single-inheritance subclass
using <code class="docutils literal notranslate"><span class="pre">of_type()</span></code> would not render the “single table criteria” in
the ON clause if the <code class="docutils literal notranslate"><span class="pre">from_joinpoint=True</span></code> flag were set.</p>
<a class="changelog-reference headerlink reference internal" href="#change-80b153398da9fb25bd731706ec2ce525">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3232">#3232</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.9-engine">
<h3>engine<a class="headerlink" href="#change-0.9.9-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.9-11"><span class="target" id="change-f30f7db6662d7e6a49a0036659a63554"><strong>[engine] [feature]</strong> </span><p>Added new user-space accessors for viewing transaction isolation
levels; <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.get_isolation_level" title="sqlalchemy.engine.Connection.get_isolation_level"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_isolation_level()</span></code></a>,
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.default_isolation_level" title="sqlalchemy.engine.Connection.default_isolation_level"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Connection.default_isolation_level</span></code></a>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-f30f7db6662d7e6a49a0036659a63554">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.9-12"><span class="target" id="change-394c5516672e736e3c9559084ec887cd"><strong>[engine] [bug]</strong> </span><p>Fixed bug in <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> and pool where the
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.invalidate" title="sqlalchemy.engine.Connection.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.invalidate()</span></code></a> method, or an invalidation due
to a database disconnect, would fail if the
<code class="docutils literal notranslate"><span class="pre">isolation_level</span></code> parameter had been used with
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a>; the “finalizer” that resets
the isolation level would be called on the no longer opened connection.</p>
<a class="changelog-reference headerlink reference internal" href="#change-394c5516672e736e3c9559084ec887cd">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3302">#3302</a></p>
</p>
</li>
<li><p id="change-0.9.9-13"><span class="target" id="change-e69b88c19910ee3b225c03d45a8a0d07"><strong>[engine] [bug]</strong> </span><p>A warning is emitted if the <code class="docutils literal notranslate"><span class="pre">isolation_level</span></code> parameter is used
with <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a> when a <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Transaction" title="sqlalchemy.engine.Transaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code></a>
is in play; DBAPIs and/or SQLAlchemy dialects such as psycopg2,
MySQLdb may implicitly rollback or commit the transaction, or
not change the setting til next transaction, so this is never safe.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e69b88c19910ee3b225c03d45a8a0d07">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3296">#3296</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.9-sql">
<h3>sql<a class="headerlink" href="#change-0.9.9-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.9-14"><span class="target" id="change-3577552ba354e8d369dededa4f306eb8"><strong>[sql] [bug]</strong> </span><p>Added the <code class="docutils literal notranslate"><span class="pre">native_enum</span></code> flag to the <code class="docutils literal notranslate"><span class="pre">__repr__()</span></code> output
of <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></a>, which is mostly important when using it with
Alembic autogenerate.  Pull request courtesy Dimitris Theodorou.</p>
<a class="changelog-reference headerlink reference internal" href="#change-3577552ba354e8d369dededa4f306eb8">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.9-15"><span class="target" id="change-a61899ed2d03a8e546f7daf26f476c1c"><strong>[sql] [bug]</strong> </span><p>Fixed bug where using a <a class="reference internal" href="../core/custom_types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code></a> that implemented
a type that was also a <a class="reference internal" href="../core/custom_types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code></a> would fail with
Python’s “Cannot create a consistent method resolution order (MRO)”
error, when any kind of SQL comparison expression were used against
an object using this type.</p>
<a class="changelog-reference headerlink reference internal" href="#change-a61899ed2d03a8e546f7daf26f476c1c">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3278">#3278</a></p>
</p>
</li>
<li><p id="change-0.9.9-16"><span class="target" id="change-2bdcbd3f5a1eb1534034bea319ff6eb5"><strong>[sql] [bug]</strong> </span><p>Fixed issue where the columns from a SELECT embedded in an
INSERT, either through the values clause or as a “from select”,
would pollute the column types used in the result set produced by
the RETURNING clause when columns from both statements shared the
same name, leading to potential errors or mis-adaptation when
retrieving the returning rows.</p>
<a class="changelog-reference headerlink reference internal" href="#change-2bdcbd3f5a1eb1534034bea319ff6eb5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3248">#3248</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.9-schema">
<h3>schema<a class="headerlink" href="#change-0.9.9-schema" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.9-17"><span class="target" id="change-4174c5d38944ec13bc76cc10181274df"><strong>[schema] [bug]</strong> </span><p>Fixed bug in 0.9’s foreign key setup system, such that
the logic used to link a <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> to its parent could fail
when the foreign key used “link_to_name=True” in conjunction with
a target <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> that would not receive its parent column until
later, such as within a reflection + “useexisting” scenario,
if the target column in fact had a key value different from its name,
as would occur in reflection if column reflect events were used to
alter the .key of reflected <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects so that the
link_to_name becomes significant.  Also repaired support for column
type via FK transmission in a similar way when target columns had a
different key and were referenced using link_to_name.</p>
<a class="changelog-reference headerlink reference internal" href="#change-4174c5d38944ec13bc76cc10181274df">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1765">#1765</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3298">#3298</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.9-postgresql">
<h3>postgresql<a class="headerlink" href="#change-0.9.9-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.9-18"><span class="target" id="change-0b2c89d4de9682f9d5b1d03a98c539a4"><strong>[postgresql] [feature]</strong> </span><p>Added support for the <code class="docutils literal notranslate"><span class="pre">CONCURRENTLY</span></code> keyword with PostgreSQL
indexes, established using <code class="docutils literal notranslate"><span class="pre">postgresql_concurrently</span></code>.  Pull
request courtesy Iuri de Silvio.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../dialects/postgresql.html#postgresql-index-concurrently"><span class="std std-ref">Indexes with CONCURRENTLY</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-0b2c89d4de9682f9d5b1d03a98c539a4">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.9-19"><span class="target" id="change-80ac13ee64539e157253a09ed60b5ef2"><strong>[postgresql] [bug]</strong> </span><p>Repaired support for PostgreSQL UUID types in conjunction with
the ARRAY type when using psycopg2.  The psycopg2 dialect now
employs use of the psycopg2.extras.register_uuid() hook
so that UUID values are always passed to/from the DBAPI as
UUID() objects.   The <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.UUID.params.as_uuid" title="sqlalchemy.dialects.postgresql.UUID"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">UUID.as_uuid</span></code></a> flag is still
honored, except with psycopg2 we need to convert returned
UUID objects back into strings when this is disabled.</p>
<a class="changelog-reference headerlink reference internal" href="#change-80ac13ee64539e157253a09ed60b5ef2">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2940">#2940</a></p>
</p>
</li>
<li><p id="change-0.9.9-20"><span class="target" id="change-c632de8dde067c70ccf363e6daeedb9e"><strong>[postgresql] [bug]</strong> </span><p>Added support for the <code class="xref py py-class docutils literal notranslate"><span class="pre">postgresql.JSONB</span></code> datatype when
using psycopg2 2.5.4 or greater, which features native conversion
of JSONB data so that SQLAlchemy’s converters must be disabled;
additionally, the newly added psycopg2 extension
<code class="docutils literal notranslate"><span class="pre">extras.register_default_jsonb</span></code> is used to establish a JSON
deserializer passed to the dialect via the <code class="docutils literal notranslate"><span class="pre">json_deserializer</span></code>
argument.  Also repaired the PostgreSQL integration tests which
weren’t actually round-tripping the JSONB type as opposed to the
JSON type.  Pull request courtesy Mateusz Susik.</p>
<a class="changelog-reference headerlink reference internal" href="#change-c632de8dde067c70ccf363e6daeedb9e">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.9-21"><span class="target" id="change-d9bcd810bfd2c7b0bf94a17822ff2207"><strong>[postgresql] [bug]</strong> </span><p>Repaired the use of the “array_oid” flag when registering the
HSTORE type with older psycopg2 versions &lt; 2.4.3, which does not
support this flag, as well as use of the native json serializer
hook “register_default_json” with user-defined <code class="docutils literal notranslate"><span class="pre">json_deserializer</span></code>
on psycopg2 versions &lt; 2.5, which does not include native json.</p>
<a class="changelog-reference headerlink reference internal" href="#change-d9bcd810bfd2c7b0bf94a17822ff2207">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.9-22"><span class="target" id="change-7310ce4a51e2cab2ee3e08300ee719ec"><strong>[postgresql] [bug]</strong> </span><p>Fixed bug where PostgreSQL dialect would fail to render an
expression in an <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> that did not correspond directly
to a table-bound column; typically when a <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> construct
was one of the expressions within the index; or could misinterpret the
list of expressions if one or more of them were such an expression.</p>
<a class="changelog-reference headerlink reference internal" href="#change-7310ce4a51e2cab2ee3e08300ee719ec">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3174">#3174</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.9-mysql">
<h3>mysql<a class="headerlink" href="#change-0.9.9-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.9-23"><span class="target" id="change-7333b35e43798c9ea3a76af9a66e0994"><strong>[mysql] [bug]</strong> </span><p>Added a version check to the MySQLdb dialect surrounding the
check for ‘utf8_bin’ collation, as this fails on MySQL server &lt; 5.0.</p>
<a class="changelog-reference headerlink reference internal" href="#change-7333b35e43798c9ea3a76af9a66e0994">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3274">#3274</a></p>
</p>
</li>
<li><p id="change-0.9.9-24"><span class="target" id="change-8ad918e4ff23a5c688ab088a851b3d84"><strong>[mysql] [change]</strong> </span><p>The <code class="docutils literal notranslate"><span class="pre">gaerdbms</span></code> dialect is no longer necessary, and emits a
deprecation warning.  Google now recommends using the MySQLdb
dialect directly.</p>
<a class="changelog-reference headerlink reference internal" href="#change-8ad918e4ff23a5c688ab088a851b3d84">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3275">#3275</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.9-sqlite">
<h3>sqlite<a class="headerlink" href="#change-0.9.9-sqlite" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.9-25"><span class="target" id="change-2437d88dea80ab7c4b359b0a0b1c5851"><strong>[sqlite] [feature]</strong> </span><p>Added support for partial indexes (e.g. with a WHERE clause) on
SQLite.  Pull request courtesy Kai Groner.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../dialects/sqlite.html#sqlite-partial-index"><span class="std std-ref">Partial Indexes</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-2437d88dea80ab7c4b359b0a0b1c5851">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.9-26"><span class="target" id="change-e7af5da13cb89fc42bd84e28fe79ec07"><strong>[sqlite] [feature]</strong> </span><p>Added a new SQLite backend for the SQLCipher backend.  This backend
provides for encrypted SQLite databases using the pysqlcipher Python
driver, which is very similar to the pysqlite driver.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../dialects/sqlite.html#module-sqlalchemy.dialects.sqlite.pysqlcipher" title="sqlalchemy.dialects.sqlite.pysqlcipher"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pysqlcipher</span></code></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-e7af5da13cb89fc42bd84e28fe79ec07">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.9-misc">
<h3>misc<a class="headerlink" href="#change-0.9.9-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.9-27"><span class="target" id="change-10dacdfe5eb7c9ab611635de10cb4708"><strong>[bug] [ext] [py3k]</strong> </span><p>Fixed bug where the association proxy list class would not interpret
slices correctly under Py3K.  Pull request courtesy
Gilles Dartiguelongue.</p>
<a class="changelog-reference headerlink reference internal" href="#change-10dacdfe5eb7c9ab611635de10cb4708">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.9-28"><span class="target" id="change-9729fe8589ed3467a037083e5d6d0797"><strong>[bug] [examples]</strong> </span><p>Updated the <a class="reference internal" href="../orm/examples.html#examples-versioned-history"><span class="std std-ref">Versioning with a History Table</span></a> example such that
mapped columns are re-mapped to
match column names as well as grouping of columns; in particular,
this allows columns that are explicitly grouped in a same-column-named
joined inheritance scenario to be mapped in the same way in the
history mappings, avoiding warnings added in the 0.9 series
regarding this pattern and allowing the same view of attribute
keys.</p>
<a class="changelog-reference headerlink reference internal" href="#change-9729fe8589ed3467a037083e5d6d0797">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.9-29"><span class="target" id="change-e63d7eb2f35f2898fb1d5eedb2809e0d"><strong>[bug] [examples]</strong> </span><p>Fixed a bug in the examples/generic_associations/discriminator_on_association.py
example, where the subclasses of AddressAssociation were not being
mapped as “single table inheritance”, leading to problems when trying
to use the mappings further.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e63d7eb2f35f2898fb1d5eedb2809e0d">¶</a><p></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.8">
<h2 class="release-version">0.9.8<a class="headerlink" href="#change-0.9.8" title="Permalink to this headline">¶</a></h2>
Released: October 13, 2014<div class="section" id="change-0.9.8-orm">
<h3>orm<a class="headerlink" href="#change-0.9.8-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.8-0"><span class="target" id="change-040cb84155ffafc236b8a0959f655553"><strong>[orm] [bug] [engine]</strong> </span><p>Fixed bug that affected generally the same classes of event
as that of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3199">#3199</a>, when the <code class="docutils literal notranslate"><span class="pre">named=True</span></code> parameter
would be used.  Some events would fail to register, and others
would not invoke the event arguments correctly, generally in the
case of when an event was “wrapped” for adaption in some other way.
The “named” mechanics have been rearranged to not interfere with
the argument signature expected by internal wrapper functions.</p>
<a class="changelog-reference headerlink reference internal" href="#change-040cb84155ffafc236b8a0959f655553">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3197">#3197</a></p>
</p>
</li>
<li><p id="change-0.9.8-1"><span class="target" id="change-65925a14215a5f14359c76d2e3b04bae"><strong>[orm] [bug]</strong> </span><p>Fixed bug that affected many classes of event, particularly
ORM events but also engine events, where the usual logic of
“de duplicating” a redundant call to <a class="reference internal" href="../core/event.html#sqlalchemy.event.listen" title="sqlalchemy.event.listen"><code class="xref py py-func docutils literal notranslate"><span class="pre">listen()</span></code></a>
with the same arguments would fail, for those events where the
listener function is wrapped.  An assertion would be hit within
registry.py.  This assertion has now been integrated into the
deduplication check, with the added bonus of a simpler means
of checking deduplication across the board.</p>
<a class="changelog-reference headerlink reference internal" href="#change-65925a14215a5f14359c76d2e3b04bae">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3199">#3199</a></p>
</p>
</li>
<li><p id="change-0.9.8-2"><span class="target" id="change-dc9752643faf4e960c03910d74b7c380"><strong>[orm] [bug]</strong> </span><p>Fixed warning that would emit when a complex self-referential
primaryjoin contained functions, while at the same time remote_side
was specified; the warning would suggest setting “remote side”.
It now only emits if remote_side isn’t present.</p>
<a class="changelog-reference headerlink reference internal" href="#change-dc9752643faf4e960c03910d74b7c380">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3194">#3194</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.8-orm-declarative">
<h3>orm declarative<a class="headerlink" href="#change-0.9.8-orm-declarative" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.8-3"><span class="target" id="change-3e9abe4fb814c36d081c1af0743b68a0"><strong>[bug] [declarative] [orm]</strong> </span><p>Fixed “‘NoneType’ object has no attribute ‘concrete’” error
when using <a class="reference internal" href="../orm/extensions/declarative/api.html#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractConcreteBase</span></code></a> in conjunction with
a subclass that declares <code class="docutils literal notranslate"><span class="pre">__abstract__</span></code>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-3e9abe4fb814c36d081c1af0743b68a0">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3185">#3185</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.8-engine">
<h3>engine<a class="headerlink" href="#change-0.9.8-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.8-4"><span class="target" id="change-5ea92686db96cba0e79afedbcc6adf59"><strong>[engine] [bug]</strong> </span><p>The execution options passed to an <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> either via
<a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine.params.execution_options" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.execution_options</span></code></a> or
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine.update_execution_options" title="sqlalchemy.engine.Engine.update_execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.update_execution_options()</span></code></a> are not passed to the
special <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> used to initialize the dialect
within the “first connect” event; dialects will usually
perform their own queries in this phase, and none of the
current available  options should be applied here.  In
particular, the “autocommit” option was causing an attempt to
autocommit within this initial connect which would fail with
an AttributeError due to the non-standard state of the
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-5ea92686db96cba0e79afedbcc6adf59">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3200">#3200</a></p>
</p>
</li>
<li><p id="change-0.9.8-5"><span class="target" id="change-6a98e0632754dd817947fcd39bd2a627"><strong>[engine] [bug]</strong> </span><p>The string keys that are used to determine the columns impacted
for an INSERT or UPDATE are now sorted when they contribute towards
the “compiled cache” cache key.   These keys were previously not
deterministically ordered, meaning the same statement could be
cached multiple times on equivalent keys, costing both in terms of
memory as well as performance.</p>
<a class="changelog-reference headerlink reference internal" href="#change-6a98e0632754dd817947fcd39bd2a627">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3165">#3165</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.8-sql">
<h3>sql<a class="headerlink" href="#change-0.9.8-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.8-6"><span class="target" id="change-222b0163a38f1bb2a9d159b7278af9fb"><strong>[sql] [bug]</strong> </span><p>Fixed bug where a fair number of SQL elements within
the sql package would fail to <code class="docutils literal notranslate"><span class="pre">__repr__()</span></code> successfully,
due to a missing <code class="docutils literal notranslate"><span class="pre">description</span></code> attribute that would then invoke
a recursion overflow when an internal AttributeError would then
re-invoke <code class="docutils literal notranslate"><span class="pre">__repr__()</span></code>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-222b0163a38f1bb2a9d159b7278af9fb">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3195">#3195</a></p>
</p>
</li>
<li><p id="change-0.9.8-7"><span class="target" id="change-c1ac48f9d293ea2e5f282a620ff1a9cc"><strong>[sql] [bug]</strong> </span><p>An adjustment to table/index reflection such that if an index
reports a column that isn’t found to be present in the table,
a warning is emitted and the column is skipped.  This can occur
for some special system column situations as has been observed
with Oracle.</p>
<a class="changelog-reference headerlink reference internal" href="#change-c1ac48f9d293ea2e5f282a620ff1a9cc">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3180">#3180</a></p>
</p>
</li>
<li><p id="change-0.9.8-8"><span class="target" id="change-438513ba693d7e6a58994f37a3ed2ca5"><strong>[sql] [bug]</strong> </span><p>Fixed bug in CTE where <code class="docutils literal notranslate"><span class="pre">literal_binds</span></code> compiler argument would not
be always be correctly propagated when one CTE referred to another
aliased CTE in a statement.</p>
<a class="changelog-reference headerlink reference internal" href="#change-438513ba693d7e6a58994f37a3ed2ca5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3154">#3154</a></p>
</p>
</li>
<li><p id="change-0.9.8-9"><span class="target" id="change-ae836fdd12b932ca0dfa9804e5b52282"><strong>[sql] [bug]</strong> </span><p>Fixed 0.9.7 regression caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3067">#3067</a> in conjunction with
a mis-named unit test such that so-called “schema” types like
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Boolean" title="sqlalchemy.types.Boolean"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a> and <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></a> could no longer be pickled.</p>
<a class="changelog-reference headerlink reference internal" href="#change-ae836fdd12b932ca0dfa9804e5b52282">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3067">#3067</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3144">#3144</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.8-postgresql">
<h3>postgresql<a class="headerlink" href="#change-0.9.8-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.8-10"><span class="target" id="change-348b76a1618d3c820757eb094ebca1ef"><strong>[postgresql] [feature] [pg8000]</strong> </span><p>Support is added for “sane multi row count” with the pg8000 driver,
which applies mostly to when using versioning with the ORM.
The feature is version-detected based on pg8000 1.9.14 or greater
in use.  Pull request courtesy Tony Locke.</p>
<a class="changelog-reference headerlink reference internal" href="#change-348b76a1618d3c820757eb094ebca1ef">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.8-11"><span class="target" id="change-f9a3e851447589d85ac72da3b5ae6f96"><strong>[postgresql] [bug]</strong> </span><p>A revisit to this issue first patched in 0.9.5, apparently
psycopg2’s <code class="docutils literal notranslate"><span class="pre">.closed</span></code> accessor is not as reliable as we assumed,
so we have added an explicit check for the exception messages
“SSL SYSCALL error: Bad file descriptor” and
“SSL SYSCALL error: EOF detected” when detecting an
is-disconnect scenario.   We will continue to consult psycopg2’s
connection.closed as a first check.</p>
<a class="changelog-reference headerlink reference internal" href="#change-f9a3e851447589d85ac72da3b5ae6f96">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3021">#3021</a></p>
</p>
</li>
<li><p id="change-0.9.8-12"><span class="target" id="change-bf45b6e09af4ac04fb1d3b00e4da9aee"><strong>[postgresql] [bug]</strong> </span><p>Fixed bug where PostgreSQL JSON type was not able to persist or
otherwise render a SQL NULL column value, rather than a JSON-encoded
<code class="docutils literal notranslate"><span class="pre">'null'</span></code>.  To support this case, changes are as follows:</p>
<ul>
<li><p>The value <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.null" title="sqlalchemy.sql.expression.null"><code class="xref py py-func docutils literal notranslate"><span class="pre">null()</span></code></a> can now be specified, which will always
result in a NULL value resulting in the statement.</p></li>
<li><p>A new parameter <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.JSON.params.none_as_null" title="sqlalchemy.types.JSON"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">JSON.none_as_null</span></code></a> is added, which
when True indicates that the Python <code class="docutils literal notranslate"><span class="pre">None</span></code> value should be
persisted as SQL NULL, rather than JSON-encoded <code class="docutils literal notranslate"><span class="pre">'null'</span></code>.</p></li>
</ul>
<p>Retrival of NULL as None is also repaired for DBAPIs other than
psycopg2, namely pg8000.</p>
<a class="changelog-reference headerlink reference internal" href="#change-bf45b6e09af4ac04fb1d3b00e4da9aee">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3159">#3159</a></p>
</p>
</li>
<li><p id="change-0.9.8-13"><span class="target" id="change-90221b5e6266d9262bf64826feba9769"><strong>[postgresql] [bug]</strong> </span><p>The exception wrapping system for DBAPI errors can now accommodate
non-standard DBAPI exceptions, such as the psycopg2
TransactionRollbackError.  These exceptions will now be raised
using the closest available subclass in <code class="docutils literal notranslate"><span class="pre">sqlalchemy.exc</span></code>, in the
case of TransactionRollbackError, <code class="docutils literal notranslate"><span class="pre">sqlalchemy.exc.OperationalError</span></code>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-90221b5e6266d9262bf64826feba9769">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3075">#3075</a></p>
</p>
</li>
<li><p id="change-0.9.8-14"><span class="target" id="change-7f25bb6d60f7a1279948396ac86574bb"><strong>[postgresql] [bug]</strong> </span><p>Fixed bug in <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.array" title="sqlalchemy.dialects.postgresql.array"><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></a> object where comparison
to a plain Python list would fail to use the correct array constructor.
Pull request courtesy Andrew.</p>
<a class="changelog-reference headerlink reference internal" href="#change-7f25bb6d60f7a1279948396ac86574bb">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3141">#3141</a></p>
</p>
</li>
<li><p id="change-0.9.8-15"><span class="target" id="change-aaaa4815736728bec50c929a09c7fa5a"><strong>[postgresql] [bug]</strong> </span><p>Added a supported <a class="reference internal" href="../core/functions.html#sqlalchemy.sql.functions.FunctionElement.alias" title="sqlalchemy.sql.functions.FunctionElement.alias"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FunctionElement.alias()</span></code></a> method to functions,
e.g. the <code class="docutils literal notranslate"><span class="pre">func</span></code> construct.  Previously, behavior for this method
was undefined.  The current behavior mimics that of pre-0.9.4,
which is that the function is turned into a single-column FROM
clause with the given alias name, where the column itself is
anonymously named.</p>
<a class="changelog-reference headerlink reference internal" href="#change-aaaa4815736728bec50c929a09c7fa5a">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3137">#3137</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.8-mysql">
<h3>mysql<a class="headerlink" href="#change-0.9.8-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.8-16"><span class="target" id="change-32126a623ef93ac44e3e9243d1260fca"><strong>[mysql] [bug] [mysqlconnector]</strong> </span><p>Mysqlconnector as of version 2.0, probably as a side effect of
the  python 3 merge, now does not expect percent signs (e.g.
as used as the modulus operator and others) to be doubled,
even when using the “pyformat” bound parameter format (this
change is not documented by Mysqlconnector).  The dialect now
checks for py2k and for mysqlconnector less than version 2.0
when detecting if the modulus operator should be rendered as
<code class="docutils literal notranslate"><span class="pre">%%</span></code> or <code class="docutils literal notranslate"><span class="pre">%</span></code>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-32126a623ef93ac44e3e9243d1260fca">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.8-17"><span class="target" id="change-84da2ff9c9a80a77a2cc999ec3dfcf9e"><strong>[mysql] [bug] [mysqlconnector]</strong> </span><p>Unicode SQL is now passed for MySQLconnector version 2.0 and above;
for Py2k and MySQL &lt; 2.0, strings are encoded.</p>
<a class="changelog-reference headerlink reference internal" href="#change-84da2ff9c9a80a77a2cc999ec3dfcf9e">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.8-sqlite">
<h3>sqlite<a class="headerlink" href="#change-0.9.8-sqlite" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.8-18"><span class="target" id="change-fa653d4ec018e069a52b2268725c5b88"><strong>[sqlite] [bug]</strong> </span><p>When selecting from a UNION using an attached database file,
the pysqlite driver reports column names in cursor.description
as ‘dbname.tablename.colname’, instead of ‘tablename.colname’ as
it normally does for a UNION (note that it’s supposed to just be
‘colname’ for both, but we work around it).  The column translation
logic here has been adjusted to retrieve the rightmost token, rather
than the second token, so it works in both cases.   Workaround
courtesy Tony Roberts.</p>
<a class="changelog-reference headerlink reference internal" href="#change-fa653d4ec018e069a52b2268725c5b88">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3211">#3211</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.8-mssql">
<h3>mssql<a class="headerlink" href="#change-0.9.8-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.8-19"><span class="target" id="change-80d8c2f1d6da858394e3f7fcf143fa10"><strong>[mssql] [bug]</strong> </span><p>Fixed the version string detection in the pymssql dialect to
work with Microsoft SQL Azure, which changes the word “SQL Server”
to “SQL Azure”.</p>
<a class="changelog-reference headerlink reference internal" href="#change-80d8c2f1d6da858394e3f7fcf143fa10">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3151">#3151</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.8-oracle">
<h3>oracle<a class="headerlink" href="#change-0.9.8-oracle" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.8-20"><span class="target" id="change-f3121682a918ac059e902d14e81d0d54"><strong>[oracle] [bug]</strong> </span><p>Fixed long-standing bug in Oracle dialect where bound parameter
names that started with numbers would not be quoted, as Oracle
doesn’t like numerics in bound parameter names.</p>
<a class="changelog-reference headerlink reference internal" href="#change-f3121682a918ac059e902d14e81d0d54">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2138">#2138</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.8-misc">
<h3>misc<a class="headerlink" href="#change-0.9.8-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.8-21"><span class="target" id="change-1be20931c5cc779a5512e9e3ed985a11"><strong>[bug] [declarative]</strong> </span><p>Fixed an unlikely race condition observed in some exotic end-user
setups, where the attempt to check for “duplicate class name” in
declarative would hit upon a not-totally-cleaned-up weak reference
related to some other class being removed; the check here now ensures
the weakref still references an object before calling upon it further.</p>
<a class="changelog-reference headerlink reference internal" href="#change-1be20931c5cc779a5512e9e3ed985a11">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3208">#3208</a></p>
</p>
</li>
<li><p id="change-0.9.8-22"><span class="target" id="change-f63e94a1795bd303f88294c462bd3b95"><strong>[bug] [ext]</strong> </span><p>Fixed bug in ordering list where the order of items would be
thrown off during a collection replace event, if the
reorder_on_append flag were set to True.  The fix ensures that the
ordering list only impacts the list that is explicitly associated
with the object.</p>
<a class="changelog-reference headerlink reference internal" href="#change-f63e94a1795bd303f88294c462bd3b95">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3191">#3191</a></p>
</p>
</li>
<li><p id="change-0.9.8-23"><span class="target" id="change-8d9ef3d42e12a3991355d6db0d7e0590"><strong>[bug] [ext]</strong> </span><p>Fixed bug where <a class="reference internal" href="../orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">MutableDict</span></code></a>
failed to implement the <code class="docutils literal notranslate"><span class="pre">update()</span></code> dictionary method, thus
not catching changes. Pull request courtesy Matt Chisholm.</p>
<a class="changelog-reference headerlink reference internal" href="#change-8d9ef3d42e12a3991355d6db0d7e0590">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.8-24"><span class="target" id="change-2995e85c7b79e5acb0500b5f7bef1116"><strong>[bug] [ext]</strong> </span><p>Fixed bug where a custom subclass of <a class="reference internal" href="../orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">MutableDict</span></code></a>
would not show up in a “coerce” operation, and would instead
return a plain <a class="reference internal" href="../orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">MutableDict</span></code></a>.  Pull request
courtesy Matt Chisholm.</p>
<a class="changelog-reference headerlink reference internal" href="#change-2995e85c7b79e5acb0500b5f7bef1116">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.8-25"><span class="target" id="change-45bc7ea621ab2ad2ee138f5a0f4af495"><strong>[bug] [pool]</strong> </span><p>Fixed bug in connection pool logging where the “connection checked out”
debug logging message would not emit if the logging were set up using
<code class="docutils literal notranslate"><span class="pre">logging.setLevel()</span></code>, rather than using the <code class="docutils literal notranslate"><span class="pre">echo_pool</span></code> flag.
Tests to assert this logging have been added.  This is a
regression that was introduced in 0.9.0.</p>
<a class="changelog-reference headerlink reference internal" href="#change-45bc7ea621ab2ad2ee138f5a0f4af495">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3168">#3168</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.7">
<h2 class="release-version">0.9.7<a class="headerlink" href="#change-0.9.7" title="Permalink to this headline">¶</a></h2>
Released: July 22, 2014<div class="section" id="change-0.9.7-orm">
<h3>orm<a class="headerlink" href="#change-0.9.7-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-0"><span class="target" id="change-6d4965c4def4ed6fe2cd5b1dc72055a2"><strong>[orm] [bug] [eagerloading]</strong> </span><p>Fixed a regression caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2976">#2976</a> released in 0.9.4 where
the “outer join” propagation along a chain of joined eager loads
would incorrectly convert an “inner join” along a sibling join path
into an outer join as well, when only descendant paths should be
receiving the “outer join” propagation; additionally, fixed related
issue where “nested” join propagation would take place inappropriately
between two sibling join paths.</p>
<a class="changelog-reference headerlink reference internal" href="#change-6d4965c4def4ed6fe2cd5b1dc72055a2">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3131">#3131</a></p>
</p>
</li>
<li><p id="change-0.9.7-1"><span class="target" id="change-61d46ddadd1243c644e4afbb5051ce5d"><strong>[orm] [bug]</strong> </span><p>Fixed a regression from 0.9.0 due to <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2736">#2736</a> where the
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.select_from()</span></code></a> method no longer set up the “from
entity” of the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> object correctly, so that
subsequent <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.filter_by" title="sqlalchemy.orm.query.Query.filter_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.filter_by()</span></code></a> or <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.join()</span></code></a>
calls would fail to check the appropriate “from” entity when
searching for attributes by string name.</p>
<a class="changelog-reference headerlink reference internal" href="#change-61d46ddadd1243c644e4afbb5051ce5d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2736">#2736</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3083">#3083</a></p>
</p>
</li>
<li><p id="change-0.9.7-2"><span class="target" id="change-93ffe57d97cc97b691e1697f532fa023"><strong>[orm] [bug]</strong> </span><p>The “evaluator” for query.update()/delete() won’t work with multi-table
updates, and needs to be set to <cite>synchronize_session=False</cite> or
<cite>synchronize_session=’fetch’</cite>; a warning is now emitted.  In
1.0 this will be promoted to a full exception.</p>
<a class="changelog-reference headerlink reference internal" href="#change-93ffe57d97cc97b691e1697f532fa023">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3117">#3117</a></p>
</p>
</li>
<li><p id="change-0.9.7-3"><span class="target" id="change-0f516bc305a847469d43e0869d992cdd"><strong>[orm] [bug]</strong> </span><p>Fixed bug where items that were persisted, deleted, or had a
primary key change within a savepoint block would not
participate in being restored to their former state (not in
session, in session, previous PK) after the outer transaction
were rolled back.</p>
<a class="changelog-reference headerlink reference internal" href="#change-0f516bc305a847469d43e0869d992cdd">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3108">#3108</a></p>
</p>
</li>
<li><p id="change-0.9.7-4"><span class="target" id="change-94424863efab08f99293f7724de969bf"><strong>[orm] [bug]</strong> </span><p>Fixed bug in subquery eager loading in conjunction with
<a class="reference internal" href="../orm/inheritance_loading.html#sqlalchemy.orm.with_polymorphic" title="sqlalchemy.orm.with_polymorphic"><code class="xref py py-func docutils literal notranslate"><span class="pre">with_polymorphic()</span></code></a>, the targeting of entities and columns
in the subquery load has been made more accurate with respect
to this type of entity and others.</p>
<a class="changelog-reference headerlink reference internal" href="#change-94424863efab08f99293f7724de969bf">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3106">#3106</a></p>
</p>
</li>
<li><p id="change-0.9.7-5"><span class="target" id="change-cfc1f15148c259394c9b3b373392bc15"><strong>[orm] [bug]</strong> </span><p>Fixed bug involving dynamic attributes, that was again a regression
of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">#3060</a> from version 0.9.5.  A self-referential relationship
with lazy=’dynamic’ would raise a TypeError within a flush operation.</p>
<a class="changelog-reference headerlink reference internal" href="#change-cfc1f15148c259394c9b3b373392bc15">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3099">#3099</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.7-engine">
<h3>engine<a class="headerlink" href="#change-0.9.7-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-6"><span class="target" id="change-4062d0afa2a67360ac9e7c97c79f35d4"><strong>[engine] [feature]</strong> </span><p>Added new event <a class="reference internal" href="../core/events.html#sqlalchemy.events.ConnectionEvents.handle_error" title="sqlalchemy.events.ConnectionEvents.handle_error"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.handle_error()</span></code></a>, a more
fully featured and comprehensive replacement for
<a class="reference internal" href="../core/events.html#sqlalchemy.events.ConnectionEvents.dbapi_error" title="sqlalchemy.events.ConnectionEvents.dbapi_error"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.dbapi_error()</span></code></a>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-4062d0afa2a67360ac9e7c97c79f35d4">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3076">#3076</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.7-sql">
<h3>sql<a class="headerlink" href="#change-0.9.7-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-7"><span class="target" id="change-08a78793c26fd10b053486a483ebad9f"><strong>[sql] [bug]</strong> </span><p>Fixed bug in <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></a> and other <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.SchemaType" title="sqlalchemy.types.SchemaType"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaType</span></code></a>
subclasses where direct association of the type with a
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> would lead to a hang when events
(like create events) were emitted on the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-08a78793c26fd10b053486a483ebad9f">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3124">#3124</a></p>
</p>
</li>
<li><p id="change-0.9.7-8"><span class="target" id="change-be5c6a13348bdb50ab072eded4f844b3"><strong>[sql] [bug]</strong> </span><p>Fixed a bug within the custom operator plus <a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine.with_variant" title="sqlalchemy.types.TypeEngine.with_variant"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TypeEngine.with_variant()</span></code></a>
system, whereby using a <a class="reference internal" href="../core/custom_types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code></a> in conjunction with
variant would fail with an MRO error when a comparison operator was used.</p>
<a class="changelog-reference headerlink reference internal" href="#change-be5c6a13348bdb50ab072eded4f844b3">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3102">#3102</a></p>
</p>
</li>
<li><p id="change-0.9.7-9"><span class="target" id="change-346b9ff8fbd8e4eac954bf271b4c6ad6"><strong>[sql] [bug]</strong> </span><p>Fix bug in naming convention feature where using a check
constraint convention that includes <code class="docutils literal notranslate"><span class="pre">constraint_name</span></code> would
then force all <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Boolean" title="sqlalchemy.types.Boolean"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a> and <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></a> types to
require names as well, as these implicitly create a
constraint, even if the ultimate target backend were one that does
not require generation of the constraint such as PostgreSQL.
The mechanics of naming conventions for these particular
constraints has been reorganized such that the naming
determination is done at DDL compile time, rather than at
constraint/table construction time.</p>
<a class="changelog-reference headerlink reference internal" href="#change-346b9ff8fbd8e4eac954bf271b4c6ad6">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3067">#3067</a></p>
</p>
</li>
<li><p id="change-0.9.7-10"><span class="target" id="change-b79d7dd3f1ca1273c1284f2b2e8c296d"><strong>[sql] [bug]</strong> </span><p>Fixed bug in common table expressions whereby positional bound
parameters could be expressed in the wrong final order
when CTEs were nested in certain ways.</p>
<a class="changelog-reference headerlink reference internal" href="#change-b79d7dd3f1ca1273c1284f2b2e8c296d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3090">#3090</a></p>
</p>
</li>
<li><p id="change-0.9.7-11"><span class="target" id="change-9f3a810c852f582cfa2eef2e268ec4ef"><strong>[sql] [bug]</strong> </span><p>Fixed bug where multi-valued <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> construct would fail
to check subsequent values entries beyond the first one given
for literal SQL expressions.</p>
<a class="changelog-reference headerlink reference internal" href="#change-9f3a810c852f582cfa2eef2e268ec4ef">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3069">#3069</a></p>
</p>
</li>
<li><p id="change-0.9.7-12"><span class="target" id="change-c80817d5fa95f2678e1eab3edb2eae19"><strong>[sql] [bug]</strong> </span><p>Added a “str()” step to the dialect_kwargs iteration for
Python version &lt; 2.6.5, working around the
“no unicode keyword arg” bug as these args are passed along as
keyword args within some reflection processes.</p>
<a class="changelog-reference headerlink reference internal" href="#change-c80817d5fa95f2678e1eab3edb2eae19">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3123">#3123</a></p>
</p>
</li>
<li><p id="change-0.9.7-13"><span class="target" id="change-8b1c78cb8eeb1975b8c03e0275f0af7b"><strong>[sql] [bug]</strong> </span><p>The <a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine.with_variant" title="sqlalchemy.types.TypeEngine.with_variant"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TypeEngine.with_variant()</span></code></a> method will now accept a
type class as an argument which is internally converted to an
instance, using the same convention long established by other
constructs such as <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-8b1c78cb8eeb1975b8c03e0275f0af7b">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3122">#3122</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.7-postgresql">
<h3>postgresql<a class="headerlink" href="#change-0.9.7-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-14"><span class="target" id="change-d5177977fbaffd2ad0990c4ebf70a9ae"><strong>[postgresql] [feature]</strong> </span><p>Added kw argument <code class="docutils literal notranslate"><span class="pre">postgresql_regconfig</span></code> to the
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.match" title="sqlalchemy.sql.operators.ColumnOperators.match"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnOperators.match()</span></code></a> operator, allows the “reg config” argument
to be specified to the <code class="docutils literal notranslate"><span class="pre">to_tsquery()</span></code> function emitted.
Pull request courtesy Jonathan Vanasco.</p>
<a class="changelog-reference headerlink reference internal" href="#change-d5177977fbaffd2ad0990c4ebf70a9ae">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3078">#3078</a></p>
</p>
</li>
<li><p id="change-0.9.7-15"><span class="target" id="change-456fe2cd1c75a276cd4e599f01f9e062"><strong>[postgresql] [feature]</strong> </span><p>Added support for PostgreSQL JSONB via <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.JSONB" title="sqlalchemy.dialects.postgresql.JSONB"><code class="xref py py-class docutils literal notranslate"><span class="pre">JSONB</span></code></a>.  Pull request
courtesy Damian Dimmich.</p>
<a class="changelog-reference headerlink reference internal" href="#change-456fe2cd1c75a276cd4e599f01f9e062">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.7-16"><span class="target" id="change-42d4d4dfd75600d1aca8205469504bb4"><strong>[postgresql] [bug] [pg8000]</strong> </span><p>Fixed bug introduced in 0.9.5 by new pg8000 isolation level feature
where engine-level isolation level parameter would raise an error
on connect.</p>
<a class="changelog-reference headerlink reference internal" href="#change-42d4d4dfd75600d1aca8205469504bb4">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3134">#3134</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.7-mysql">
<h3>mysql<a class="headerlink" href="#change-0.9.7-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-17"><span class="target" id="change-1548add72e7bdd221e888a5b3d6d9302"><strong>[mysql] [bug]</strong> </span><p>MySQL error 2014 “commands out of sync” appears to be raised as a
ProgrammingError, not OperationalError, in modern MySQL-Python versions;
all MySQL error codes that are tested for “is disconnect” are now
checked within OperationalError and ProgrammingError regardless.</p>
<a class="changelog-reference headerlink reference internal" href="#change-1548add72e7bdd221e888a5b3d6d9302">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3101">#3101</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.7-sqlite">
<h3>sqlite<a class="headerlink" href="#change-0.9.7-sqlite" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-18"><span class="target" id="change-5068035ad308233e769418ef305a1621"><strong>[sqlite] [bug]</strong> </span><p>Fixed a SQLite join rewriting issue where a subquery that is embedded
as a scalar subquery such as within an IN would receive inappropriate
substitutions from the enclosing query, if the same table were present
inside the subquery as were in the enclosing query such as in a
joined inheritance scenario.</p>
<a class="changelog-reference headerlink reference internal" href="#change-5068035ad308233e769418ef305a1621">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3130">#3130</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.7-mssql">
<h3>mssql<a class="headerlink" href="#change-0.9.7-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-19"><span class="target" id="change-e5ab682c0b41fbfd0dcfb6c0fa0578f2"><strong>[mssql] [feature]</strong> </span><p>Enabled “multivalues insert” for SQL Server 2008.  Pull request
courtesy Albert Cervin.  Also expanded the checks for “IDENTITY INSERT”
mode to include when the identity key is present in the
VALUEs clause of the statement.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e5ab682c0b41fbfd0dcfb6c0fa0578f2">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.7-20"><span class="target" id="change-d9cb352dd29f9a5adb545d81d0cac1c9"><strong>[mssql] [bug]</strong> </span><p>Added statement encoding to the “SET IDENTITY_INSERT”
statements which operate when an explicit INSERT is being
interjected into an IDENTITY column, to support non-ascii table
identifiers on drivers such as pyodbc + unix + py2k that don’t
support unicode statements.</p>
<a class="changelog-reference headerlink reference internal" href="#change-d9cb352dd29f9a5adb545d81d0cac1c9">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.7-21"><span class="target" id="change-4f728a60ab19f0468d57cf1bf84e2b5a"><strong>[mssql] [bug]</strong> </span><p>In the SQL Server pyodbc dialect, repaired the implementation
for the <code class="docutils literal notranslate"><span class="pre">description_encoding</span></code> dialect parameter, which when
not explicitly set was preventing  cursor.description from
being parsed correctly in the case of result sets that
contained names in alternate encodings.  This parameter
shouldn’t be needed going forward.</p>
<a class="changelog-reference headerlink reference internal" href="#change-4f728a60ab19f0468d57cf1bf84e2b5a">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3091">#3091</a></p>
</p>
</li>
<li><p id="change-0.9.7-22"><span class="target" id="change-82de60fa2e391061691dd22349c22f5e"><strong>[mssql] [bug]</strong> </span><p>Fixed a regression from 0.9.5 caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3025">#3025</a> where the
query used to determine “default schema” is invalid in SQL Server 2000.
For SQL Server 2000 we go back to defaulting to the “schema name”
parameter of the dialect, which is configurable but defaults
to ‘dbo’.</p>
<a class="changelog-reference headerlink reference internal" href="#change-82de60fa2e391061691dd22349c22f5e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3025">#3025</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.7-oracle">
<h3>oracle<a class="headerlink" href="#change-0.9.7-oracle" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-23"><span class="target" id="change-afb93babbe33115000779944030bb303"><strong>[oracle] [bug] [tests]</strong> </span><p>Fixed bug in oracle dialect test suite where in one test,
‘username’ was assumed to be in the database URL, even though
this might not be the case.</p>
<a class="changelog-reference headerlink reference internal" href="#change-afb93babbe33115000779944030bb303">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3128">#3128</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.7-misc">
<h3>misc<a class="headerlink" href="#change-0.9.7-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.7-24"><span class="target" id="change-7731e09fca20d7106d8a5a6a10e341f1"><strong>[bug] [tests]</strong> </span><p>Fixed bug where “python setup.py test” wasn’t calling into
distutils appropriately, and errors would be emitted at the end
of the test suite.</p>
<a class="changelog-reference headerlink reference internal" href="#change-7731e09fca20d7106d8a5a6a10e341f1">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.7-25"><span class="target" id="change-905a41f06acdffd4ebc408aee599c147"><strong>[bug] [declarative]</strong> </span><p>Fixed bug when the declarative <code class="docutils literal notranslate"><span class="pre">__abstract__</span></code> flag was not being
distinguished for when it was actually the value <code class="docutils literal notranslate"><span class="pre">False</span></code>.
The <code class="docutils literal notranslate"><span class="pre">__abstract__</span></code> flag needs to actually evaluate to a True
value at the level being tested.</p>
<a class="changelog-reference headerlink reference internal" href="#change-905a41f06acdffd4ebc408aee599c147">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3097">#3097</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.6">
<h2 class="release-version">0.9.6<a class="headerlink" href="#change-0.9.6" title="Permalink to this headline">¶</a></h2>
Released: June 23, 2014<div class="section" id="change-0.9.6-orm">
<h3>orm<a class="headerlink" href="#change-0.9.6-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.6-0"><span class="target" id="change-b34ddce636d140c62cb6b43b92ce3464"><strong>[orm] [bug]</strong> </span><p>Reverted the change for <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">#3060</a> - this is a unit of work
fix that is updated more comprehensively in 1.0 via <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3061">#3061</a>.
The fix in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">#3060</a> unfortunately produces a new issue whereby
an eager load of a many-to-one attribute can produce an event
that is interpreted into an attribute change.</p>
<a class="changelog-reference headerlink reference internal" href="#change-b34ddce636d140c62cb6b43b92ce3464">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">#3060</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.5">
<h2 class="release-version">0.9.5<a class="headerlink" href="#change-0.9.5" title="Permalink to this headline">¶</a></h2>
Released: June 23, 2014<div class="section" id="change-0.9.5-orm">
<h3>orm<a class="headerlink" href="#change-0.9.5-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.5-0"><span class="target" id="change-b14ee29d17139fd41dceb132ae75ee3a"><strong>[orm] [feature]</strong> </span><p>The “primaryjoin” model has been stretched a bit further to allow
a join condition that is strictly from a single column to itself,
translated through some kind of SQL function or expression.  This
is kind of experimental, but the first proof of concept is a
“materialized path” join condition where a path string is compared
to itself using “like”.   The <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.like" title="sqlalchemy.sql.operators.ColumnOperators.like"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnOperators.like()</span></code></a> operator has
also been added to the list of valid operators to use in a primaryjoin
condition.</p>
<a class="changelog-reference headerlink reference internal" href="#change-b14ee29d17139fd41dceb132ae75ee3a">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3029">#3029</a></p>
</p>
</li>
<li><p id="change-0.9.5-1"><span class="target" id="change-d2f991a8058f33793f0f9fdd996750fa"><strong>[orm] [feature]</strong> </span><p>Added new utility function <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.make_transient_to_detached" title="sqlalchemy.orm.session.make_transient_to_detached"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_transient_to_detached()</span></code></a> which can
be used to manufacture objects that behave as though they were loaded
from a session, then detached.   Attributes that aren’t present
are marked as expired, and the object can be added to a Session
where it will act like a persistent one.</p>
<a class="changelog-reference headerlink reference internal" href="#change-d2f991a8058f33793f0f9fdd996750fa">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3017">#3017</a></p>
</p>
</li>
<li><p id="change-0.9.5-2"><span class="target" id="change-368bbcba8a65910bc0ebf133019cd593"><strong>[orm] [bug]</strong> </span><p>Fixed bug in subquery eager loading where a long chain of
eager loads across a polymorphic-subclass boundary in conjunction
with polymorphic loading would fail to locate the subclass-link in the
chain, erroring out with a missing property name on an
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.util.AliasedClass" title="sqlalchemy.orm.util.AliasedClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">AliasedClass</span></code></a>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-368bbcba8a65910bc0ebf133019cd593">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3055">#3055</a></p>
</p>
</li>
<li><p id="change-0.9.5-3"><span class="target" id="change-871a7a18ca10428184a782f221a13740"><strong>[orm] [bug]</strong> </span><p>Fixed ORM bug where the <a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.class_mapper" title="sqlalchemy.orm.class_mapper"><code class="xref py py-func docutils literal notranslate"><span class="pre">class_mapper()</span></code></a> function would mask
AttributeErrors or KeyErrors that should raise during mapper
configuration due to user errors.  The catch for attribute/keyerror
has been made more specific to not include the configuration step.</p>
<a class="changelog-reference headerlink reference internal" href="#change-871a7a18ca10428184a782f221a13740">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3047">#3047</a></p>
</p>
</li>
<li><p id="change-0.9.5-4"><span class="target" id="change-5ffa32a79580d10d4dc6e1f322b62326"><strong>[orm] [bug]</strong> </span><p>Additional checks have been added for the case where an inheriting
mapper is implicitly combining one of its column-based attributes
with that of the parent, where those columns normally don’t necessarily
share the same value.  This is an extension of an existing check that
was added via <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1892">#1892</a>; however this new check emits only a
warning, instead of an exception, to allow for applications that may
be relying upon the existing behavior.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../faq/ormconfiguration.html#faq-combining-columns"><span class="std std-ref">I’m getting a warning or error about “Implicitly combining column X under attribute Y”</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-5ffa32a79580d10d4dc6e1f322b62326">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3042">#3042</a></p>
</p>
</li>
<li><p id="change-0.9.5-5"><span class="target" id="change-25bfed359ea9ffac545b3582739da0c4"><strong>[orm] [bug]</strong> </span><p>Modified the behavior of <a class="reference internal" href="../orm/loading_columns.html#sqlalchemy.orm.load_only" title="sqlalchemy.orm.load_only"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_only()</span></code></a> such that primary key
columns are always added to the list of columns to be “undeferred”;
otherwise, the ORM can’t load the row’s identity.   Apparently,
one can defer the mapped primary keys and the ORM will fail, that
hasn’t been changed.  But as load_only is essentially saying
“defer all but X”, it’s more critical that PK cols not be part of this
deferral.</p>
<a class="changelog-reference headerlink reference internal" href="#change-25bfed359ea9ffac545b3582739da0c4">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3080">#3080</a></p>
</p>
</li>
<li><p id="change-0.9.5-6"><span class="target" id="change-7dee9371466176d8e4b29c007477a68a"><strong>[orm] [bug]</strong> </span><p>Fixed a few edge cases which arise in the so-called “row switch”
scenario, where an INSERT/DELETE can be turned into an UPDATE.
In this situation, a many-to-one relationship set to None, or
in some cases a scalar attribute set to None, may not be detected
as a net change in value, and therefore the UPDATE would not reset
what was on the previous row.   This is due to some as-yet
unresolved side effects of the way attribute history works in terms
of implicitly assuming None isn’t really a “change” for a previously
un-set attribute.  See also <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3061">#3061</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This change has been <strong>REVERTED</strong> in 0.9.6.   The full fix
will be in version 1.0 of SQLAlchemy.</p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-7dee9371466176d8e4b29c007477a68a">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">#3060</a></p>
</p>
</li>
<li><p id="change-0.9.5-7"><span class="target" id="change-075684cfd4ae61fbe83f5b7c147fcc8a"><strong>[orm] [bug]</strong> </span><p>Related to <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3060">#3060</a>, an adjustment has been made to the unit
of work such that loading for related many-to-one objects is slightly
more aggressive, in the case of a graph of self-referential objects
that are to be deleted; the load of related objects is to help
determine the correct order for deletion if passive_deletes is
not set.</p>
<a class="changelog-reference headerlink reference internal" href="#change-075684cfd4ae61fbe83f5b7c147fcc8a">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.5-8"><span class="target" id="change-fa2ca744e5fa4caa260e51dbac157f2e"><strong>[orm] [bug]</strong> </span><p>Fixed bug in SQLite join rewriting where anonymized column names
due to repeats would not correctly be rewritten in subqueries.
This would affect SELECT queries with any kind of subquery + join.</p>
<a class="changelog-reference headerlink reference internal" href="#change-fa2ca744e5fa4caa260e51dbac157f2e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3057">#3057</a></p>
</p>
</li>
<li><p id="change-0.9.5-9"><span class="target" id="change-45db778576e325692f382fbe4e309669"><strong>[orm] [bug] [sql]</strong> </span><p>Fixes to the newly enhanced boolean coercion in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2804">#2804</a> where
the new rules for “where” and “having” woudn’t take effect for the
“whereclause” and “having” kw arguments of the <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a> construct,
which is also what <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> uses so wasn’t working in the
ORM either.</p>
<a class="changelog-reference headerlink reference internal" href="#change-45db778576e325692f382fbe4e309669">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3013">#3013</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.5-engine">
<h3>engine<a class="headerlink" href="#change-0.9.5-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.5-10"><span class="target" id="change-84310c96ae6744a277731d49bbf40a8a"><strong>[engine] [bug]</strong> </span><p>Fixed bug which would occur if a DBAPI exception
occurs when the engine first connects and does its initial checks,
and the exception is not a disconnect exception, yet the cursor
raises an error when we try to close it.  In this case the real
exception would be quashed as we tried to log the cursor close
exception via the connection pool and failed, as we were trying
to access the pool’s logger in a way that is inappropriate
in this very specific scenario.</p>
<a class="changelog-reference headerlink reference internal" href="#change-84310c96ae6744a277731d49bbf40a8a">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3063">#3063</a></p>
</p>
</li>
<li><p id="change-0.9.5-11"><span class="target" id="change-b17a4835aab34786d5ecedee0ead17e1"><strong>[engine] [bug]</strong> </span><p>Fixed some “double invalidate” situations were detected where
a connection invalidation could occur within an already critical section
like a connection.close(); ultimately, these conditions are caused
by the change in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2907">#2907</a>, in that the “reset on return” feature
calls out to the Connection/Transaction in order to handle it, where
“disconnect detection” might be caught.  However, it’s possible that
the more recent change in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2985">#2985</a> made it more likely for this
to be seen as the “connection invalidate” operation is much quicker,
as the issue is more reproducible on 0.9.4 than 0.9.3.</p>
<p>Checks are now added within any section that
an invalidate might occur to halt further disallowed operations
on the invalidated connection.  This includes two fixes both at the
engine level and at the pool level.   While the issue was observed
with highly concurrent gevent cases, it could in theory occur in
any kind of scenario where a disconnect occurs within the connection
close operation.</p>
<a class="changelog-reference headerlink reference internal" href="#change-b17a4835aab34786d5ecedee0ead17e1">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3043">#3043</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.5-sql">
<h3>sql<a class="headerlink" href="#change-0.9.5-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.5-12"><span class="target" id="change-f7babfe631a67d2dbe1627a033f09c8b"><strong>[sql] [feature]</strong> </span><p>Liberalized the contract for <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> a bit in that you can
specify a <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> expression as the target; the index no longer
needs to have a table-bound column present if the index is to be
manually added to the table, either via inline declaration or via
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.append_constraint" title="sqlalchemy.schema.Table.append_constraint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.append_constraint()</span></code></a>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-f7babfe631a67d2dbe1627a033f09c8b">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3028">#3028</a></p>
</p>
</li>
<li><p id="change-0.9.5-13"><span class="target" id="change-af7cd160da5802d1180fd83faee35afd"><strong>[sql] [feature]</strong> </span><p>Added new flag <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.between.params.symmetric" title="sqlalchemy.sql.expression.between"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">between.symmetric</span></code></a>, when set to True
renders “BETWEEN SYMMETRIC”.  Also added a new negation operator
“notbetween_op”, which now allows an expression like <code class="docutils literal notranslate"><span class="pre">~col.between(x,</span> <span class="pre">y)</span></code>
to render as “col NOT BETWEEN x AND y”, rather than a parenthesized NOT
string.</p>
<a class="changelog-reference headerlink reference internal" href="#change-af7cd160da5802d1180fd83faee35afd">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2990">#2990</a></p>
</p>
</li>
<li><p id="change-0.9.5-14"><span class="target" id="change-9f9af41aeaf6c84b4705936f62a45be9"><strong>[sql] [bug]</strong> </span><p>Fixed bug in INSERT..FROM SELECT construct where selecting from a
UNION would wrap the union in an anonymous (e.g. unlabeled) subquery.</p>
<a class="changelog-reference headerlink reference internal" href="#change-9f9af41aeaf6c84b4705936f62a45be9">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3044">#3044</a></p>
</p>
</li>
<li><p id="change-0.9.5-15"><span class="target" id="change-74c445dabb61781a9bd829c5df7d80df"><strong>[sql] [bug]</strong> </span><p>Fixed bug where <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.update" title="sqlalchemy.schema.Table.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.update()</span></code></a> and <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.delete" title="sqlalchemy.schema.Table.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.delete()</span></code></a>
would produce an empty WHERE clause when an empty <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.and_" title="sqlalchemy.sql.expression.and_"><code class="xref py py-func docutils literal notranslate"><span class="pre">and_()</span></code></a>
or <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.or_" title="sqlalchemy.sql.expression.or_"><code class="xref py py-func docutils literal notranslate"><span class="pre">or_()</span></code></a> or other blank expression were applied.  This is
now consistent with that of <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-74c445dabb61781a9bd829c5df7d80df">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3045">#3045</a></p>
</p>
</li>
<li><p id="change-0.9.5-16"><span class="target" id="change-83df5359e7efaeb82389957dec0cdb65"><strong>[sql] [bug]</strong> </span><p>The <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column.params.nullable" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.nullable</span></code></a> flag is implicitly set to <code class="docutils literal notranslate"><span class="pre">False</span></code>
when that <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> is referred to in an explicit
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a> for that table.  This behavior now
matches that of when the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> itself has the
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column.params.primary_key" title="sqlalchemy.schema.Column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Column.primary_key</span></code></a> flag set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, which is
intended to be an exactly equivalent case.</p>
<a class="changelog-reference headerlink reference internal" href="#change-83df5359e7efaeb82389957dec0cdb65">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3023">#3023</a></p>
</p>
</li>
<li><p id="change-0.9.5-17"><span class="target" id="change-85577d5daa751d0acb0c47949a0c7e2f"><strong>[sql] [bug]</strong> </span><p>Fixed bug where the <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.Operators.__and__" title="sqlalchemy.sql.operators.Operators.__and__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operators.__and__()</span></code></a>,
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.Operators.__or__" title="sqlalchemy.sql.operators.Operators.__or__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operators.__or__()</span></code></a> and <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.Operators.__invert__" title="sqlalchemy.sql.operators.Operators.__invert__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operators.__invert__()</span></code></a>
operator overload methods could not be overridden within a custom
<a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine.Comparator" title="sqlalchemy.types.TypeEngine.Comparator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Comparator</span></code></a> implementation.</p>
<a class="changelog-reference headerlink reference internal" href="#change-85577d5daa751d0acb0c47949a0c7e2f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3012">#3012</a></p>
</p>
</li>
<li><p id="change-0.9.5-18"><span class="target" id="change-959ca2bf6fe8506aedc7d32093077f73"><strong>[sql] [bug]</strong> </span><p>Fixed bug in new <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> method where
adding an argument for a construct not previously included for any
special arguments would fail.</p>
<a class="changelog-reference headerlink reference internal" href="#change-959ca2bf6fe8506aedc7d32093077f73">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3024">#3024</a></p>
</p>
</li>
<li><p id="change-0.9.5-19"><span class="target" id="change-dfb711b371577e0da5d5793400a73450"><strong>[sql] [bug]</strong> </span><p>Fixed regression introduced in 0.9 where new “ORDER BY &lt;labelname&gt;”
feature from <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1068">#1068</a> would not apply quoting rules to the
label name as rendered in the ORDER BY.</p>
<a class="changelog-reference headerlink reference internal" href="#change-dfb711b371577e0da5d5793400a73450">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1068">#1068</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3020">#3020</a></p>
</p>
</li>
<li><p id="change-0.9.5-20"><span class="target" id="change-8a86a40207c5fd297868fe0b1f26d729"><strong>[sql] [bug]</strong> </span><p>Restored the import for <a class="reference internal" href="../core/functions.html#sqlalchemy.sql.functions.Function" title="sqlalchemy.sql.functions.Function"><code class="xref py py-class docutils literal notranslate"><span class="pre">Function</span></code></a> to the <code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression</span></code>
import namespace, which was removed at the beginning of 0.9.</p>
<a class="changelog-reference headerlink reference internal" href="#change-8a86a40207c5fd297868fe0b1f26d729">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.5-postgresql">
<h3>postgresql<a class="headerlink" href="#change-0.9.5-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.5-21"><span class="target" id="change-911649ad2c23d32ab5dc1670d45c095c"><strong>[postgresql] [feature]</strong> </span><p>Added support for AUTOCOMMIT isolation level when using the pg8000
DBAPI.  Pull request courtesy Tony Locke.</p>
<a class="changelog-reference headerlink reference internal" href="#change-911649ad2c23d32ab5dc1670d45c095c">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.5-22"><span class="target" id="change-a3459e488927e82388dc6b3a4452b01b"><strong>[postgresql] [feature]</strong> </span><p>Added a new flag <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.ARRAY.zero_indexes" title="sqlalchemy.types.ARRAY.zero_indexes"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">ARRAY.zero_indexes</span></code></a> to the PostgreSQL
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.ARRAY" title="sqlalchemy.types.ARRAY"><code class="xref py py-class docutils literal notranslate"><span class="pre">ARRAY</span></code></a> type.  When set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, a value of one will be
added to all array index values before passing to the database, allowing
better interoperability between Python style zero-based indexes and
PostgreSQL one-based indexes.  Pull request courtesy Alexey Terentev.</p>
<a class="changelog-reference headerlink reference internal" href="#change-a3459e488927e82388dc6b3a4452b01b">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2785">#2785</a></p>
</p>
</li>
<li><p id="change-0.9.5-23"><span class="target" id="change-d1fc26504bf95db6331661b1c716fa84"><strong>[postgresql] [bug]</strong> </span><p>Added the <code class="docutils literal notranslate"><span class="pre">hashable=False</span></code> flag to the PG <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.HSTORE" title="sqlalchemy.dialects.postgresql.HSTORE"><code class="xref py py-class docutils literal notranslate"><span class="pre">HSTORE</span></code></a> type, which
is needed to allow the ORM to skip over trying to “hash” an ORM-mapped
HSTORE column when requesting it in a mixed column/entity list.
Patch courtesy Gunnlaugur Þór Briem.</p>
<a class="changelog-reference headerlink reference internal" href="#change-d1fc26504bf95db6331661b1c716fa84">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3053">#3053</a></p>
</p>
</li>
<li><p id="change-0.9.5-24"><span class="target" id="change-b4544c9476cfd8dbf4900f17cafbea73"><strong>[postgresql] [bug]</strong> </span><p>Added a new “disconnect” message “connection has been closed unexpectedly”.
This appears to be related to newer versions of SSL.
Pull request courtesy Antti Haapala.</p>
<a class="changelog-reference headerlink reference internal" href="#change-b4544c9476cfd8dbf4900f17cafbea73">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.5-25"><span class="target" id="change-28077f9da4dc99fa0ea9c3c26c2206b0"><strong>[postgresql] [bug]</strong> </span><p>The psycopg2 <code class="docutils literal notranslate"><span class="pre">.closed</span></code> accessor is now consulted when determining
if an exception is a “disconnect” error; ideally, this should remove
the need for any other inspection of the exception message to detect
disconnect, however we will leave those existing messages in place
as a fallback.   This should be able to handle newer cases like
“SSL EOF” conditions.  Pull request courtesy Dirk Mueller.</p>
<a class="changelog-reference headerlink reference internal" href="#change-28077f9da4dc99fa0ea9c3c26c2206b0">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3021">#3021</a></p>
</p>
</li>
<li><p id="change-0.9.5-26"><span class="target" id="change-42b731c8af61d7ba302b4a05aede2593"><strong>[postgresql] [enhancement]</strong> </span><p>Added a new type <a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.OID" title="sqlalchemy.dialects.postgresql.OID"><code class="xref py py-class docutils literal notranslate"><span class="pre">OID</span></code></a> to the PostgreSQL dialect.
While “oid” is generally a private type within PG that is not exposed
in modern versions, there are some PG use cases such as large object
support where these types might be exposed, as well as within some
user-reported schema reflection use cases.</p>
<a class="changelog-reference headerlink reference internal" href="#change-42b731c8af61d7ba302b4a05aede2593">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3002">#3002</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.5-mysql">
<h3>mysql<a class="headerlink" href="#change-0.9.5-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.5-27"><span class="target" id="change-33595244b0c4abd0a6977c31c3b4f5fa"><strong>[mysql] [bug]</strong> </span><p>Fixed bug where column names added to <code class="docutils literal notranslate"><span class="pre">mysql_length</span></code> parameter
on an index needed to have the same quoting for quoted names in
order to be recognized.  The fix makes the quotes optional but
also provides the old behavior for backwards compatibility with those
using the workaround.</p>
<a class="changelog-reference headerlink reference internal" href="#change-33595244b0c4abd0a6977c31c3b4f5fa">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3085">#3085</a></p>
</p>
</li>
<li><p id="change-0.9.5-28"><span class="target" id="change-d8934497b6707c20ed9dc43c8386e63d"><strong>[mysql] [bug]</strong> </span><p>Added support for reflecting tables where an index includes
KEY_BLOCK_SIZE using an equal sign.  Pull request courtesy
Sean McGivern.</p>
<a class="changelog-reference headerlink reference internal" href="#change-d8934497b6707c20ed9dc43c8386e63d">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.5-mssql">
<h3>mssql<a class="headerlink" href="#change-0.9.5-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.5-29"><span class="target" id="change-0ff915fd49e5ce758c93f7563aebdb56"><strong>[mssql] [bug]</strong> </span><p>Revised the query used to determine the current default schema name
to use the <code class="docutils literal notranslate"><span class="pre">database_principal_id()</span></code> function in conjunction with
the <code class="docutils literal notranslate"><span class="pre">sys.database_principals</span></code> view so that we can determine
the default schema independently of the type of login in progress
(e.g., SQL Server, Windows, etc).</p>
<a class="changelog-reference headerlink reference internal" href="#change-0ff915fd49e5ce758c93f7563aebdb56">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3025">#3025</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.5-firebird">
<h3>firebird<a class="headerlink" href="#change-0.9.5-firebird" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.5-30"><span class="target" id="change-d63a34acab255efce997614e69c98053"><strong>[firebird] [bug]</strong> </span><p>Fixed bug where the combination of “limit” rendering as
“SELECT FIRST n ROWS” using a bound parameter (only firebird has both),
combined with column-level subqueries
which also feature “limit” as well as “positional” bound parameters
(e.g. qmark style) would erroneously assign the subquery-level positions
before that of the enclosing SELECT, thus returning parameters which
are out of order.</p>
<a class="changelog-reference headerlink reference internal" href="#change-d63a34acab255efce997614e69c98053">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3038">#3038</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.5-misc">
<h3>misc<a class="headerlink" href="#change-0.9.5-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.5-31"><span class="target" id="change-b027ac056997c7e3f7a6fa31de610989"><strong>[feature] [examples]</strong> </span><p>Added a new example illustrating materialized paths, using the
latest relationship features.   Example courtesy Jack Zhou.</p>
<a class="changelog-reference headerlink reference internal" href="#change-b027ac056997c7e3f7a6fa31de610989">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.5-32"><span class="target" id="change-780993758db8d5169a0b88014034f665"><strong>[bug] [declarative]</strong> </span><p>The <code class="docutils literal notranslate"><span class="pre">__mapper_args__</span></code> dictionary is copied from a declarative
mixin or abstract class when accessed, so that modifications made
to this dictionary by declarative itself won’t conflict with that
of other mappings.  The dictionary is modified regarding the
<code class="docutils literal notranslate"><span class="pre">version_id_col</span></code> and <code class="docutils literal notranslate"><span class="pre">polymorphic_on</span></code> arguments, replacing the
column within with the one that is officially mapped to the local
class/table.</p>
<a class="changelog-reference headerlink reference internal" href="#change-780993758db8d5169a0b88014034f665">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3062">#3062</a></p>
</p>
</li>
<li><p id="change-0.9.5-33"><span class="target" id="change-a159c76538b6b0eed9b7021b02b93d18"><strong>[bug] [ext]</strong> </span><p>Fixed bug in mutable extension where <a class="reference internal" href="../orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">MutableDict</span></code></a> did not
report change events for the <code class="docutils literal notranslate"><span class="pre">setdefault()</span></code> dictionary operation.</p>
<a class="changelog-reference headerlink reference internal" href="#change-a159c76538b6b0eed9b7021b02b93d18">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3051">#3051</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3093">#3093</a></p>
</p>
</li>
<li><p id="change-0.9.5-34"><span class="target" id="change-6faeea1f65b0b63436eba3a21a4eff20"><strong>[bug] [ext]</strong> </span><p>Fixed bug where <a class="reference internal" href="../orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableDict.setdefault" title="sqlalchemy.ext.mutable.MutableDict.setdefault"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MutableDict.setdefault()</span></code></a> didn’t return the
existing or new value (this bug was not released in any 0.8 version).
Pull request courtesy Thomas Hervé.</p>
<a class="changelog-reference headerlink reference internal" href="#change-6faeea1f65b0b63436eba3a21a4eff20">¶</a><p>This change is also <strong>backported</strong> to: 0.8.7</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3051">#3051</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3093">#3093</a></p>
</p>
</li>
<li><p id="change-0.9.5-35"><span class="target" id="change-7ab9250f70ff83704edd689136aa58f4"><strong>[bug] [testsuite]</strong> </span><p>In public test suite, changed to use of <code class="docutils literal notranslate"><span class="pre">String(40)</span></code> from
less-supported <code class="docutils literal notranslate"><span class="pre">Text</span></code> in <code class="docutils literal notranslate"><span class="pre">StringTest.test_literal_backslashes</span></code>.
Pullreq courtesy Jan.</p>
<a class="changelog-reference headerlink reference internal" href="#change-7ab9250f70ff83704edd689136aa58f4">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.5-36"><span class="target" id="change-0482bb06234a4584cf24a7b5f94ba4e7"><strong>[bug] [py3k] [tests]</strong> </span><p>Corrected for some deprecation warnings involving the <code class="docutils literal notranslate"><span class="pre">imp</span></code>
module and Python 3.3 or greater, when running tests.  Pull
request courtesy Matt Chisholm.</p>
<a class="changelog-reference headerlink reference internal" href="#change-0482bb06234a4584cf24a7b5f94ba4e7">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2830">#2830</a></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.4">
<h2 class="release-version">0.9.4<a class="headerlink" href="#change-0.9.4" title="Permalink to this headline">¶</a></h2>
Released: March 28, 2014<div class="section" id="change-0.9.4-general">
<h3>general<a class="headerlink" href="#change-0.9.4-general" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.4-0"><span class="target" id="change-8b07998904f97052927cddc00d64a109"><strong>[general] [feature]</strong> </span><p>Support has been added for pytest to run tests.   This runner
is currently being supported in addition to nose, and will likely
be preferred to nose going forward.   The nose plugin system used
by SQLAlchemy has been split out so that it works under pytest as
well.  There are no plans to drop support for nose at the moment
and we hope that the test suite itself can continue to remain as
agnostic of testing platform as possible.  See the file
README.unittests.rst for updated information on running tests
with pytest.</p>
<p>The test plugin system has also been enhanced to support running
tests against multiple database URLs at once, by specifying the <code class="docutils literal notranslate"><span class="pre">--db</span></code>
and/or <code class="docutils literal notranslate"><span class="pre">--dburi</span></code> flags multiple times.  This does not run the entire test
suite for each database, but instead allows test cases that are specific
to certain backends make use of that backend as the test is run.
When using pytest as the test runner, the system will also run
specific test suites multiple times, once for each database, particularly
those tests within the “dialect suite”.   The plan is that the enhanced
system will also be used by Alembic, and allow Alembic to run
migration operation tests against multiple backends in one run, including
third-party backends not included within Alembic itself.
Third party dialects and extensions are also encouraged to standardize
on SQLAlchemy’s test suite as a basis; see the file README.dialects.rst
for background on building out from SQLAlchemy’s test platform.</p>
<a class="changelog-reference headerlink reference internal" href="#change-8b07998904f97052927cddc00d64a109">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-1"><span class="target" id="change-aa9491d98f1ead53e0464652e0816e71"><strong>[general] [bug]</strong> </span><p>Adjusted <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file to support the possible future
removal of the <code class="docutils literal notranslate"><span class="pre">setuptools.Feature</span></code> extension from setuptools.
If this keyword isn’t present, the setup will still succeed
with setuptools rather than falling back to distutils.  C extension
building can be disabled now also by setting the
DISABLE_SQLALCHEMY_CEXT environment variable.  This variable works
whether or not setuptools is even available.</p>
<a class="changelog-reference headerlink reference internal" href="#change-aa9491d98f1ead53e0464652e0816e71">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2986">#2986</a></p>
</p>
</li>
<li><p id="change-0.9.4-2"><span class="target" id="change-1c1ca7f7a0d5e6ba577a8a31920eba2d"><strong>[general] [bug]</strong> </span><p>Fixed some test/feature failures occurring in Python 3.4,
in particular the logic used to wrap “column default” callables
wouldn’t work properly for Python built-ins.</p>
<a class="changelog-reference headerlink reference internal" href="#change-1c1ca7f7a0d5e6ba577a8a31920eba2d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2979">#2979</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.4-orm">
<h3>orm<a class="headerlink" href="#change-0.9.4-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.4-3"><span class="target" id="change-9e23c7c28f359372f92c6661ec54a74f"><strong>[orm] [feature]</strong> </span><p>Added new parameter <a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.mapper.params.confirm_deleted_rows" title="sqlalchemy.orm.mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapper.confirm_deleted_rows</span></code></a>.  Defaults
to True, indicates that a series of DELETE statements should confirm
that the cursor rowcount matches the number of primary keys that should
have matched;  this behavior had been taken off in most cases
(except when version_id is used) to support the unusual edge case of
self-referential ON DELETE CASCADE; to accommodate this, the message
is now just a warning, not an exception, and the flag can be used
to indicate a mapping that expects self-referential cascaded
deletes of this nature.  See also <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2403">#2403</a> for background on the
original change.</p>
<a class="changelog-reference headerlink reference internal" href="#change-9e23c7c28f359372f92c6661ec54a74f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3007">#3007</a></p>
</p>
</li>
<li><p id="change-0.9.4-4"><span class="target" id="change-4dbefa991bc15832dbd5722613a9ec8b"><strong>[orm] [feature]</strong> </span><p>A warning is emitted if the <a class="reference internal" href="../orm/events.html#sqlalchemy.orm.events.MapperEvents.before_configured" title="sqlalchemy.orm.events.MapperEvents.before_configured"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MapperEvents.before_configured()</span></code></a>
or <a class="reference internal" href="../orm/events.html#sqlalchemy.orm.events.MapperEvents.after_configured" title="sqlalchemy.orm.events.MapperEvents.after_configured"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MapperEvents.after_configured()</span></code></a> events are applied to a
specific mapper or mapped class, as the events are only invoked
for the <a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> target at the general level.</p>
<a class="changelog-reference headerlink reference internal" href="#change-4dbefa991bc15832dbd5722613a9ec8b">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-5"><span class="target" id="change-aef7530390a87c53f08a067e5881ebc8"><strong>[orm] [feature]</strong> </span><p>Added a new keyword argument <code class="docutils literal notranslate"><span class="pre">once=True</span></code> to <a class="reference internal" href="../core/event.html#sqlalchemy.event.listen" title="sqlalchemy.event.listen"><code class="xref py py-func docutils literal notranslate"><span class="pre">listen()</span></code></a>
and <a class="reference internal" href="../core/event.html#sqlalchemy.event.listens_for" title="sqlalchemy.event.listens_for"><code class="xref py py-func docutils literal notranslate"><span class="pre">listens_for()</span></code></a>.  This is a convenience feature which
will wrap the given listener such that it is only invoked once.</p>
<a class="changelog-reference headerlink reference internal" href="#change-aef7530390a87c53f08a067e5881ebc8">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-6"><span class="target" id="change-2363c295319d0823eecd2e63c95663e5"><strong>[orm] [feature]</strong> </span><p>Added a new option to <a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.relationship.params.innerjoin" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.innerjoin</span></code></a> which is
to specify the string <code class="docutils literal notranslate"><span class="pre">&quot;nested&quot;</span></code>.  When set to <code class="docutils literal notranslate"><span class="pre">&quot;nested&quot;</span></code> as opposed
to <code class="docutils literal notranslate"><span class="pre">True</span></code>, the “chaining” of joins will parenthesize the inner join on the
right side of an existing outer join, instead of chaining as a string
of outer joins.   This possibly should have been the default behavior
when 0.9 was released, as we introduced the feature of right-nested
joins in the ORM, however we are keeping it as a non-default for now
to avoid further surprises.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#feature-2976"><span class="std std-ref">Right-nested inner joins available in joined eager loads</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-2363c295319d0823eecd2e63c95663e5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2976">#2976</a></p>
</p>
</li>
<li><p id="change-0.9.4-7"><span class="target" id="change-0c43a5d88cf8a178453e8e7bb6dd6346"><strong>[orm] [bug]</strong> </span><p>Fixed ORM bug where changing the primary key of an object, then marking
it for DELETE would fail to target the correct row for DELETE.</p>
<a class="changelog-reference headerlink reference internal" href="#change-0c43a5d88cf8a178453e8e7bb6dd6346">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3006">#3006</a></p>
</p>
</li>
<li><p id="change-0.9.4-8"><span class="target" id="change-035773212f99eca992be16278ffa7c60"><strong>[orm] [bug]</strong> </span><p>Fixed regression from 0.8.3 as a result of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2818">#2818</a>
where <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.exists" title="sqlalchemy.orm.query.Query.exists"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.exists()</span></code></a> wouldn’t work on a query that only
had a <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.select_from()</span></code></a> entry but no other entities.</p>
<a class="changelog-reference headerlink reference internal" href="#change-035773212f99eca992be16278ffa7c60">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2995">#2995</a></p>
</p>
</li>
<li><p id="change-0.9.4-9"><span class="target" id="change-982465365ea40acced9cf15b19a4e419"><strong>[orm] [bug]</strong> </span><p>Improved an error message which would occur if a query() were made
against a non-selectable, such as a <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.literal_column" title="sqlalchemy.sql.expression.literal_column"><code class="xref py py-func docutils literal notranslate"><span class="pre">literal_column()</span></code></a>, and then
an attempt was made to use <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.join" title="sqlalchemy.orm.query.Query.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.join()</span></code></a> such that the “left”
side would be determined as <code class="docutils literal notranslate"><span class="pre">None</span></code> and then fail.  This condition
is now detected explicitly.</p>
<a class="changelog-reference headerlink reference internal" href="#change-982465365ea40acced9cf15b19a4e419">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.4-10"><span class="target" id="change-bafeea020f9eb338bbde39de93481f0b"><strong>[orm] [bug]</strong> </span><p>Removed stale names from <code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm.interfaces.__all__</span></code> and
refreshed with current names, so that an <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">*</span></code> from this
module again works.</p>
<a class="changelog-reference headerlink reference internal" href="#change-bafeea020f9eb338bbde39de93481f0b">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2975">#2975</a></p>
</p>
</li>
<li><p id="change-0.9.4-11"><span class="target" id="change-c7ec7a2b899f6d33f4ef3c25d538daa0"><strong>[orm] [bug]</strong> </span><p>Fixed a very old behavior where the lazy load emitted for a one-to-many
could inappropriately pull in the parent table, and also return results
inconsistent based on what’s in the parent table, when the primaryjoin
includes some kind of discriminator against the parent table, such
as <code class="docutils literal notranslate"><span class="pre">and_(parent.id</span> <span class="pre">==</span> <span class="pre">child.parent_id,</span> <span class="pre">parent.deleted</span> <span class="pre">==</span> <span class="pre">False)</span></code>.
While this primaryjoin doesn’t make that much sense for a one-to-many,
it is slightly more common when applied to the many-to-one side, and
the one-to-many comes as a result of a backref.
Loading rows from <code class="docutils literal notranslate"><span class="pre">child</span></code> in this case would keep <code class="docutils literal notranslate"><span class="pre">parent.deleted</span> <span class="pre">==</span> <span class="pre">False</span></code>
as is within the query, thereby yanking it into the FROM clause
and doing a cartesian product.  The new behavior will now substitute
the value of the local “parent.deleted” for that parameter as is
appropriate.   Though typically, a real-world app probably wants to use a
different primaryjoin for the o2m side in any case.</p>
<a class="changelog-reference headerlink reference internal" href="#change-c7ec7a2b899f6d33f4ef3c25d538daa0">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2948">#2948</a></p>
</p>
</li>
<li><p id="change-0.9.4-12"><span class="target" id="change-f407535c51c6656da4cfb08cd1542503"><strong>[orm] [bug]</strong> </span><p>Improved the check for “how to join from A to B” such that when
a table has multiple, composite foreign keys targeting a parent table,
the <a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.relationship.params.foreign_keys" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.foreign_keys</span></code></a> argument will be properly
interpreted in order to resolve the ambiguity; previously this condition
would raise that there were multiple FK paths when in fact the
foreign_keys argument should be establishing which one is expected.</p>
<a class="changelog-reference headerlink reference internal" href="#change-f407535c51c6656da4cfb08cd1542503">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2965">#2965</a></p>
</p>
</li>
<li><p id="change-0.9.4-13"><span class="target" id="change-a3828784d5eff2704e8133a882415079"><strong>[orm] [bug]</strong> </span><p>Added support for the not-quite-yet-documented <code class="docutils literal notranslate"><span class="pre">insert=True</span></code>
flag for <a class="reference internal" href="../core/event.html#sqlalchemy.event.listen" title="sqlalchemy.event.listen"><code class="xref py py-func docutils literal notranslate"><span class="pre">listen()</span></code></a> to work with mapper / instance events.</p>
<a class="changelog-reference headerlink reference internal" href="#change-a3828784d5eff2704e8133a882415079">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-14"><span class="target" id="change-efb079e4a2bde52cab05c332aee49e22"><strong>[orm] [bug] [engine]</strong> </span><p>Fixed bug where events set to listen at the class
level (e.g. on the <a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> or <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.instrumentation.ClassManager" title="sqlalchemy.orm.instrumentation.ClassManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClassManager</span></code></a>
level, as opposed to on an individual mapped class, and also on
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>) that also made use of internal argument conversion
(which is most within those categories) would fail to be removable.</p>
<a class="changelog-reference headerlink reference internal" href="#change-efb079e4a2bde52cab05c332aee49e22">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2973">#2973</a></p>
</p>
</li>
<li><p id="change-0.9.4-15"><span class="target" id="change-8aae354a4b3ff011dd6d9e53507c279f"><strong>[orm] [bug]</strong> </span><p>Fixed regression from 0.8 where using an option like
<a class="reference internal" href="../orm/loading_relationships.html#sqlalchemy.orm.lazyload" title="sqlalchemy.orm.lazyload"><code class="xref py py-func docutils literal notranslate"><span class="pre">lazyload()</span></code></a> with the “wildcard” expression, e.g. <code class="docutils literal notranslate"><span class="pre">&quot;*&quot;</span></code>,
would raise an assertion error in the case where the query didn’t
contain any actual entities.  This assertion is meant for other cases
and was catching this one inadvertently.</p>
<a class="changelog-reference headerlink reference internal" href="#change-8aae354a4b3ff011dd6d9e53507c279f">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-16"><span class="target" id="change-f9391466ff5f05d8025167143cffb3a3"><strong>[orm] [bug] [sqlite]</strong> </span><p>More fixes to SQLite “join rewriting”; the fix from <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2967">#2967</a>
implemented right before the release of 0.9.3 affected the case where
a UNION contained nested joins in it.   “Join rewriting” is a feature
with a wide range of possibilities and is the first intricate
“SQL rewriting” feature we’ve introduced in years, so we’re sort of
going through a lot of iterations with it (not unlike eager loading
back in the 0.2/0.3 series, polymorphic loading in 0.4/0.5). We should
be there soon so thanks for bearing with us :).</p>
<a class="changelog-reference headerlink reference internal" href="#change-f9391466ff5f05d8025167143cffb3a3">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2969">#2969</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.4-engine">
<h3>engine<a class="headerlink" href="#change-0.9.4-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.4-17"><span class="target" id="change-0fbd5944c2467b0bab55d0a60ee42790"><strong>[engine] [feature]</strong> </span><p>Added some new event mechanics for dialect-level events; the initial
implementation allows an event handler to redefine the specific mechanics
by which an arbitrary dialect invokes execute() or executemany() on a
DBAPI cursor.  The new events, at this point semi-public and experimental,
are in support of some upcoming transaction-related extensions.</p>
<a class="changelog-reference headerlink reference internal" href="#change-0fbd5944c2467b0bab55d0a60ee42790">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-18"><span class="target" id="change-bf0cfd70bc72b3a0d338585889a63fb4"><strong>[engine] [feature]</strong> </span><p>An event listener can now be associated with a <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>,
after one or more <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> objects have been created
(such as by an orm <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> or via explicit connect)
and the listener will pick up events from those connections.
Previously, performance concerns pushed the event transfer from
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> to  <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> at init-time only, but
we’ve inlined a bunch of conditional checks to make this possible
without any additional function calls.</p>
<a class="changelog-reference headerlink reference internal" href="#change-bf0cfd70bc72b3a0d338585889a63fb4">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2978">#2978</a></p>
</p>
</li>
<li><p id="change-0.9.4-19"><span class="target" id="change-2f688763d982ec3ef2381d07c51dd435"><strong>[engine] [bug]</strong> </span><p>A major improvement made to the mechanics by which the <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
recycles the connection pool when a “disconnect” condition is detected;
instead of discarding the pool and explicitly closing out connections,
the pool is retained and a “generational” timestamp is updated to
reflect the current time, thereby causing all existing connections
to be recycled when they are next checked out.   This greatly simplifies
the recycle process, removes the need for “waking up” connect attempts
waiting on the old pool and eliminates the race condition that many
immediately-discarded “pool” objects could be created during the
recycle operation.</p>
<a class="changelog-reference headerlink reference internal" href="#change-2f688763d982ec3ef2381d07c51dd435">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2985">#2985</a></p>
</p>
</li>
<li><p id="change-0.9.4-20"><span class="target" id="change-2bdaf42f4d681b56c349b95939f392fb"><strong>[engine] [bug]</strong> </span><p>The <a class="reference internal" href="../core/events.html#sqlalchemy.events.ConnectionEvents.after_cursor_execute" title="sqlalchemy.events.ConnectionEvents.after_cursor_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.after_cursor_execute()</span></code></a> event is now
emitted for the “_cursor_execute()” method of <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>;
this is the “quick” executor that is used for things like
when a sequence is executed ahead of an INSERT statement, as well as
for dialect startup checks like unicode returns, charset, etc.
the <a class="reference internal" href="../core/events.html#sqlalchemy.events.ConnectionEvents.before_cursor_execute" title="sqlalchemy.events.ConnectionEvents.before_cursor_execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.before_cursor_execute()</span></code></a> event was already
invoked here.  The “executemany” flag is now always set to False
here, as this event always corresponds to a single execution.
Previously the flag could be True if we were acting on behalf of
an executemany INSERT statement.</p>
<a class="changelog-reference headerlink reference internal" href="#change-2bdaf42f4d681b56c349b95939f392fb">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.4-sql">
<h3>sql<a class="headerlink" href="#change-0.9.4-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.4-21"><span class="target" id="change-ae73b72c5883a6bfadd83231bbc945cb"><strong>[sql] [feature]</strong> </span><p>Added support for literal rendering of boolean values, e.g.
“true” / “false” or “1” / “0”.</p>
<a class="changelog-reference headerlink reference internal" href="#change-ae73b72c5883a6bfadd83231bbc945cb">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-22"><span class="target" id="change-eb76a93c5c1ba58cc198d3783e1d4d74"><strong>[sql] [feature]</strong> </span><p>Added a new feature <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.conv" title="sqlalchemy.schema.conv"><code class="xref py py-func docutils literal notranslate"><span class="pre">conv()</span></code></a>, the purpose of which is to
mark a constraint name as already having had a naming convention applied.
This token will be used by Alembic migrations as of Alembic 0.6.4
in order to render constraints in migration scripts with names marked
as already having been subject to a naming convention.</p>
<a class="changelog-reference headerlink reference internal" href="#change-eb76a93c5c1ba58cc198d3783e1d4d74">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-23"><span class="target" id="change-da83b2502fb46853ce0e53aa3df91a9a"><strong>[sql] [feature]</strong> </span><p>The new dialect-level keyword argument system for schema-level
constructs has been enhanced in order to assist with existing
schemes that rely upon addition of ad-hoc keyword arguments to
constructs.</p>
<p>E.g., a construct such as <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> will again accept
ad-hoc keyword arguments within the <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index.kwargs" title="sqlalchemy.schema.Index.kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Index.kwargs</span></code></a> collection,
after construction:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">idx</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">idx</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mysql_someargument&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span></pre></div>
</div>
<p>To suit the use case of allowing custom arguments at construction time,
the <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a> method now allows this registration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="o">.</span><span class="n">argument_for</span><span class="p">(</span><span class="s1">&#39;mysql&#39;</span><span class="p">,</span> <span class="s1">&#39;someargument&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

<span class="n">idx</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">mysql_someargument</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.base.DialectKWArgs.argument_for" title="sqlalchemy.sql.base.DialectKWArgs.argument_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectKWArgs.argument_for()</span></code></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-da83b2502fb46853ce0e53aa3df91a9a">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2866">#2866</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2962">#2962</a></p>
</p>
</li>
<li><p id="change-0.9.4-24"><span class="target" id="change-fe06781a0af32115b5a219dbc350cb6b"><strong>[sql] [bug]</strong> </span><p>Fixed bug in <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.tuple_" title="sqlalchemy.sql.expression.tuple_"><code class="xref py py-func docutils literal notranslate"><span class="pre">tuple_()</span></code></a> construct where the “type” of essentially
the first SQL expression would be applied as the “comparison type”
to a compared tuple value; this has the effect in some cases of an
inappropriate “type coercion” occurring, such as when a tuple that
has a mix of String and Binary values improperly coerces target
values to Binary even though that’s not what they are on the left
side.  <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.tuple_" title="sqlalchemy.sql.expression.tuple_"><code class="xref py py-func docutils literal notranslate"><span class="pre">tuple_()</span></code></a> now expects heterogeneous types within its
list of values.</p>
<a class="changelog-reference headerlink reference internal" href="#change-fe06781a0af32115b5a219dbc350cb6b">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2977">#2977</a></p>
</p>
</li>
<li><p id="change-0.9.4-25"><span class="target" id="change-ba95c9ab0ff11216d8fe5bb713e2398c"><strong>[sql] [bug]</strong> </span><p>Fixed an 0.9 regression where a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> that failed to
reflect correctly wouldn’t be removed from the parent
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>, even though in an invalid state.  Pullreq
courtesy Roman Podoliaka.</p>
<a class="changelog-reference headerlink reference internal" href="#change-ba95c9ab0ff11216d8fe5bb713e2398c">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2988">#2988</a></p>
</p>
</li>
<li><p id="change-0.9.4-26"><span class="target" id="change-e9d783386f345232a96b9a9f34389e43"><strong>[sql] [bug]</strong> </span><p><a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.params.naming_convention" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.naming_convention</span></code></a> feature will now also
apply to <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckConstraint</span></code></a> objects that are associated
directly with a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> instead of just on the
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e9d783386f345232a96b9a9f34389e43">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-27"><span class="target" id="change-50c081ddded08f44824be844d1b15da9"><strong>[sql] [bug]</strong> </span><p>Fixed bug in new <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.params.naming_convention" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.naming_convention</span></code></a> feature
where the name of a check constraint making use of the
<cite>“%(constraint_name)s”</cite> token would get doubled up for the
constraint generated by a boolean or enum type, and overall
duplicate events would cause the <cite>“%(constraint_name)s”</cite> token
to keep compounding itself.</p>
<a class="changelog-reference headerlink reference internal" href="#change-50c081ddded08f44824be844d1b15da9">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2991">#2991</a></p>
</p>
</li>
<li><p id="change-0.9.4-28"><span class="target" id="change-e92ab0a211866ce5780a590de380dd1d"><strong>[sql] [bug]</strong> </span><p>Adjusted the logic which applies names to the .c collection when
a no-name <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.BindParameter" title="sqlalchemy.sql.expression.BindParameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">BindParameter</span></code></a> is received, e.g. via <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.literal" title="sqlalchemy.sql.expression.literal"><code class="xref py py-func docutils literal notranslate"><span class="pre">literal()</span></code></a>
or similar; the “key” of the bind param is used as the key within
.c. rather than the rendered name.  Since these binds have “anonymous”
names in any case, this allows individual bound parameters to
have their own name within a selectable if they are otherwise unlabeled.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e92ab0a211866ce5780a590de380dd1d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2974">#2974</a></p>
</p>
</li>
<li><p id="change-0.9.4-29"><span class="target" id="change-6c78e246b3394d4e4b227f1f06cc54ef"><strong>[sql] [bug]</strong> </span><p>Some changes to how the <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause.c" title="sqlalchemy.sql.expression.FromClause.c"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FromClause.c</span></code></a> collection behaves
when presented with duplicate columns.  The behavior of emitting a
warning and replacing the old column with the same name still
remains to some degree; the replacement in particular is to maintain
backwards compatibility.  However, the replaced column still remains
associated with the <code class="docutils literal notranslate"><span class="pre">c</span></code> collection now in a collection <code class="docutils literal notranslate"><span class="pre">._all_columns</span></code>,
which is used by constructs such as aliases and unions, to deal with
the set of columns in <code class="docutils literal notranslate"><span class="pre">c</span></code> more towards what is actually in the
list of columns rather than the unique set of key names.  This helps
with situations where SELECT statements with same-named columns
are used in unions and such, so that the union can match the columns
up positionally and also there’s some chance of <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.FromClause.corresponding_column" title="sqlalchemy.sql.expression.FromClause.corresponding_column"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FromClause.corresponding_column()</span></code></a>
still being usable here (it can now return a column that is only
in selectable.c._all_columns and not otherwise named).
The new collection is underscored as we still need to decide where this
list might end up.   Theoretically it
would become the result of iter(selectable.c), however this would mean
that the length of the iteration would no longer match the length of
keys(), and that behavior needs to be checked out.</p>
<a class="changelog-reference headerlink reference internal" href="#change-6c78e246b3394d4e4b227f1f06cc54ef">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2974">#2974</a></p>
</p>
</li>
<li><p id="change-0.9.4-30"><span class="target" id="change-650edc97a13474c853b5c10a976a29f0"><strong>[sql] [bug]</strong> </span><p>Fixed issue in new <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.TextClause.columns" title="sqlalchemy.sql.expression.TextClause.columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextClause.columns()</span></code></a> method where the ordering
of columns given positionally would not be preserved.   This could
have potential impact in positional situations such as applying the
resulting <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.TextAsFrom" title="sqlalchemy.sql.expression.TextAsFrom"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextAsFrom</span></code></a> object to a union.</p>
<a class="changelog-reference headerlink reference internal" href="#change-650edc97a13474c853b5c10a976a29f0">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.4-postgresql">
<h3>postgresql<a class="headerlink" href="#change-0.9.4-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.4-31"><span class="target" id="change-f238b48f610767a520453ae382fb1992"><strong>[postgresql] [feature]</strong> </span><p>Enabled “sane multi-row count” checking for the psycopg2 DBAPI, as
this seems to be supported as of psycopg2 2.0.9.</p>
<a class="changelog-reference headerlink reference internal" href="#change-f238b48f610767a520453ae382fb1992">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.4-32"><span class="target" id="change-9708a66fcf11605de634853699c1df71"><strong>[postgresql] [bug]</strong> </span><p>Fixed regression caused by release 0.8.5 / 0.9.3’s compatibility
enhancements where index reflection on PostgreSQL versions specific
to only the 8.1, 8.2 series again
broke, surrounding the ever problematic int2vector type.  While
int2vector supports array operations as of 8.1, apparently it only
supports CAST to a varchar as of 8.3.</p>
<a class="changelog-reference headerlink reference internal" href="#change-9708a66fcf11605de634853699c1df71">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3000">#3000</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.4-mysql">
<h3>mysql<a class="headerlink" href="#change-0.9.4-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.4-33"><span class="target" id="change-8fd1f3c05b103698df571c4d15925738"><strong>[mysql] [bug]</strong> </span><p>Tweaked the settings for mysql-connector-python; in Py2K, the
“supports unicode statements” flag is now False, so that SQLAlchemy
will encode the <em>SQL string</em> (note: <em>not</em> the parameters)
to bytes before sending to the database.  This seems to allow
all unicode-related tests to pass for mysql-connector, including those
that use non-ascii table/column names, as well as some tests for the
TEXT type using unicode under cursor.executemany().</p>
<a class="changelog-reference headerlink reference internal" href="#change-8fd1f3c05b103698df571c4d15925738">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.4-oracle">
<h3>oracle<a class="headerlink" href="#change-0.9.4-oracle" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.4-34"><span class="target" id="change-3a96f2348877f517e9c2f5950d4c1d1b"><strong>[oracle] [feature]</strong> </span><p>Added a new engine option <code class="docutils literal notranslate"><span class="pre">coerce_to_unicode=True</span></code> to the
cx_Oracle dialect, which restores the cx_Oracle outputtypehandler
approach to Python unicode conversion under Python 2, which was
removed in 0.9.2 as a result of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2911">#2911</a>.  Some use cases would
prefer that unicode coercion is unconditional for all string values,
despite performance concerns.  Pull request courtesy
Christoph Zwerschke.</p>
<a class="changelog-reference headerlink reference internal" href="#change-3a96f2348877f517e9c2f5950d4c1d1b">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2911">#2911</a></p>
</p>
</li>
<li><p id="change-0.9.4-35"><span class="target" id="change-5861886a0faf27d02c29bdac44e39a74"><strong>[oracle] [bug]</strong> </span><p>Added new datatype <a class="reference internal" href="../dialects/oracle.html#sqlalchemy.dialects.oracle.DATE" title="sqlalchemy.dialects.oracle.DATE"><code class="xref py py-class docutils literal notranslate"><span class="pre">DATE</span></code></a>, which is a subclass of
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.DateTime" title="sqlalchemy.types.DateTime"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTime</span></code></a>.  As Oracle has no “datetime” type per se,
it instead has only <code class="docutils literal notranslate"><span class="pre">DATE</span></code>, it is appropriate here that the
<code class="docutils literal notranslate"><span class="pre">DATE</span></code> type as present in the Oracle dialect be an instance of
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.DateTime" title="sqlalchemy.types.DateTime"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTime</span></code></a>.  This issue doesn’t change anything as far as
the behavior of the type, as data conversion is handled by the
DBAPI in any case, however the improved subclass layout will help
the use cases of inspecting types for cross-database compatibility.
Also removed uppercase <code class="docutils literal notranslate"><span class="pre">DATETIME</span></code> from the Oracle dialect as this
type isn’t functional in that context.</p>
<a class="changelog-reference headerlink reference internal" href="#change-5861886a0faf27d02c29bdac44e39a74">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2987">#2987</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.4-misc">
<h3>misc<a class="headerlink" href="#change-0.9.4-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.4-36"><span class="target" id="change-7ed27baa911abecf8c4b54665d466e1c"><strong>[bug] [ext]</strong> </span><p>Fixed bug in mutable extension as well as
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.attributes.flag_modified" title="sqlalchemy.orm.attributes.flag_modified"><code class="xref py py-func docutils literal notranslate"><span class="pre">flag_modified()</span></code></a> where the change event would not be
propagated if the attribute had been reassigned to itself.</p>
<a class="changelog-reference headerlink reference internal" href="#change-7ed27baa911abecf8c4b54665d466e1c">¶</a><p>This change is also <strong>backported</strong> to: 0.8.6</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2997">#2997</a></p>
</p>
</li>
<li><p id="change-0.9.4-37"><span class="target" id="change-50822a3d39ca486f3c066ca9821edd45"><strong>[bug] [automap] [ext]</strong> </span><p>Added support to automap for the case where a relationship should
not be created between two classes that are in a joined inheritance
relationship, for those foreign keys that link the subclass back to
the superclass.</p>
<a class="changelog-reference headerlink reference internal" href="#change-50822a3d39ca486f3c066ca9821edd45">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/3004">#3004</a></p>
</p>
</li>
<li><p id="change-0.9.4-38"><span class="target" id="change-65600f5e6f7388343eecd3b62edfa06e"><strong>[bug] [tests]</strong> </span><p>Fixed a few errant <code class="docutils literal notranslate"><span class="pre">u''</span></code> strings that would prevent tests from passing
in Py3.2.  Patch courtesy Arfrever Frehtes Taifersar Arahesis.</p>
<a class="changelog-reference headerlink reference internal" href="#change-65600f5e6f7388343eecd3b62edfa06e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2980">#2980</a></p>
</p>
</li>
<li><p id="change-0.9.4-39"><span class="target" id="change-fe5f6bf9974e7d6f327cb0f51b761366"><strong>[bug] [pool]</strong> </span><p>Fixed small issue in <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.SingletonThreadPool" title="sqlalchemy.pool.SingletonThreadPool"><code class="xref py py-class docutils literal notranslate"><span class="pre">SingletonThreadPool</span></code></a> where the current
connection to be returned might get inadvertently cleaned out during
the “cleanup” process.  Patch courtesy jd23.</p>
<a class="changelog-reference headerlink reference internal" href="#change-fe5f6bf9974e7d6f327cb0f51b761366">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-40"><span class="target" id="change-f9cf9cd56b1944b6005a3a0016319f7f"><strong>[bug] [ext] [py3k]</strong> </span><p>Fixed bug in association proxy where assigning an empty slice
(e.g. <code class="docutils literal notranslate"><span class="pre">x[:]</span> <span class="pre">=</span> <span class="pre">[...]</span></code>) would fail on Py3k.</p>
<a class="changelog-reference headerlink reference internal" href="#change-f9cf9cd56b1944b6005a3a0016319f7f">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.4-41"><span class="target" id="change-30555d2dbceb91ce584663b6726101d0"><strong>[bug] [ext]</strong> </span><p>Fixed a regression in association proxy caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2810">#2810</a> which
caused a user-provided “getter” to no longer receive values of <code class="docutils literal notranslate"><span class="pre">None</span></code>
when fetching scalar values from a target that is non-present.  The
check for None introduced by this change is now moved into the default
getter, so a user-provided getter will also again receive values of
None.</p>
<a class="changelog-reference headerlink reference internal" href="#change-30555d2dbceb91ce584663b6726101d0">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2810">#2810</a></p>
</p>
</li>
<li><p id="change-0.9.4-42"><span class="target" id="change-e0ab0a5338c4fe508e1a11411752a73c"><strong>[bug] [examples]</strong> </span><p>Fixed bug in the versioned_history example where column-level INSERT
defaults would prevent history values of NULL from being written.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e0ab0a5338c4fe508e1a11411752a73c">¶</a><p></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.3">
<h2 class="release-version">0.9.3<a class="headerlink" href="#change-0.9.3" title="Permalink to this headline">¶</a></h2>
Released: February 19, 2014<div class="section" id="change-0.9.3-orm">
<h3>orm<a class="headerlink" href="#change-0.9.3-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.3-0"><span class="target" id="change-eb786e8c736c09ac5a33083ba8a84ffd"><strong>[orm] [feature]</strong> </span><p>Added new <a class="reference internal" href="../orm/events.html#sqlalchemy.orm.events.MapperEvents.before_configured" title="sqlalchemy.orm.events.MapperEvents.before_configured"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MapperEvents.before_configured()</span></code></a> event which allows
an event at the start of <a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.configure_mappers" title="sqlalchemy.orm.configure_mappers"><code class="xref py py-func docutils literal notranslate"><span class="pre">configure_mappers()</span></code></a>, as well
as <code class="docutils literal notranslate"><span class="pre">__declare_first__()</span></code> hook within declarative to complement
<code class="docutils literal notranslate"><span class="pre">__declare_last__()</span></code>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-eb786e8c736c09ac5a33083ba8a84ffd">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.3-1"><span class="target" id="change-96a72422aa09306aa423720d8a97b57c"><strong>[orm] [bug]</strong> </span><p>Fixed bug where <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.get" title="sqlalchemy.orm.query.Query.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.get()</span></code></a> would fail to consistently
raise the <a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a> that invokes when called
on a query with existing criterion, when the given identity is
already present in the identity map.</p>
<a class="changelog-reference headerlink reference internal" href="#change-96a72422aa09306aa423720d8a97b57c">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2951">#2951</a></p>
</p>
</li>
<li><p id="change-0.9.3-2"><span class="target" id="change-bcd89a790df27cfdcae2a8109b61d16e"><strong>[orm] [bug] [sqlite]</strong> </span><p>Fixed bug in SQLite “join rewriting” where usage of an exists() construct
would fail to be rewritten properly, such as when the exists is
mapped to a column_property in an intricate nested-join scenario.
Also fixed a somewhat related issue where join rewriting would fail
on the columns clause of the SELECT statement if the targets were
aliased tables, as opposed to individual aliased columns.</p>
<a class="changelog-reference headerlink reference internal" href="#change-bcd89a790df27cfdcae2a8109b61d16e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2967">#2967</a></p>
</p>
</li>
<li><p id="change-0.9.3-3"><span class="target" id="change-5d64e437351667e0682df36dc7a55ebb"><strong>[orm] [bug]</strong> </span><p>Fixed an 0.9 regression where ORM instance or mapper events applied
to a base class such as a declarative base with the propagate=True
flag would fail to apply to existing mapped classes which also
used inheritance due to an assertion.  Additionally, repaired an
attribute error which could occur during removal of such an event,
depending on how it was first assigned.</p>
<a class="changelog-reference headerlink reference internal" href="#change-5d64e437351667e0682df36dc7a55ebb">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2949">#2949</a></p>
</p>
</li>
<li><p id="change-0.9.3-4"><span class="target" id="change-af92c4a9aa53d0e18016cc10a0c419db"><strong>[orm] [bug]</strong> </span><p>Improved the initialization logic of composite attributes such that
calling <code class="docutils literal notranslate"><span class="pre">MyClass.attribute</span></code> will not require that the configure
mappers step has occurred, e.g. it will just work without throwing
any error.</p>
<a class="changelog-reference headerlink reference internal" href="#change-af92c4a9aa53d0e18016cc10a0c419db">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2935">#2935</a></p>
</p>
</li>
<li><p id="change-0.9.3-5"><span class="target" id="change-f823d5ff3da539a90fc0cf3f7dac97c5"><strong>[orm] [bug]</strong> </span><p>More issues with [ticket:2932] first resolved in 0.9.2 where
using a column key of the form <code class="docutils literal notranslate"><span class="pre">&lt;tablename&gt;_&lt;columnname&gt;</span></code>
matching that of an aliased column in the text would still not
match at the ORM level, which is ultimately due to a core
column-matching issue.  Additional rules have been added so that the
column <code class="docutils literal notranslate"><span class="pre">_label</span></code> is taken into account when working with a
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.TextAsFrom" title="sqlalchemy.sql.expression.TextAsFrom"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextAsFrom</span></code></a> construct or with literal columns.</p>
<a class="changelog-reference headerlink reference internal" href="#change-f823d5ff3da539a90fc0cf3f7dac97c5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2932">#2932</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.3-orm-declarative">
<h3>orm declarative<a class="headerlink" href="#change-0.9.3-orm-declarative" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.3-6"><span class="target" id="change-fdcf86f8dfe04be777c674c066723232"><strong>[bug] [declarative] [orm]</strong> </span><p>Fixed bug where <a class="reference internal" href="../orm/extensions/declarative/api.html#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractConcreteBase</span></code></a> would fail to be
fully usable within declarative relationship configuration, as its
string classname would not be available in the registry of classnames
at mapper configuration time.   The class now explicitly adds itself
to the class registry, and additionally both <a class="reference internal" href="../orm/extensions/declarative/api.html#sqlalchemy.ext.declarative.AbstractConcreteBase" title="sqlalchemy.ext.declarative.AbstractConcreteBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractConcreteBase</span></code></a>
as well as <a class="reference internal" href="../orm/extensions/declarative/api.html#sqlalchemy.ext.declarative.ConcreteBase" title="sqlalchemy.ext.declarative.ConcreteBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConcreteBase</span></code></a> set themselves up <em>before</em> mappers
are configured within the <a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.configure_mappers" title="sqlalchemy.orm.configure_mappers"><code class="xref py py-func docutils literal notranslate"><span class="pre">configure_mappers()</span></code></a> setup, using
the new <a class="reference internal" href="../orm/events.html#sqlalchemy.orm.events.MapperEvents.before_configured" title="sqlalchemy.orm.events.MapperEvents.before_configured"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MapperEvents.before_configured()</span></code></a> event.</p>
<a class="changelog-reference headerlink reference internal" href="#change-fdcf86f8dfe04be777c674c066723232">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2950">#2950</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.3-engine">
<h3>engine<a class="headerlink" href="#change-0.9.3-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.3-7"><span class="target" id="change-a5e88f49d79f6b2a868c6f66b3be7d98"><strong>[engine] [bug] [pool]</strong> </span><p>Fixed a critical regression caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2880">#2880</a> where the newly
concurrent ability to return connections from the pool means that the
“first_connect” event is now no longer synchronized either, thus leading
to dialect mis-configurations under even minimal concurrency situations.</p>
<a class="changelog-reference headerlink reference internal" href="#change-a5e88f49d79f6b2a868c6f66b3be7d98">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2880">#2880</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2964">#2964</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.3-sql">
<h3>sql<a class="headerlink" href="#change-0.9.3-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.3-8"><span class="target" id="change-4bcdb46ed066a2c9b8490bf78da16720"><strong>[sql] [bug]</strong> </span><p>Fixed bug where calling <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert.values" title="sqlalchemy.sql.expression.Insert.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Insert.values()</span></code></a> with an empty list
or tuple would raise an IndexError.   It now produces an empty
insert construct as would be the case with an empty dictionary.</p>
<a class="changelog-reference headerlink reference internal" href="#change-4bcdb46ed066a2c9b8490bf78da16720">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2944">#2944</a></p>
</p>
</li>
<li><p id="change-0.9.3-9"><span class="target" id="change-b03ef23895b865be666662872d5a34b1"><strong>[sql] [bug]</strong> </span><p>Fixed bug where <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.in_" title="sqlalchemy.sql.operators.ColumnOperators.in_"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnOperators.in_()</span></code></a> would go into an endless
loop if erroneously passed a column expression whose comparator
included the <code class="docutils literal notranslate"><span class="pre">__getitem__()</span></code> method, such as a column that uses the
<a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal notranslate"><span class="pre">ARRAY</span></code></a> type.</p>
<a class="changelog-reference headerlink reference internal" href="#change-b03ef23895b865be666662872d5a34b1">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2957">#2957</a></p>
</p>
</li>
<li><p id="change-0.9.3-10"><span class="target" id="change-32e5f45f2c9cbe4cd6ccc0326087b300"><strong>[sql] [bug]</strong> </span><p>Fixed regression in new “naming convention” feature where conventions
would fail if the referred table in a foreign key contained a schema
name.  Pull request courtesy Thomas Farvour.</p>
<a class="changelog-reference headerlink reference internal" href="#change-32e5f45f2c9cbe4cd6ccc0326087b300">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.3-11"><span class="target" id="change-e2e7387ca4e9c810c4f780765399985c"><strong>[sql] [bug]</strong> </span><p>Fixed bug where so-called “literal render” of <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.bindparam" title="sqlalchemy.sql.expression.bindparam"><code class="xref py py-func docutils literal notranslate"><span class="pre">bindparam()</span></code></a>
constructs would fail if the bind were constructed with a callable,
rather than a direct value.  This prevented ORM expressions
from being rendered with the “literal_binds” compiler flag.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e2e7387ca4e9c810c4f780765399985c">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.3-postgresql">
<h3>postgresql<a class="headerlink" href="#change-0.9.3-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.3-12"><span class="target" id="change-2887ae0aba411e9eb86f31766ab46817"><strong>[postgresql] [feature]</strong> </span><p>Added the <a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine.python_type" title="sqlalchemy.types.TypeEngine.python_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">TypeEngine.python_type</span></code></a> convenience accessor onto the
<a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.ARRAY" title="sqlalchemy.dialects.postgresql.ARRAY"><code class="xref py py-class docutils literal notranslate"><span class="pre">ARRAY</span></code></a> type.  Pull request courtesy Alexey Terentev.</p>
<a class="changelog-reference headerlink reference internal" href="#change-2887ae0aba411e9eb86f31766ab46817">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.3-13"><span class="target" id="change-6799209a311c3dc94eac58c106af18da"><strong>[postgresql] [bug]</strong> </span><p>Added an additional message to psycopg2 disconnect detection,
“could not send data to server”, which complements the existing
“could not receive data from server” and has been observed by users.</p>
<a class="changelog-reference headerlink reference internal" href="#change-6799209a311c3dc94eac58c106af18da">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2936">#2936</a></p>
</p>
</li>
<li><p id="change-0.9.3-14"><span class="target" id="change-f6ba599124e791ca21fe821f6fd01d45"><strong>[postgresql] [bug]</strong> </span><blockquote>
<div><p>Support has been improved for PostgreSQL reflection behavior on very old
(pre 8.1) versions of PostgreSQL, and potentially other PG engines
such as Redshift (assuming Redshift reports the version as &lt; 8.1).
The query for “indexes” as well as “primary keys” relies upon inspecting
a so-called “int2vector” datatype, which refuses to coerce to an array
prior to 8.1 causing failures regarding the “ANY()” operator used
in the query.  Extensive googling has located the very hacky, but
recommended-by-PG-core-developer query to use when PG version &lt; 8.1
is in use, so index and primary key constraint reflection now work
on these versions.</p>
</div></blockquote>
<a class="changelog-reference headerlink reference internal" href="#change-f6ba599124e791ca21fe821f6fd01d45">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.3-15"><span class="target" id="change-353eed39676bf15ea351cfff6de23bca"><strong>[postgresql] [bug]</strong> </span><p>Revised this very old issue where the PostgreSQL “get primary key”
reflection query were updated to take into account primary key constraints
that were renamed; the newer query fails on very old versions of
PostgreSQL such as version 7, so the old query is restored in those cases
when server_version_info &lt; (8, 0) is detected.</p>
<a class="changelog-reference headerlink reference internal" href="#change-353eed39676bf15ea351cfff6de23bca">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2291">#2291</a></p>
</p>
</li>
<li><p id="change-0.9.3-16"><span class="target" id="change-4f3cfb3c174030c18a138b13afe7a215"><strong>[postgresql] [bug]</strong> </span><p>Added server version detection to the newly added dialect startup
query for  “show standard_conforming_strings”; as this variable was
added as of PG 8.2, we skip the query for PG versions who report a
version string earlier than that.</p>
<a class="changelog-reference headerlink reference internal" href="#change-4f3cfb3c174030c18a138b13afe7a215">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2946">#2946</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.3-mysql">
<h3>mysql<a class="headerlink" href="#change-0.9.3-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.3-17"><span class="target" id="change-ab9ba4668cce1a333145dd002a487a27"><strong>[mysql] [feature]</strong> </span><p>Added new MySQL-specific <a class="reference internal" href="../dialects/mysql.html#sqlalchemy.dialects.mysql.DATETIME" title="sqlalchemy.dialects.mysql.DATETIME"><code class="xref py py-class docutils literal notranslate"><span class="pre">DATETIME</span></code></a> which includes
fractional seconds support; also added fractional seconds support
to <a class="reference internal" href="../dialects/mysql.html#sqlalchemy.dialects.mysql.TIMESTAMP" title="sqlalchemy.dialects.mysql.TIMESTAMP"><code class="xref py py-class docutils literal notranslate"><span class="pre">TIMESTAMP</span></code></a>.  DBAPI support is limited, though
fractional seconds are known to be supported by MySQL Connector/Python.
Patch courtesy Geert JM Vanderkelen.</p>
<a class="changelog-reference headerlink reference internal" href="#change-ab9ba4668cce1a333145dd002a487a27">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2941">#2941</a></p>
</p>
</li>
<li><p id="change-0.9.3-18"><span class="target" id="change-985ed90f90095c4b537ea36d3c1ac546"><strong>[mysql] [bug]</strong> </span><p>Added support for the <code class="docutils literal notranslate"><span class="pre">PARTITION</span> <span class="pre">BY</span></code> and <code class="docutils literal notranslate"><span class="pre">PARTITIONS</span></code>
MySQL table keywords, specified as <code class="docutils literal notranslate"><span class="pre">mysql_partition_by='value'</span></code> and
<code class="docutils literal notranslate"><span class="pre">mysql_partitions='value'</span></code> to <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.  Pull request
courtesy Marcus McCurdy.</p>
<a class="changelog-reference headerlink reference internal" href="#change-985ed90f90095c4b537ea36d3c1ac546">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2966">#2966</a></p>
</p>
</li>
<li><p id="change-0.9.3-19"><span class="target" id="change-73d5f7e864d7ffd3bf7060a3a52e6d34"><strong>[mysql] [bug]</strong> </span><p>Fixed bug which prevented MySQLdb-based dialects (e.g.
pymysql) from working in Py3K, where a check for “connection
charset” would fail due to Py3K’s more strict value comparison
rules.  The call in question  wasn’t taking the database
version into account in any case as the server version was
still None at that point, so the method overall has been
simplified to rely upon connection.character_set_name().</p>
<a class="changelog-reference headerlink reference internal" href="#change-73d5f7e864d7ffd3bf7060a3a52e6d34">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2933">#2933</a></p>
</p>
</li>
<li><p id="change-0.9.3-20"><span class="target" id="change-cec15bf8dc76d9d68418cad966e2a9f1"><strong>[mysql] [bug] [cymysql]</strong> </span><p>Fixed bug in cymysql dialect where a version string such as
<code class="docutils literal notranslate"><span class="pre">'33a-MariaDB'</span></code> would fail to parse properly.  Pull request
courtesy Matt Schmidt.</p>
<a class="changelog-reference headerlink reference internal" href="#change-cec15bf8dc76d9d68418cad966e2a9f1">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2934">#2934</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.3-sqlite">
<h3>sqlite<a class="headerlink" href="#change-0.9.3-sqlite" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.3-21"><span class="target" id="change-daa887aa6b3dccbb6a979e6d7ecfd2cb"><strong>[sqlite] [bug]</strong> </span><p>The SQLite dialect will now skip unsupported arguments when reflecting
types; such as if it encounters a string like <code class="docutils literal notranslate"><span class="pre">INTEGER(5)</span></code>, the
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.INTEGER" title="sqlalchemy.types.INTEGER"><code class="xref py py-class docutils literal notranslate"><span class="pre">INTEGER</span></code></a> type will be instantiated without the “5” being included,
based on detecting a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> on the first attempt.</p>
<a class="changelog-reference headerlink reference internal" href="#change-daa887aa6b3dccbb6a979e6d7ecfd2cb">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.3-22"><span class="target" id="change-c8dda32a20ab1a2a6020cd0b56a025cf"><strong>[sqlite] [bug]</strong> </span><p>Support has been added to SQLite type reflection to fully support
the “type affinity” contract specified at <a class="reference external" href="http://www.sqlite.org/datatype3.html">http://www.sqlite.org/datatype3.html</a>.
In this scheme, keywords like <code class="docutils literal notranslate"><span class="pre">INT</span></code>, <code class="docutils literal notranslate"><span class="pre">CHAR</span></code>, <code class="docutils literal notranslate"><span class="pre">BLOB</span></code> or
<code class="docutils literal notranslate"><span class="pre">REAL</span></code> located in the type name generically associate the type with
one of five affinities.  Pull request courtesy Erich Blume.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../dialects/sqlite.html#sqlite-type-reflection"><span class="std std-ref">Type Reflection</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-c8dda32a20ab1a2a6020cd0b56a025cf">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.3-misc">
<h3>misc<a class="headerlink" href="#change-0.9.3-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.3-23"><span class="target" id="change-6e2fa11bc1b490afa61009b74983d414"><strong>[feature] [examples]</strong> </span><p>Added optional “changed” column to the versioned rows example, as well
as support for when the versioned <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> has an explicit
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.params.schema" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.schema</span></code></a> argument.   Pull request
courtesy jplaverdure.</p>
<a class="changelog-reference headerlink reference internal" href="#change-6e2fa11bc1b490afa61009b74983d414">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.3-24"><span class="target" id="change-30674584c851329f071d2f6c65eb6630"><strong>[bug] [ext]</strong> </span><p>Fixed bug where the <a class="reference internal" href="../orm/extensions/automap.html#sqlalchemy.ext.automap.AutomapBase" title="sqlalchemy.ext.automap.AutomapBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutomapBase</span></code></a> class of the
new automap extension would fail if classes
were pre-arranged in single or potentially joined inheritance patterns.
The repaired joined inheritance issue could also potentially apply when
using <a class="reference internal" href="../orm/extensions/declarative/api.html#sqlalchemy.ext.declarative.DeferredReflection" title="sqlalchemy.ext.declarative.DeferredReflection"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeferredReflection</span></code></a> as well.</p>
<a class="changelog-reference headerlink reference internal" href="#change-30674584c851329f071d2f6c65eb6630">¶</a><p></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.2">
<h2 class="release-version">0.9.2<a class="headerlink" href="#change-0.9.2" title="Permalink to this headline">¶</a></h2>
Released: February 2, 2014<div class="section" id="change-0.9.2-orm">
<h3>orm<a class="headerlink" href="#change-0.9.2-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-0"><span class="target" id="change-2dc2e780e8373cbbb7b3d14048f7f7dd"><strong>[orm] [feature]</strong> </span><p>Added a new parameter <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.Operators.op.params.is_comparison" title="sqlalchemy.sql.operators.Operators.op"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Operators.op.is_comparison</span></code></a>.  This
flag allows a custom op from <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.Operators.op" title="sqlalchemy.sql.operators.Operators.op"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operators.op()</span></code></a> to be considered
as a “comparison” operator, thus usable for custom
<a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.relationship.params.primaryjoin" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.primaryjoin</span></code></a> conditions.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/join_conditions.html#relationship-custom-operator"><span class="std std-ref">Using custom operators in join conditions</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-2dc2e780e8373cbbb7b3d14048f7f7dd">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.2-1"><span class="target" id="change-a8b3a5b9943f34a153c535d66ec180f9"><strong>[orm] [feature]</strong> </span><p>Support is improved for supplying a <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.join" title="sqlalchemy.sql.expression.join"><code class="xref py py-func docutils literal notranslate"><span class="pre">join()</span></code></a> construct as the
target of <a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.relationship.params.secondary" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.secondary</span></code></a> for the purposes
of creating very complex <a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> join conditions.
The change includes adjustments to query joining, joined eager loading
to not render a SELECT subquery, changes to lazy loading such that
the “secondary” target is properly included in the SELECT, and
changes to declarative to better support specification of a
join() object with classes as targets.</p>
<p>The new use case is somewhat experimental, but a new documentation section
has been added.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../orm/join_conditions.html#composite-secondary-join"><span class="std std-ref">Composite “Secondary” Joins</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-a8b3a5b9943f34a153c535d66ec180f9">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.2-2"><span class="target" id="change-1c3f8f5feedf0bfccec2acf81dc4d612"><strong>[orm] [bug]</strong> </span><p>Fixed error message when an iterator object is passed to
<a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.class_mapper" title="sqlalchemy.orm.class_mapper"><code class="xref py py-func docutils literal notranslate"><span class="pre">class_mapper()</span></code></a> or similar, where the error would fail to
render on string formatting.  Pullreq courtesy Kyle Stark.</p>
<a class="changelog-reference headerlink reference internal" href="#change-1c3f8f5feedf0bfccec2acf81dc4d612">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.2-3"><span class="target" id="change-87563ee95139d715f8d0326c80758a47"><strong>[orm] [bug]</strong> </span><p>Fixed bug in new <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.TextAsFrom" title="sqlalchemy.sql.expression.TextAsFrom"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextAsFrom</span></code></a> construct where <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>-
oriented row lookups were not matching up to the ad-hoc <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.ColumnClause" title="sqlalchemy.sql.expression.ColumnClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnClause</span></code></a>
objects that <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.TextAsFrom" title="sqlalchemy.sql.expression.TextAsFrom"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextAsFrom</span></code></a> generates, thereby making it not
usable as a target in <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.from_statement" title="sqlalchemy.orm.query.Query.from_statement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.from_statement()</span></code></a>.  Also fixed
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.from_statement" title="sqlalchemy.orm.query.Query.from_statement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.from_statement()</span></code></a> mechanics to not mistake a <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.TextAsFrom" title="sqlalchemy.sql.expression.TextAsFrom"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextAsFrom</span></code></a>
for a <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a> construct.  This bug is also an 0.9 regression
as the <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.TextClause.columns" title="sqlalchemy.sql.expression.TextClause.columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextClause.columns()</span></code></a> method is called to accommodate the
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.text.params.typemap" title="sqlalchemy.sql.expression.text"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">text.typemap</span></code></a> argument.</p>
<a class="changelog-reference headerlink reference internal" href="#change-87563ee95139d715f8d0326c80758a47">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2932">#2932</a></p>
</p>
</li>
<li><p id="change-0.9.2-4"><span class="target" id="change-6dde90e6801f9bdf0bec0d5ba49cd086"><strong>[orm] [bug]</strong> </span><p>Added a new directive used within the scope of an attribute “set” operation
to disable autoflush, in the case that the attribute needs to lazy-load
the “old” value, as in when replacing one-to-one values or some
kinds of many-to-one.  A flush at this point otherwise occurs
at the point that the attribute is None and can cause NULL violations.</p>
<a class="changelog-reference headerlink reference internal" href="#change-6dde90e6801f9bdf0bec0d5ba49cd086">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2921">#2921</a></p>
</p>
</li>
<li><p id="change-0.9.2-5"><span class="target" id="change-03749d6f654c1889673b5e0c12e79baf"><strong>[orm] [bug]</strong> </span><p>Fixed an 0.9 regression where the automatic aliasing applied by
<a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> and in other situations where selects or joins
were aliased (such as joined table inheritance) could fail if a
user-defined <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> subclass were used in the expression.
In this case, the subclass would fail to propagate ORM-specific
“annotations” along needed by the adaptation.  The “expression
annotations” system has been corrected to account for this case.</p>
<a class="changelog-reference headerlink reference internal" href="#change-03749d6f654c1889673b5e0c12e79baf">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2918">#2918</a></p>
</p>
</li>
<li><p id="change-0.9.2-6"><span class="target" id="change-c0f8554831a29dce282bda7f4a1fced7"><strong>[orm] [bug]</strong> </span><p>Fixed a bug involving the new flattened JOIN structures which
are used with <a class="reference internal" href="../orm/loading_relationships.html#sqlalchemy.orm.joinedload" title="sqlalchemy.orm.joinedload"><code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code></a> (thereby causing a regression
in joined eager loading) as well as <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.aliased" title="sqlalchemy.orm.aliased"><code class="xref py py-func docutils literal notranslate"><span class="pre">aliased()</span></code></a>
in conjunction with the <code class="docutils literal notranslate"><span class="pre">flat=True</span></code> flag and joined-table inheritance;
basically multiple joins across a “parent JOIN sub” entity using different
paths to get to a target class wouldn’t form the correct ON conditions.
An adjustment / simplification made in the mechanics of figuring
out the “left side” of the join in the case of an aliased, joined-inh
class repairs the issue.</p>
<a class="changelog-reference headerlink reference internal" href="#change-c0f8554831a29dce282bda7f4a1fced7">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2908">#2908</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-engine">
<h3>engine<a class="headerlink" href="#change-0.9.2-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-7"><span class="target" id="change-602b868a47f77c42aafc3a93243a4f38"><strong>[engine] [feature] [pool]</strong> </span><p>Added a new pool event <a class="reference internal" href="../core/events.html#sqlalchemy.events.PoolEvents.invalidate" title="sqlalchemy.events.PoolEvents.invalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PoolEvents.invalidate()</span></code></a>.  Called when
a DBAPI connection is to be marked as “invalidated” and discarded
from the pool.</p>
<a class="changelog-reference headerlink reference internal" href="#change-602b868a47f77c42aafc3a93243a4f38">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-sql">
<h3>sql<a class="headerlink" href="#change-0.9.2-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-8"><span class="target" id="change-4f8918d438f70e33f0202a0ebf9ab58b"><strong>[sql] [feature]</strong> </span><p>Added <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.reflect.params.**dialect_kwargs" title="sqlalchemy.schema.MetaData.reflect"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.reflect.**dialect_kwargs</span></code></a>
to support dialect-level reflection options for all <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
objects reflected.</p>
<a class="changelog-reference headerlink reference internal" href="#change-4f8918d438f70e33f0202a0ebf9ab58b">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.2-9"><span class="target" id="change-7a930bef6cc4cbf8fd14845482204265"><strong>[sql] [feature]</strong> </span><p>Added a new feature which allows automated naming conventions to be
applied to <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Constraint" title="sqlalchemy.schema.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a> and <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> objects.  Based
on a recipe in the wiki, the new feature uses schema-events to set up
names as various schema objects are associated with each other.  The
events then expose a configuration system through a new argument
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.params.naming_convention" title="sqlalchemy.schema.MetaData"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">MetaData.naming_convention</span></code></a>.  This system allows production
of both simple and custom naming schemes for constraints and indexes
on a per-<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> basis.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../core/constraints.html#constraint-naming-conventions"><span class="std std-ref">Configuring Constraint Naming Conventions</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-7a930bef6cc4cbf8fd14845482204265">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2923">#2923</a></p>
</p>
</li>
<li><p id="change-0.9.2-10"><span class="target" id="change-87912ddc5217c8d309bca24da22147bb"><strong>[sql] [feature]</strong> </span><p>Options can now be specified on a <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a> object
independently of the specification of columns in the table with
the <code class="docutils literal notranslate"><span class="pre">primary_key=True</span></code> flag; use a <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a>
object with no columns in it to achieve this result.</p>
<p>Previously, an explicit <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a> would have the
effect of those columns marked as <code class="docutils literal notranslate"><span class="pre">primary_key=True</span></code> being ignored;
since this is no longer the case, the <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a>
will now assert that either one style or the other is used to specify
the columns, or if both are present, that the column lists match
exactly.  If an inconsistent set of columns in the
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a>
and within the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> marked as <code class="docutils literal notranslate"><span class="pre">primary_key=True</span></code> are
present, a warning is emitted, and the list of columns is taken
only from the <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a> alone as was the case
in previous releases.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-87912ddc5217c8d309bca24da22147bb">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2910">#2910</a></p>
</p>
</li>
<li><p id="change-0.9.2-11"><span class="target" id="change-2df4f7fe29c0f5aa2f957f4a89b0d74d"><strong>[sql] [feature]</strong> </span><p>The system by which schema constructs and certain SQL constructs
accept dialect-specific keyword arguments has been enhanced.  This
system includes commonly the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> and <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> constructs,
which accept a wide variety of dialect-specific arguments such as
<code class="docutils literal notranslate"><span class="pre">mysql_engine</span></code> and <code class="docutils literal notranslate"><span class="pre">postgresql_where</span></code>, as well as the constructs
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a>, <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a>,
<a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a>, <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> and <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Delete" title="sqlalchemy.sql.expression.Delete"><code class="xref py py-class docutils literal notranslate"><span class="pre">Delete</span></code></a>, and also
newly added kwarg capability to <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>
and <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>.  The change is that participating dialects
can now specify acceptable argument lists for these constructs, allowing
an argument error to be raised if an invalid keyword is specified for
a particular dialect.  If the dialect portion of the keyword is unrecognized,
a warning is emitted only; while the system will actually make use
of setuptools entrypoints in order to locate non-local dialects,
the use case where certain dialect-specific arguments are used
in an environment where that third-party dialect is uninstalled remains
supported.  Dialects also have to explicitly opt-in to this system,
so that external dialects which aren’t making use of this system
will remain unaffected.</p>
<a class="changelog-reference headerlink reference internal" href="#change-2df4f7fe29c0f5aa2f957f4a89b0d74d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2866">#2866</a></p>
</p>
</li>
<li><p id="change-0.9.2-12"><span class="target" id="change-d4cf4109c92f5c593c0eb29a55e23b2f"><strong>[sql] [bug]</strong> </span><p>The behavior of <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.tometadata" title="sqlalchemy.schema.Table.tometadata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.tometadata()</span></code></a> has been adjusted such that
the schema target of a <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> will not be changed unless
that schema matches that of the parent table.  That is, if
a table “schema_a.user” has a foreign key to “schema_b.order.id”,
the “schema_b” target will be maintained whether or not the
“schema” argument is passed to <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.tometadata" title="sqlalchemy.schema.Table.tometadata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.tometadata()</span></code></a>.  However
if a table “schema_a.user” refers to “schema_a.order.id”, the presence
of “schema_a” will be updated on both the parent and referred tables.
This is a behavioral change hence isn’t likely to be backported to
0.8; it is assumed that the previous behavior is pretty buggy
however and that it’s unlikely anyone was relying upon it.</p>
<p>Additionally, a new parameter has been added
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.tometadata.params.referred_schema_fn" title="sqlalchemy.schema.Table.tometadata"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.tometadata.referred_schema_fn</span></code></a>.  This refers to a
callable function which will be used to determine the new referred
schema for any <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> encountered in the
tometadata operation.  This callable can be used to revert to the
previous behavior or to customize how referred schemas are treated
on a per-constraint basis.</p>
<a class="changelog-reference headerlink reference internal" href="#change-d4cf4109c92f5c593c0eb29a55e23b2f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2913">#2913</a></p>
</p>
</li>
<li><p id="change-0.9.2-13"><span class="target" id="change-a2d477b9294340f7ec81a1b359bee6cc"><strong>[sql] [bug]</strong> </span><p>Fixed bug whereby binary type would fail in some cases
if used with a “test” dialect, such as a DefaultDialect or other
dialect with no DBAPI.</p>
<a class="changelog-reference headerlink reference internal" href="#change-a2d477b9294340f7ec81a1b359bee6cc">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.2-14"><span class="target" id="change-f7ed7a7bdd579cfb59afaf713ec2da5c"><strong>[sql] [bug] [py3k]</strong> </span><p>Fixed bug where “literal binds” wouldn’t work with a bound parameter
that’s a binary type.  A similar, but different, issue is fixed
in 0.8.</p>
<a class="changelog-reference headerlink reference internal" href="#change-f7ed7a7bdd579cfb59afaf713ec2da5c">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.2-15"><span class="target" id="change-182243baf075d92a029213dbd8041026"><strong>[sql] [bug]</strong> </span><p>Fixed regression whereby the “annotation” system used by the ORM was leaking
into the names used by standard functions in <a class="reference internal" href="../core/functions.html#module-sqlalchemy.sql.functions" title="sqlalchemy.sql.functions"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlalchemy.sql.functions</span></code></a>,
such as <code class="docutils literal notranslate"><span class="pre">func.coalesce()</span></code> and <code class="docutils literal notranslate"><span class="pre">func.max()</span></code>.  Using these functions
in ORM attributes and thus producing annotated versions of them could
corrupt the actual function name rendered in the SQL.</p>
<a class="changelog-reference headerlink reference internal" href="#change-182243baf075d92a029213dbd8041026">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2927">#2927</a></p>
</p>
</li>
<li><p id="change-0.9.2-16"><span class="target" id="change-3fe73b94064bab8326605943165bdf71"><strong>[sql] [bug]</strong> </span><p>Fixed 0.9 regression where the new sortable support for <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.RowProxy" title="sqlalchemy.engine.RowProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowProxy</span></code></a>
would lead to <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when compared to non-tuple types as it attempted
to apply tuple() to the “other” object unconditionally.  The
full range of Python comparison operators have now been implemented on
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.RowProxy" title="sqlalchemy.engine.RowProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowProxy</span></code></a>, using an approach that guarantees a comparison
system that is equivalent to that of a tuple, and the “other” object
is only coerced if it’s an instance of RowProxy.</p>
<a class="changelog-reference headerlink reference internal" href="#change-3fe73b94064bab8326605943165bdf71">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2848">#2848</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2924">#2924</a></p>
</p>
</li>
<li><p id="change-0.9.2-17"><span class="target" id="change-808b13e7a37e3b773154107db0509031"><strong>[sql] [bug]</strong> </span><p>A <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a> created inline with a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
that has no columns within it will be skipped.  Pullreq courtesy
Derek Harland.</p>
<a class="changelog-reference headerlink reference internal" href="#change-808b13e7a37e3b773154107db0509031">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.2-18"><span class="target" id="change-e78b46088d529294a0abdee2cd8fe000"><strong>[sql] [bug] [orm]</strong> </span><p>Fixed the multiple-table “UPDATE..FROM” construct, only usable on
MySQL, to correctly render the SET clause among multiple columns
with the same name across tables.  This also changes the name used for
the bound parameter in the SET clause to “&lt;tablename&gt;_&lt;colname&gt;” for
the non-primary table only; as this parameter is typically specified
using the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> object directly this should not have an
impact on applications.   The fix takes effect for both
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.update" title="sqlalchemy.schema.Table.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.update()</span></code></a> as well as <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.update" title="sqlalchemy.orm.query.Query.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.update()</span></code></a> in the ORM.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e78b46088d529294a0abdee2cd8fe000">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2912">#2912</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-schema">
<h3>schema<a class="headerlink" href="#change-0.9.2-schema" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-19"><span class="target" id="change-5ffb8526661815ef79b79f68611a613d"><strong>[schema] [bug]</strong> </span><p>Restored <code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.schema.SchemaVisitor</span></code> to the <code class="docutils literal notranslate"><span class="pre">.schema</span></code>
module.  Pullreq courtesy Sean Dague.</p>
<a class="changelog-reference headerlink reference internal" href="#change-5ffb8526661815ef79b79f68611a613d">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-postgresql">
<h3>postgresql<a class="headerlink" href="#change-0.9.2-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-20"><span class="target" id="change-aff5edc2e351865134d3aecbac9ae00d"><strong>[postgresql] [feature]</strong> </span><p>Added a new dialect-level argument <code class="docutils literal notranslate"><span class="pre">postgresql_ignore_search_path</span></code>;
this argument is accepted by both the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> constructor
as well as by the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.reflect" title="sqlalchemy.schema.MetaData.reflect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.reflect()</span></code></a> method.  When in use
against PostgreSQL, a foreign-key referenced table which specifies
a remote schema name will retain that schema name even if the name
is present in the <code class="docutils literal notranslate"><span class="pre">search_path</span></code>; the default behavior since 0.7.3
has been that schemas present in <code class="docutils literal notranslate"><span class="pre">search_path</span></code> would not be copied
to reflected <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> objects.  The documentation has been
updated to describe in detail the behavior of the <code class="docutils literal notranslate"><span class="pre">pg_get_constraintdef()</span></code>
function and how the <code class="docutils literal notranslate"><span class="pre">postgresql_ignore_search_path</span></code> feature essentially
determines if we will honor the schema qualification reported by
this function or not.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../dialects/postgresql.html#postgresql-schema-reflection"><span class="std std-ref">Remote-Schema Table Introspection and PostgreSQL search_path</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-aff5edc2e351865134d3aecbac9ae00d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2922">#2922</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-mysql">
<h3>mysql<a class="headerlink" href="#change-0.9.2-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-21"><span class="target" id="change-c9d1183ac37b97cd9bba811e075e7ee1"><strong>[mysql] [bug]</strong> </span><p>Some missing methods added to the cymysql dialect, including
_get_server_version_info() and _detect_charset().  Pullreq
courtesy Hajime Nakagami.</p>
<a class="changelog-reference headerlink reference internal" href="#change-c9d1183ac37b97cd9bba811e075e7ee1">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.2-22"><span class="target" id="change-c46c51b91fba93f95b0a32692149e285"><strong>[mysql] [bug] [sql]</strong> </span><p>Added new test coverage for so-called “down adaptions” of SQL types,
where a more specific type is adapted to a more generic one - this
use case is needed by some third party tools such as <code class="docutils literal notranslate"><span class="pre">sqlacodegen</span></code>.
The specific cases that needed repair within this test suite were that
of <a class="reference internal" href="../dialects/mysql.html#sqlalchemy.dialects.mysql.ENUM" title="sqlalchemy.dialects.mysql.ENUM"><code class="xref py py-class docutils literal notranslate"><span class="pre">ENUM</span></code></a> being downcast into a <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></a>,
and that of SQLite date types being cast into generic date types.
The <code class="docutils literal notranslate"><span class="pre">adapt()</span></code> method needed to become more specific here to counteract
the removal of a “catch all” <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> collection on the base
<a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeEngine</span></code></a> class that was removed in 0.9.</p>
<a class="changelog-reference headerlink reference internal" href="#change-c46c51b91fba93f95b0a32692149e285">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2917">#2917</a></p>
</p>
</li>
<li><p id="change-0.9.2-23"><span class="target" id="change-5e11ddb98a45933e5e3e4cc3649b5932"><strong>[mysql] [bug]</strong> </span><p>The MySQL CAST compilation now takes into account aspects of a string
type such as “charset” and “collation”.  While MySQL wants all character-
based CAST calls to use the CHAR type, we now create a real CHAR
object at CAST time and copy over all the parameters it has, so that
an expression like <code class="docutils literal notranslate"><span class="pre">cast(x,</span> <span class="pre">mysql.TEXT(charset='utf8'))</span></code> will
render <code class="docutils literal notranslate"><span class="pre">CAST(t.col</span> <span class="pre">AS</span> <span class="pre">CHAR</span> <span class="pre">CHARACTER</span> <span class="pre">SET</span> <span class="pre">utf8)</span></code>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-5e11ddb98a45933e5e3e4cc3649b5932">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.2-24"><span class="target" id="change-5306ccbcd637857024e7f7526badb84e"><strong>[mysql] [bug]</strong> </span><p>Added new “unicode returns” detection to the MySQL dialect and
to the default dialect system overall, such that any dialect
can add extra “tests” to the on-first-connect “does this DBAPI
return unicode directly?” detection. In this case, we are
adding a check specifically against the “utf8” encoding with
an explicit “utf8_bin” collation type (after checking that
this collation is available) to test for some buggy unicode
behavior observed with MySQLdb version 1.2.3.  While MySQLdb
has resolved this issue as of 1.2.4, the check here should
guard against regressions.  The change also allows the “unicode”
checks to log in the engine logs, which was not previously
the case.</p>
<a class="changelog-reference headerlink reference internal" href="#change-5306ccbcd637857024e7f7526badb84e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2906">#2906</a></p>
</p>
</li>
<li><p id="change-0.9.2-25"><span class="target" id="change-f9af1f23fa7c0156a51404d81df8f88c"><strong>[mysql] [bug] [engine] [pool]</strong> </span><p><a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection" title="sqlalchemy.engine.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> now associates a new
<code class="xref py py-class docutils literal notranslate"><span class="pre">RootTransaction</span></code> or <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.TwoPhaseTransaction" title="sqlalchemy.engine.TwoPhaseTransaction"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoPhaseTransaction</span></code></a>
with its immediate <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool._ConnectionFairy" title="sqlalchemy.pool._ConnectionFairy"><code class="xref py py-class docutils literal notranslate"><span class="pre">_ConnectionFairy</span></code></a> as a “reset handler”
for the span of that transaction, which takes over the task
of calling commit() or rollback() for the “reset on return” behavior
of <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> if the transaction was not otherwise completed.
This resolves the issue that a picky transaction
like that of MySQL two-phase will be
properly closed out when the connection is closed without an
explicit rollback or commit (e.g. no longer raises “XAER_RMFAIL”
in this case - note this only shows up in logging as the exception
is not propagated within pool reset).
This issue would arise e.g. when using an orm
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> with <code class="docutils literal notranslate"><span class="pre">twophase</span></code> set, and then
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.close" title="sqlalchemy.orm.session.Session.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.close()</span></code></a> is called without an explicit rollback or
commit.   The change also has the effect that you will now see
an explicit “ROLLBACK” in the logs when using a <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>
object in non-autocommit mode regardless of how that session was
discarded.  Thanks to Jeff Dairiki and Laurence Rowe for isolating
the issue here.</p>
<a class="changelog-reference headerlink reference internal" href="#change-f9af1f23fa7c0156a51404d81df8f88c">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2907">#2907</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-sqlite">
<h3>sqlite<a class="headerlink" href="#change-0.9.2-sqlite" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-26"><span class="target" id="change-f340e82cab2db7a33792c8734bd3dd2c"><strong>[sqlite] [bug]</strong> </span><p>Fixed bug whereby SQLite compiler failed to propagate compiler arguments
such as “literal binds” into a CAST expression.</p>
<a class="changelog-reference headerlink reference internal" href="#change-f340e82cab2db7a33792c8734bd3dd2c">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-mssql">
<h3>mssql<a class="headerlink" href="#change-0.9.2-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-27"><span class="target" id="change-2f279749d1dbc19d2dcab58b0a56c870"><strong>[mssql] [feature]</strong> </span><p>Added an option <code class="docutils literal notranslate"><span class="pre">mssql_clustered</span></code> to the <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a>
and <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.PrimaryKeyConstraint" title="sqlalchemy.schema.PrimaryKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code></a> constructs; on SQL Server, this adds
the <code class="docutils literal notranslate"><span class="pre">CLUSTERED</span></code> keyword to the constraint construct within DDL.
Pullreq courtesy Derek Harland.</p>
<a class="changelog-reference headerlink reference internal" href="#change-2f279749d1dbc19d2dcab58b0a56c870">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-oracle">
<h3>oracle<a class="headerlink" href="#change-0.9.2-oracle" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-28"><span class="target" id="change-2cd0a6583e825c62477ab7a3d4770de9"><strong>[oracle] [bug]</strong> </span><p>It’s been observed that the usage of a cx_Oracle “outputtypehandler”
in Python 2.xx in order to coerce string values to Unicode is inordinately
expensive; even though cx_Oracle is written in C, when you pass the
Python <code class="docutils literal notranslate"><span class="pre">unicode</span></code> primitive to cursor.var() and associate with an output
handler, the library counts every conversion as a Python function call
with all the requisite overhead being recorded; this <em>despite</em> the fact
when running in Python 3, all strings are also unconditionally coerced
to unicode but it does <em>not</em> incur this overhead,
meaning that cx_Oracle is failing to use performant techniques in Py2K.
As SQLAlchemy cannot easily select for this style of type handler on a
per-column basis, the handler was assembled unconditionally thereby
adding the overhead to all string access.</p>
<p>So this logic has been replaced with SQLAlchemy’s own unicode
conversion system, which now
only takes effect in Py2K for columns that are requested as unicode.
When C extensions are used, SQLAlchemy’s system appears to be 2-3x faster than
cx_Oracle’s.  Additionally, SQLAlchemy’s unicode conversion has been
enhanced such that when the “conditional” converter is required
(now needed for the Oracle backend), the check for “already unicode” is now
performed in C and no longer introduces significant overhead.</p>
<p>This change has two impacts on the cx_Oracle backend.  One is that
string values in Py2K which aren’t specifically requested with the
Unicode type or convert_unicode=True will now come back as <code class="docutils literal notranslate"><span class="pre">str</span></code>,
not <code class="docutils literal notranslate"><span class="pre">unicode</span></code> - this behavior is similar to a backend such as
MySQL.  Additionally, when unicode values are requested with the cx_Oracle
backend, if the C extensions are <em>not</em> used, there is now an additional
overhead of an isinstance() check per column.  This tradeoff has been
made as it can be worked around and no longer places a performance burden
on the likely majority of Oracle result columns that are non-unicode
strings.</p>
<a class="changelog-reference headerlink reference internal" href="#change-2cd0a6583e825c62477ab7a3d4770de9">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2911">#2911</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.2-misc">
<h3>misc<a class="headerlink" href="#change-0.9.2-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.2-29"><span class="target" id="change-b3122f01ed7d8d120a8035233320d558"><strong>[bug] [examples]</strong> </span><p>Added a tweak to the “history_meta” example where the check for
“history” on a relationship-bound attribute will now no longer emit
any SQL if the relationship is unloaded.</p>
<a class="changelog-reference headerlink reference internal" href="#change-b3122f01ed7d8d120a8035233320d558">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.2-30"><span class="target" id="change-34c66a5b820b990e8ccde1cb2eee76c2"><strong>[bug] [pool]</strong> </span><p>The argument names for the <a class="reference internal" href="../core/events.html#sqlalchemy.events.PoolEvents.reset" title="sqlalchemy.events.PoolEvents.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PoolEvents.reset()</span></code></a> event have been
renamed to <code class="docutils literal notranslate"><span class="pre">dbapi_connection</span></code> and <code class="docutils literal notranslate"><span class="pre">connection_record</span></code> in order
to maintain consistency with all the other pool events.  It is expected
that any existing listeners for this relatively new and
seldom-used event are using positional style to receive arguments in
any case.</p>
<a class="changelog-reference headerlink reference internal" href="#change-34c66a5b820b990e8ccde1cb2eee76c2">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.2-31"><span class="target" id="change-98b1a028c00831d12344a81c2928019c"><strong>[bug] [cextensions] [py3k]</strong> </span><p>Fixed an issue where the C extensions in Py3K are using the wrong API
to specify the top-level module function, which breaks
in Python 3.4b2.  Py3.4b2 changes PyMODINIT_FUNC to return
“void” instead of <code class="docutils literal notranslate"><span class="pre">PyObject</span> <span class="pre">*</span></code>, so we now make sure to use
“PyMODINIT_FUNC” instead of <code class="docutils literal notranslate"><span class="pre">PyObject</span> <span class="pre">*</span></code> directly.  Pull request
courtesy cgohlke.</p>
<a class="changelog-reference headerlink reference internal" href="#change-98b1a028c00831d12344a81c2928019c">¶</a><p></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.1">
<h2 class="release-version">0.9.1<a class="headerlink" href="#change-0.9.1" title="Permalink to this headline">¶</a></h2>
Released: January 5, 2014<div class="section" id="change-0.9.1-orm">
<h3>orm<a class="headerlink" href="#change-0.9.1-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.1-0"><span class="target" id="change-03a1682f97f04e9969b1eedfea573837"><strong>[orm] [feature] [extensions]</strong> </span><p>A new, <strong>experimental</strong> extension <a class="reference internal" href="../orm/extensions/automap.html#module-sqlalchemy.ext.automap" title="sqlalchemy.ext.automap"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlalchemy.ext.automap</span></code></a> is added.
This extension expands upon the functionality of Declarative as well as
the <a class="reference internal" href="../orm/extensions/declarative/api.html#sqlalchemy.ext.declarative.DeferredReflection" title="sqlalchemy.ext.declarative.DeferredReflection"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeferredReflection</span></code></a> class to produce a base class which
automatically generates mapped classes <em>and relationships</em> based on
table metadata.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#feature-automap"><span class="std std-ref">Automap Extension</span></a></p>
<p><a class="reference internal" href="../orm/extensions/automap.html"><span class="std std-ref">Automap</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-03a1682f97f04e9969b1eedfea573837">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.1-1"><span class="target" id="change-8aeefcaaa4a378dba8faa4278d991e73"><strong>[orm] [bug] [events]</strong> </span><p>Fixed regression where using a <code class="docutils literal notranslate"><span class="pre">functools.partial()</span></code> with the event
system would cause a recursion overflow due to usage of inspect.getargspec()
on it in order to detect a legacy calling signature for certain events,
and apparently there’s no way to do this with a partial object.  Instead
we skip the legacy check and assume the modern style; the check itself
now only occurs for the SessionEvents.after_bulk_update and
SessionEvents.after_bulk_delete events.  Those two events will require
the new signature style if assigned to a “partial” event listener.</p>
<a class="changelog-reference headerlink reference internal" href="#change-8aeefcaaa4a378dba8faa4278d991e73">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2905">#2905</a></p>
</p>
</li>
<li><p id="change-0.9.1-2"><span class="target" id="change-590902684e2acb993441b174c1ab59a3"><strong>[orm] [bug]</strong> </span><p>Fixed bug where using new <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.info" title="sqlalchemy.orm.session.Session.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.info</span></code></a> attribute would fail
if the <code class="docutils literal notranslate"><span class="pre">.info</span></code> argument were only passed to the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.sessionmaker" title="sqlalchemy.orm.session.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a>
creation call but not to the object itself.  Courtesy Robin Schoonover.</p>
<a class="changelog-reference headerlink reference internal" href="#change-590902684e2acb993441b174c1ab59a3">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.1-3"><span class="target" id="change-53e42d12ab61af327a7559207a6211b4"><strong>[orm] [bug]</strong> </span><p>Fixed regression where we don’t check the given name against the
correct string class when setting up a backref based on a name,
therefore causing the error “too many values to unpack”.  This was
related to the Py3k conversion.</p>
<a class="changelog-reference headerlink reference internal" href="#change-53e42d12ab61af327a7559207a6211b4">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2901">#2901</a></p>
</p>
</li>
<li><p id="change-0.9.1-4"><span class="target" id="change-48eab507305f1712468f94e36bc07cfb"><strong>[orm] [bug]</strong> </span><p>Fixed regression where we apparently still create an implicit
alias when saying query(B).join(B.cs), where “C” is a joined inh
class; however, this implicit alias was created only considering
the immediate left side, and not a longer chain of joins along different
joined-inh subclasses of the same base.   As long as we’re still
implicitly aliasing in this case, the behavior is dialed back a bit
so that it will alias the right side in a wider variety of cases.</p>
<a class="changelog-reference headerlink reference internal" href="#change-48eab507305f1712468f94e36bc07cfb">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2903">#2903</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.1-orm-declarative">
<h3>orm declarative<a class="headerlink" href="#change-0.9.1-orm-declarative" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.1-5"><span class="target" id="change-0f3dd659714e45e0f577963d43d7d5aa"><strong>[bug] [declarative] [orm]</strong> </span><p>Fixed an extremely unlikely memory issue where when using
<a class="reference internal" href="../orm/extensions/declarative/api.html#sqlalchemy.ext.declarative.DeferredReflection" title="sqlalchemy.ext.declarative.DeferredReflection"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeferredReflection</span></code></a>
to define classes pending for reflection, if some subset of those
classes were discarded before the <a class="reference internal" href="../orm/extensions/declarative/api.html#sqlalchemy.ext.declarative.DeferredReflection.prepare" title="sqlalchemy.ext.declarative.DeferredReflection.prepare"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DeferredReflection.prepare()</span></code></a>
method were called to reflect and map the class, a strong reference
to the class would remain held within the declarative internals.
This internal collection of “classes to map” now uses weak
references against the classes themselves.</p>
<a class="changelog-reference headerlink reference internal" href="#change-0f3dd659714e45e0f577963d43d7d5aa">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.1-6"><span class="target" id="change-4bf7b34989a71c9289696d84c85cc213"><strong>[bug] [declarative] [orm]</strong> </span><p>A quasi-regression where apparently in 0.8 you can set a class-level
attribute on declarative to simply refer directly to an <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.attributes.InstrumentedAttribute" title="sqlalchemy.orm.attributes.InstrumentedAttribute"><code class="xref py py-class docutils literal notranslate"><span class="pre">InstrumentedAttribute</span></code></a>
on a superclass or on the class itself, and it
acts more or less like a synonym; in 0.9, this fails to set up enough
bookkeeping to keep up with the more liberalized backref logic
from <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2789">#2789</a>.  Even though this use case was never directly
considered, it is now detected by declarative at the “setattr()” level
as well as when setting up a subclass, and the mirrored/renamed attribute
is now set up as a <a class="reference internal" href="../orm/mapped_attributes.html#sqlalchemy.orm.synonym" title="sqlalchemy.orm.synonym"><code class="xref py py-func docutils literal notranslate"><span class="pre">synonym()</span></code></a> instead.</p>
<a class="changelog-reference headerlink reference internal" href="#change-4bf7b34989a71c9289696d84c85cc213">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2900">#2900</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.1-sql">
<h3>sql<a class="headerlink" href="#change-0.9.1-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.1-7"><span class="target" id="change-e56929f2d249d5a65bd72271366f4ad3"><strong>[sql] [feature]</strong> </span><p>Conjunctions like <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.and_" title="sqlalchemy.sql.expression.and_"><code class="xref py py-func docutils literal notranslate"><span class="pre">and_()</span></code></a> and <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.or_" title="sqlalchemy.sql.expression.or_"><code class="xref py py-func docutils literal notranslate"><span class="pre">or_()</span></code></a> can now accept
Python generators as a single argument, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">and_</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">y</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">tuples</span><span class="p">)</span></pre></div>
</div>
<p>The logic here looks for a single argument <code class="docutils literal notranslate"><span class="pre">*args</span></code> where the first
element is an instance of <code class="docutils literal notranslate"><span class="pre">types.GeneratorType</span></code>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e56929f2d249d5a65bd72271366f4ad3">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.1-schema">
<h3>schema<a class="headerlink" href="#change-0.9.1-schema" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.1-8"><span class="target" id="change-08112f9e5e2d64a1f0236743dbd072a4"><strong>[schema] [feature]</strong> </span><p>The <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.params.extend_existing" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.extend_existing</span></code></a> and <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.params.autoload_replace" title="sqlalchemy.schema.Table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Table.autoload_replace</span></code></a>
parameters are now available on the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.reflect" title="sqlalchemy.schema.MetaData.reflect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.reflect()</span></code></a>
method.</p>
<a class="changelog-reference headerlink reference internal" href="#change-08112f9e5e2d64a1f0236743dbd072a4">¶</a><p></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.0">
<h2 class="release-version">0.9.0<a class="headerlink" href="#change-0.9.0" title="Permalink to this headline">¶</a></h2>
Released: December 30, 2013<div class="section" id="change-0.9.0-orm">
<h3>orm<a class="headerlink" href="#change-0.9.0-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-0"><span class="target" id="change-6f14ee03b908f78d8d174e7ef588746d"><strong>[orm] [feature]</strong> </span><p>The <a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.StatementError" title="sqlalchemy.exc.StatementError"><code class="xref py py-class docutils literal notranslate"><span class="pre">StatementError</span></code></a> or DBAPI-related subclass
now can accommodate additional information about the “reason” for
the exception; the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> now adds some detail to it
when the exception occurs within an autoflush.  This approach
is taken as opposed to combining <a class="reference internal" href="../orm/exceptions.html#sqlalchemy.orm.exc.FlushError" title="sqlalchemy.orm.exc.FlushError"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlushError</span></code></a> with
a Python 3 style “chained exception” approach so as to maintain
compatibility both with Py2K code as well as code that already
catches <code class="docutils literal notranslate"><span class="pre">IntegrityError</span></code> or similar.</p>
<a class="changelog-reference headerlink reference internal" href="#change-6f14ee03b908f78d8d174e7ef588746d">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0-1"><span class="target" id="change-45720dc1b5014ca04cc355970a4a77ae"><strong>[orm] [feature] [backrefs]</strong> </span><p>Added new argument <code class="docutils literal notranslate"><span class="pre">include_backrefs=True</span></code> to the
<a class="reference internal" href="../orm/mapped_attributes.html#sqlalchemy.orm.validates" title="sqlalchemy.orm.validates"><code class="xref py py-func docutils literal notranslate"><span class="pre">validates()</span></code></a> function; when set to False, a validation event
will not be triggered if the event was initated as a backref to
an attribute operation from the other side.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#feature-1535"><span class="std std-ref">include_backrefs=False option for &#64;validates</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-45720dc1b5014ca04cc355970a4a77ae">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1535">#1535</a></p>
</p>
</li>
<li><p id="change-0.9.0-2"><span class="target" id="change-1144ec1f7338720f8b1ea74ccda5f49b"><strong>[orm] [feature]</strong> </span><p>A new API for specifying the <code class="docutils literal notranslate"><span class="pre">FOR</span> <span class="pre">UPDATE</span></code> clause of a <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>
is added with the new <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.with_for_update" title="sqlalchemy.orm.query.Query.with_for_update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.with_for_update()</span></code></a> method,
to complement the new <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.GenerativeSelect.with_for_update" title="sqlalchemy.sql.expression.GenerativeSelect.with_for_update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GenerativeSelect.with_for_update()</span></code></a> method.
Pull request courtesy Mario Lassnig.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#feature-github-42"><span class="std std-ref">New FOR UPDATE support on select(), Query()</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-1144ec1f7338720f8b1ea74ccda5f49b">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0-3"><span class="target" id="change-596ed6934e304cb10692a3ddea823f90"><strong>[orm] [bug]</strong> </span><p>An adjustment to the <a class="reference internal" href="../orm/loading_relationships.html#sqlalchemy.orm.subqueryload" title="sqlalchemy.orm.subqueryload"><code class="xref py py-func docutils literal notranslate"><span class="pre">subqueryload()</span></code></a> strategy which ensures that
the query runs after the loading process has begun; this is so that
the subqueryload takes precedence over other loaders that may be
hitting the same attribute due to other eager/noload situations
at the wrong time.</p>
<a class="changelog-reference headerlink reference internal" href="#change-596ed6934e304cb10692a3ddea823f90">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2887">#2887</a></p>
</p>
</li>
<li><p id="change-0.9.0-4"><span class="target" id="change-73f5c9c3d26dc55718454012b0f6cbd7"><strong>[orm] [bug]</strong> </span><p>Fixed bug when using joined table inheritance from a table to a
select/alias on the base, where the PK columns were also not same
named; the persistence system would fail to copy primary key values
from the base table to the inherited table upon INSERT.</p>
<a class="changelog-reference headerlink reference internal" href="#change-73f5c9c3d26dc55718454012b0f6cbd7">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2885">#2885</a></p>
</p>
</li>
<li><p id="change-0.9.0-5"><span class="target" id="change-87f8c9385495cffe875cfa574f7a3063"><strong>[orm] [bug]</strong> </span><p><a class="reference internal" href="../orm/composites.html#sqlalchemy.orm.composite" title="sqlalchemy.orm.composite"><code class="xref py py-func docutils literal notranslate"><span class="pre">composite()</span></code></a> will raise an informative error message when the
columns/attribute (names) passed don’t resolve to a Column or mapped
attribute (such as an erroneous tuple); previously raised an unbound
local.</p>
<a class="changelog-reference headerlink reference internal" href="#change-87f8c9385495cffe875cfa574f7a3063">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2889">#2889</a></p>
</p>
</li>
<li><p id="change-0.9.0-6"><span class="target" id="change-a97169e0a5e5a559f46bd8e3f7e58fc4"><strong>[orm] [bug]</strong> </span><p>Fixed a regression introduced by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2818">#2818</a> where the EXISTS
query being generated would produce a “columns being replaced”
warning for a statement with two same-named columns,
as the internal SELECT wouldn’t have use_labels set.</p>
<a class="changelog-reference headerlink reference internal" href="#change-a97169e0a5e5a559f46bd8e3f7e58fc4">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2818">#2818</a></p>
</p>
</li>
<li><p id="change-0.9.0-7"><span class="target" id="change-c178432e123c26d95767915cfd94145b"><strong>[orm] [bug] [collections] [py3k]</strong> </span><p>Added support for the Python 3 method <code class="docutils literal notranslate"><span class="pre">list.clear()</span></code> within
the ORM collection instrumentation system; pull request
courtesy Eduardo Schettino.</p>
<a class="changelog-reference headerlink reference internal" href="#change-c178432e123c26d95767915cfd94145b">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0-8"><span class="target" id="change-524c3fc2a92c716633ad362ee5de0c41"><strong>[orm] [bug]</strong> </span><p>Some refinements to the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.util.AliasedClass" title="sqlalchemy.orm.util.AliasedClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">AliasedClass</span></code></a> construct with regards
to descriptors, like hybrids, synonyms, composites, user-defined
descriptors, etc.  The attribute
adaptation which goes on has been made more robust, such that if a descriptor
returns another instrumented attribute, rather than a compound SQL
expression element, the operation will still proceed.
Additionally, the “adapted” operator will retain its class; previously,
a change in class from <code class="docutils literal notranslate"><span class="pre">InstrumentedAttribute</span></code> to <code class="docutils literal notranslate"><span class="pre">QueryableAttribute</span></code>
(a superclass) would interact with Python’s operator system such that
an expression like <code class="docutils literal notranslate"><span class="pre">aliased(MyClass.x)</span> <span class="pre">&gt;</span> <span class="pre">MyClass.x</span></code> would reverse itself
to read <code class="docutils literal notranslate"><span class="pre">myclass.x</span> <span class="pre">&lt;</span> <span class="pre">myclass_1.x</span></code>.   The adapted attribute will also
refer to the new <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.util.AliasedClass" title="sqlalchemy.orm.util.AliasedClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">AliasedClass</span></code></a> as its parent which was not
always the case before.</p>
<a class="changelog-reference headerlink reference internal" href="#change-524c3fc2a92c716633ad362ee5de0c41">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2872">#2872</a></p>
</p>
</li>
<li><p id="change-0.9.0-9"><span class="target" id="change-cd9ee851b4fed4be44aa3357d3ea656e"><strong>[orm] [bug]</strong> </span><p>The <code class="docutils literal notranslate"><span class="pre">viewonly</span></code> flag on <a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> will now prevent
attribute history from being written on behalf of the target attribute.
This has the effect of the object not being written to the
Session.dirty list if it is mutated.  Previously, the object would
be present in Session.dirty, but no change would take place on behalf
of the modified attribute during flush.   The attribute still emits
events such as backref events and user-defined events and will still
receive mutations from backrefs.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#migration-2833"><span class="std std-ref">viewonly=True on relationship() prevents history from taking effect</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-cd9ee851b4fed4be44aa3357d3ea656e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2833">#2833</a></p>
</p>
</li>
<li><p id="change-0.9.0-10"><span class="target" id="change-57380df483eb4573627dd0c4cc6285b2"><strong>[orm] [bug]</strong> </span><p>Added support for new <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.info" title="sqlalchemy.orm.session.Session.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.info</span></code></a> attribute to
<a class="reference internal" href="../orm/contextual.html#sqlalchemy.orm.scoping.scoped_session" title="sqlalchemy.orm.scoping.scoped_session"><code class="xref py py-class docutils literal notranslate"><span class="pre">scoped_session</span></code></a>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-57380df483eb4573627dd0c4cc6285b2">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0-11"><span class="target" id="change-74dca08530e2aa7327444a66c6c6d823"><strong>[orm] [bug]</strong> </span><p>Fixed bug where usage of new <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Bundle" title="sqlalchemy.orm.query.Bundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bundle</span></code></a> object would cause
the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.column_descriptions" title="sqlalchemy.orm.query.Query.column_descriptions"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Query.column_descriptions</span></code></a> attribute to fail.</p>
<a class="changelog-reference headerlink reference internal" href="#change-74dca08530e2aa7327444a66c6c6d823">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0-12"><span class="target" id="change-17f42ee3eb7206b1653e3a04460ff2a5"><strong>[orm] [bug] [sql] [sqlite]</strong> </span><p>Fixed a regression introduced by the join rewriting feature of
<a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2369">#2369</a> and <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2587">#2587</a> where a nested join with one side
already an aliased select would fail to translate the ON clause on the
outside correctly; in the ORM this could be seen when using a
SELECT statement as a “secondary” table.</p>
<a class="changelog-reference headerlink reference internal" href="#change-17f42ee3eb7206b1653e3a04460ff2a5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2858">#2858</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-orm-declarative">
<h3>orm declarative<a class="headerlink" href="#change-0.9.0-orm-declarative" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-13"><span class="target" id="change-2160db7c02e08d3477c32ebfe806bf14"><strong>[bug] [declarative] [orm]</strong> </span><p>Declarative does an extra check to detect if the same
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> is mapped multiple times under different properties
(which typically should be a <a class="reference internal" href="../orm/mapped_attributes.html#sqlalchemy.orm.synonym" title="sqlalchemy.orm.synonym"><code class="xref py py-func docutils literal notranslate"><span class="pre">synonym()</span></code></a> instead) or if two
or more <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects are given the same name, raising
a warning if this condition is detected.</p>
<a class="changelog-reference headerlink reference internal" href="#change-2160db7c02e08d3477c32ebfe806bf14">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2828">#2828</a></p>
</p>
</li>
<li><p id="change-0.9.0-14"><span class="target" id="change-93a22c24dfcd871c8f872616c98d3b23"><strong>[bug] [declarative] [orm]</strong> </span><p>The <a class="reference internal" href="../orm/extensions/declarative/api.html#sqlalchemy.ext.declarative.DeferredReflection" title="sqlalchemy.ext.declarative.DeferredReflection"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeferredReflection</span></code></a> class has been enhanced to provide
automatic reflection support for the “secondary” table referred
to by a <a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>.   “secondary”, when specified
either as a string table name, or as a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object with
only a name and <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> object will also be included
in the reflection process when <a class="reference internal" href="../orm/extensions/declarative/api.html#sqlalchemy.ext.declarative.DeferredReflection.prepare" title="sqlalchemy.ext.declarative.DeferredReflection.prepare"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DeferredReflection.prepare()</span></code></a>
is called.</p>
<a class="changelog-reference headerlink reference internal" href="#change-93a22c24dfcd871c8f872616c98d3b23">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2865">#2865</a></p>
</p>
</li>
<li><p id="change-0.9.0-15"><span class="target" id="change-abd40b717be4a66e010edbce0f8dacb6"><strong>[bug] [declarative] [orm]</strong> </span><p>Fixed bug where in Py2K a unicode literal would not be accepted
as the string name of a class or other argument within
declarative using <a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-abd40b717be4a66e010edbce0f8dacb6">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-engine">
<h3>engine<a class="headerlink" href="#change-0.9.0-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-16"><span class="target" id="change-9e964e2f4332755c2be06fb8dfad0052"><strong>[engine] [feature]</strong> </span><p>The <a class="reference internal" href="../core/engines.html#sqlalchemy.engine_from_config" title="sqlalchemy.engine_from_config"><code class="xref py py-func docutils literal notranslate"><span class="pre">engine_from_config()</span></code></a> function has been improved so that
we will be able to parse dialect-specific arguments from string
configuration dictionaries.  Dialect classes can now provide their
own list of parameter types and string-conversion routines.
The feature is not yet used by the built-in dialects, however.</p>
<a class="changelog-reference headerlink reference internal" href="#change-9e964e2f4332755c2be06fb8dfad0052">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2875">#2875</a></p>
</p>
</li>
<li><p id="change-0.9.0-17"><span class="target" id="change-b41267634efb6a5162eca78021998f59"><strong>[engine] [bug]</strong> </span><p>A DBAPI that raises an error on <code class="docutils literal notranslate"><span class="pre">connect()</span></code> which is not a subclass
of dbapi.Error (such as <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>, <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code>, etc.)
will propagate the exception unchanged.  Previously,
the error handling specific to the <code class="docutils literal notranslate"><span class="pre">connect()</span></code> routine would both
inappropriately run the exception through the dialect’s
<a class="reference internal" href="../core/internals.html#sqlalchemy.engine.interfaces.Dialect.is_disconnect" title="sqlalchemy.engine.interfaces.Dialect.is_disconnect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Dialect.is_disconnect()</span></code></a> routine as well as wrap it in
a <a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.DBAPIError" title="sqlalchemy.exc.DBAPIError"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.exc.DBAPIError</span></code></a>.  It is now propagated unchanged
in the same way as occurs within the execute process.</p>
<a class="changelog-reference headerlink reference internal" href="#change-b41267634efb6a5162eca78021998f59">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2881">#2881</a></p>
</p>
</li>
<li><p id="change-0.9.0-18"><span class="target" id="change-af2f363b02c9b82d6729e8e1c808d636"><strong>[engine] [bug] [pool]</strong> </span><p>The <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueuePool</span></code></a> has been enhanced to not block new connection
attempts when an existing connection attempt is blocking.  Previously,
the production of new connections was serialized within the block
that monitored overflow; the overflow counter is now altered within
its own critical section outside of the connection process itself.</p>
<a class="changelog-reference headerlink reference internal" href="#change-af2f363b02c9b82d6729e8e1c808d636">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2880">#2880</a></p>
</p>
</li>
<li><p id="change-0.9.0-19"><span class="target" id="change-33f71100778b84fb526ebd50c7e9468d"><strong>[engine] [bug] [pool]</strong> </span><p>Made a slight adjustment to the logic which waits for a pooled
connection to be available, such that for a connection pool
with no timeout specified, it will every half a second break out of
the wait to check for the so-called “abort” flag, which allows the
waiter to break out in case the whole connection pool was dumped;
normally the waiter should break out due to a notify_all() but it’s
possible this notify_all() is missed in very slim cases.
This is an extension of logic first introduced in 0.8.0, and the
issue has only been observed occasionally in stress tests.</p>
<a class="changelog-reference headerlink reference internal" href="#change-33f71100778b84fb526ebd50c7e9468d">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2522">#2522</a></p>
</p>
</li>
<li><p id="change-0.9.0-20"><span class="target" id="change-d789c97206bbfdf6d74064846660d3db"><strong>[engine] [bug]</strong> </span><p>Fixed bug where SQL statement would be improperly ASCII-encoded
when a pre-DBAPI <a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.StatementError" title="sqlalchemy.exc.StatementError"><code class="xref py py-class docutils literal notranslate"><span class="pre">StatementError</span></code></a> were raised within
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.execute" title="sqlalchemy.engine.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>, causing encoding errors for
non-ASCII statements.  The stringification now remains within
Python unicode thus avoiding encoding errors.</p>
<a class="changelog-reference headerlink reference internal" href="#change-d789c97206bbfdf6d74064846660d3db">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2871">#2871</a></p>
</p>
</li>
<li><p id="change-0.9.0-21"><span class="target" id="change-54ee80068e58a88b092a47a6ddd0353d"><strong>[engine] [bug]</strong> </span><p>The <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> routine and the related
<a class="reference internal" href="../core/engines.html#sqlalchemy.engine.url.make_url" title="sqlalchemy.engine.url.make_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_url()</span></code></a> function no longer considers the <code class="docutils literal notranslate"><span class="pre">+</span></code> sign
to be a space within the password field.  The parsing has been
adjusted to match RFC 1738 exactly, in that both <code class="docutils literal notranslate"><span class="pre">username</span></code>
and <code class="docutils literal notranslate"><span class="pre">password</span></code> expect only <code class="docutils literal notranslate"><span class="pre">:</span></code>, <code class="docutils literal notranslate"><span class="pre">&#64;</span></code>, and <code class="docutils literal notranslate"><span class="pre">/</span></code> to be
encoded.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#migration-2873"><span class="std std-ref">The “password” portion of a create_engine() no longer considers the + sign as an encoded space</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-54ee80068e58a88b092a47a6ddd0353d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2873">#2873</a></p>
</p>
</li>
<li><p id="change-0.9.0-22"><span class="target" id="change-cc0ce586ee4b6d177eb5504dadba1feb"><strong>[engine] [bug]</strong> </span><p>The <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.RowProxy" title="sqlalchemy.engine.RowProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">RowProxy</span></code></a> object is now sortable in Python as a regular
tuple is; this is accomplished via ensuring tuple() conversion on
both sides within the <code class="docutils literal notranslate"><span class="pre">__eq__()</span></code> method as well as
the addition of a <code class="docutils literal notranslate"><span class="pre">__lt__()</span></code> method.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#migration-2848"><span class="std std-ref">RowProxy now has tuple-sorting behavior</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-cc0ce586ee4b6d177eb5504dadba1feb">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2848">#2848</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-sql">
<h3>sql<a class="headerlink" href="#change-0.9.0-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-23"><span class="target" id="change-434eede0d7c5ab434a2634bb1c477426"><strong>[sql] [feature]</strong> </span><p>New improvements to the <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> construct, including
more flexible ways to set up bound parameters and return types;
in particular, a <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> can now be turned into a full
FROM-object, embeddable in other statements as an alias or CTE
using the new method <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.TextClause.columns" title="sqlalchemy.sql.expression.TextClause.columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextClause.columns()</span></code></a>.   The <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a>
construct can also render “inline” bound parameters when the construct
is compiled in a “literal bound” context.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#feature-2877"><span class="std std-ref">New text() Capabilities</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-434eede0d7c5ab434a2634bb1c477426">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2877">#2877</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2882">#2882</a></p>
</p>
</li>
<li><p id="change-0.9.0-24"><span class="target" id="change-80575a82c6ca1e11cdf9bba117d2a012"><strong>[sql] [feature]</strong> </span><p>A new API for specifying the <code class="docutils literal notranslate"><span class="pre">FOR</span> <span class="pre">UPDATE</span></code> clause of a <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>
is added with the new <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.GenerativeSelect.with_for_update" title="sqlalchemy.sql.expression.GenerativeSelect.with_for_update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GenerativeSelect.with_for_update()</span></code></a> method.
This method supports a more straightforward system of setting
dialect-specific options compared to the <code class="docutils literal notranslate"><span class="pre">for_update</span></code> keyword
argument of <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a>, and also includes support for the
SQL standard <code class="docutils literal notranslate"><span class="pre">FOR</span> <span class="pre">UPDATE</span> <span class="pre">OF</span></code> clause.   The ORM also includes
a new corresponding method <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.with_for_update" title="sqlalchemy.orm.query.Query.with_for_update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.with_for_update()</span></code></a>.
Pull request courtesy Mario Lassnig.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#feature-github-42"><span class="std std-ref">New FOR UPDATE support on select(), Query()</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-80575a82c6ca1e11cdf9bba117d2a012">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0-25"><span class="target" id="change-b05ab8cbc93a69cb1072bcae721b4ec6"><strong>[sql] [feature]</strong> </span><p>The precision used when coercing a returned floating point value to
Python <code class="docutils literal notranslate"><span class="pre">Decimal</span></code> via string is now configurable.  The
flag <code class="docutils literal notranslate"><span class="pre">decimal_return_scale</span></code> is now supported by all <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Numeric" title="sqlalchemy.types.Numeric"><code class="xref py py-class docutils literal notranslate"><span class="pre">Numeric</span></code></a>
and <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a> types, which will ensure this many digits are taken
from the native floating point value when it is converted to string.
If not present, the type will make use of the value of <code class="docutils literal notranslate"><span class="pre">.scale</span></code>, if
the type supports this setting and it is non-None.  Otherwise the original
default length of 10 is used.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#feature-2867"><span class="std std-ref">Floating Point String-Conversion Precision Configurable for Native Floating Point Types</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-b05ab8cbc93a69cb1072bcae721b4ec6">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2867">#2867</a></p>
</p>
</li>
<li><p id="change-0.9.0-26"><span class="target" id="change-17f346ee6ecd1268fbc24fa52ca6fbb7"><strong>[sql] [bug]</strong> </span><p>Fixed issue where a primary key column that has a Sequence on it,
yet the column is not the “auto increment” column, either because
it has a foreign key constraint or <code class="docutils literal notranslate"><span class="pre">autoincrement=False</span></code> set,
would attempt to fire the Sequence on INSERT for backends that don’t
support sequences, when presented with an INSERT missing the primary
key value.  This would take place on non-sequence backends like
SQLite, MySQL.</p>
<a class="changelog-reference headerlink reference internal" href="#change-17f346ee6ecd1268fbc24fa52ca6fbb7">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2896">#2896</a></p>
</p>
</li>
<li><p id="change-0.9.0-27"><span class="target" id="change-8201a57e8a671eba9a5e14fb1d129e71"><strong>[sql] [bug]</strong> </span><p>Fixed bug with <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert.from_select" title="sqlalchemy.sql.expression.Insert.from_select"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Insert.from_select()</span></code></a> method where the order
of the given names would not be taken into account when generating
the INSERT statement, thus producing a mismatch versus the column
names in the given SELECT statement.  Also noted that
<a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert.from_select" title="sqlalchemy.sql.expression.Insert.from_select"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Insert.from_select()</span></code></a> implies that Python-side insert defaults
cannot be used, since the statement has no VALUES clause.</p>
<a class="changelog-reference headerlink reference internal" href="#change-8201a57e8a671eba9a5e14fb1d129e71">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2895">#2895</a></p>
</p>
</li>
<li><p id="change-0.9.0-28"><span class="target" id="change-dd267693c4318fbd71e8ff2f00c3839c"><strong>[sql] [bug]</strong> </span><p>The <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.cast" title="sqlalchemy.sql.expression.cast"><code class="xref py py-func docutils literal notranslate"><span class="pre">cast()</span></code></a> function, when given a plain literal value,
will now apply the given type to the given literal value on the
bind parameter side according to the type given to the cast,
in the same manner as that of the <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.type_coerce" title="sqlalchemy.sql.expression.type_coerce"><code class="xref py py-func docutils literal notranslate"><span class="pre">type_coerce()</span></code></a> function.
However unlike <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.type_coerce" title="sqlalchemy.sql.expression.type_coerce"><code class="xref py py-func docutils literal notranslate"><span class="pre">type_coerce()</span></code></a>, this only takes effect if a
non-clauseelement value is passed to <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.cast" title="sqlalchemy.sql.expression.cast"><code class="xref py py-func docutils literal notranslate"><span class="pre">cast()</span></code></a>; an existing typed
construct will retain its type.</p>
<a class="changelog-reference headerlink reference internal" href="#change-dd267693c4318fbd71e8ff2f00c3839c">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0-29"><span class="target" id="change-8089bd064566ab520c8d752d8f44b7ea"><strong>[sql] [bug]</strong> </span><p>The <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> class more aggressively checks the given
column argument.   If not a string, it checks that the object is
at least a <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.ColumnClause" title="sqlalchemy.sql.expression.ColumnClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnClause</span></code></a>, or an object that resolves to one,
and that the <code class="docutils literal notranslate"><span class="pre">.table</span></code> attribute, if present, refers to a
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.TableClause" title="sqlalchemy.sql.expression.TableClause"><code class="xref py py-class docutils literal notranslate"><span class="pre">TableClause</span></code></a> or subclass, and not something like an
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Alias" title="sqlalchemy.sql.expression.Alias"><code class="xref py py-class docutils literal notranslate"><span class="pre">Alias</span></code></a>.  Otherwise, a <a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.ArgumentError" title="sqlalchemy.exc.ArgumentError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArgumentError</span></code></a> is raised.</p>
<a class="changelog-reference headerlink reference internal" href="#change-8089bd064566ab520c8d752d8f44b7ea">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2883">#2883</a></p>
</p>
</li>
<li><p id="change-0.9.0-30"><span class="target" id="change-fb4da0d066ca932a5f91af14f8541994"><strong>[sql] [bug]</strong> </span><p>The precedence rules for the <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.collate" title="sqlalchemy.sql.operators.ColumnOperators.collate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnOperators.collate()</span></code></a> operator
have been modified, such that the COLLATE operator is now of lower
precedence than the comparison operators.  This has the effect that
a COLLATE applied to a comparison will not render parenthesis
around the comparison, which is not parsed by backends such as
MSSQL.  The change is backwards incompatible for those setups that
were working around the issue by applying <code class="xref py py-meth docutils literal notranslate"><span class="pre">Operators.collate()</span></code>
to an individual element of the comparison expression,
rather than the comparison expression as a whole.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#migration-2879"><span class="std std-ref">The precedence rules for COLLATE have been changed</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-fb4da0d066ca932a5f91af14f8541994">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2879">#2879</a></p>
</p>
</li>
<li><p id="change-0.9.0-31"><span class="target" id="change-55d6c5d7c76b54deb2d68f5e6ee4e501"><strong>[sql] [enhancement]</strong> </span><p>The exception raised when a <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.BindParameter" title="sqlalchemy.sql.expression.BindParameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">BindParameter</span></code></a> is present
in a compiled statement without a value now includes the key name
of the bound parameter in the error message.</p>
<a class="changelog-reference headerlink reference internal" href="#change-55d6c5d7c76b54deb2d68f5e6ee4e501">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-schema">
<h3>schema<a class="headerlink" href="#change-0.9.0-schema" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-32"><span class="target" id="change-eb0f69af2f52edcebc270889846a3f7d"><strong>[schema] [bug]</strong> </span><p>Fixed a regression caused by <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2812">#2812</a> where the repr() for
table and column names would fail if the name contained non-ascii
characters.</p>
<a class="changelog-reference headerlink reference internal" href="#change-eb0f69af2f52edcebc270889846a3f7d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2868">#2868</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-postgresql">
<h3>postgresql<a class="headerlink" href="#change-0.9.0-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-33"><span class="target" id="change-59782c38791a8565911ab651d5dc0df9"><strong>[postgresql] [feature]</strong> </span><p>Support for PostgreSQL JSON has been added, using the new
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.JSON" title="sqlalchemy.types.JSON"><code class="xref py py-class docutils literal notranslate"><span class="pre">JSON</span></code></a> type.   Huge thanks to Nathan Rice for
implementing and testing this.</p>
<a class="changelog-reference headerlink reference internal" href="#change-59782c38791a8565911ab651d5dc0df9">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2581">#2581</a></p>
</p>
</li>
<li><p id="change-0.9.0-34"><span class="target" id="change-e5ce163bd352387a69b6e6fedd542639"><strong>[postgresql] [feature]</strong> </span><p>Added support for PostgreSQL TSVECTOR via the
<a class="reference internal" href="../dialects/postgresql.html#sqlalchemy.dialects.postgresql.TSVECTOR" title="sqlalchemy.dialects.postgresql.TSVECTOR"><code class="xref py py-class docutils literal notranslate"><span class="pre">TSVECTOR</span></code></a> type.  Pull request courtesy
Noufal Ibrahim.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e5ce163bd352387a69b6e6fedd542639">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0-35"><span class="target" id="change-6c4b7c62d0cebe9f8e7fa158a55c506e"><strong>[postgresql] [bug]</strong> </span><p>Fixed bug where index reflection would mis-interpret indkey values
when using the pypostgresql adapter, which returns these values
as lists vs. psycopg2’s return type of string.</p>
<a class="changelog-reference headerlink reference internal" href="#change-6c4b7c62d0cebe9f8e7fa158a55c506e">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2855">#2855</a></p>
</p>
</li>
<li><p id="change-0.9.0-36"><span class="target" id="change-0d74908c0a46fa09168e385eecb4f0a1"><strong>[postgresql] [bug]</strong> </span><p>Now using psycopg2 UNICODEARRAY extension for handling unicode arrays
with psycopg2 + normal “native unicode” mode, in the same way the
UNICODE extension is used.</p>
<a class="changelog-reference headerlink reference internal" href="#change-0d74908c0a46fa09168e385eecb4f0a1">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0-37"><span class="target" id="change-278c2212115d7604aa6ba7694c5c5965"><strong>[postgresql] [bug]</strong> </span><p>Fixed bug where values within an ENUM weren’t escaped for single
quote signs.   Note that this is backwards-incompatible for existing
workarounds that manually escape the single quotes.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#migration-2878"><span class="std std-ref">PostgreSQL CREATE TYPE &lt;x&gt; AS ENUM now applies quoting to values</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-278c2212115d7604aa6ba7694c5c5965">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2878">#2878</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-mysql">
<h3>mysql<a class="headerlink" href="#change-0.9.0-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-38"><span class="target" id="change-aff523a757357ad13ae691047b8183cd"><strong>[mysql] [bug]</strong> </span><p>Improvements to the system by which SQL types generate within
<code class="docutils literal notranslate"><span class="pre">__repr__()</span></code>, particularly with regards to the MySQL integer/numeric/
character types which feature a wide variety of keyword arguments.
The <code class="docutils literal notranslate"><span class="pre">__repr__()</span></code> is important for use with Alembic autogenerate
for when Python code is rendered in a migration script.</p>
<a class="changelog-reference headerlink reference internal" href="#change-aff523a757357ad13ae691047b8183cd">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2893">#2893</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-mssql">
<h3>mssql<a class="headerlink" href="#change-0.9.0-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-39"><span class="target" id="change-9aad279410ec35f73c2ed835b9775263"><strong>[mssql] [bug] [firebird]</strong> </span><p>The “asdecimal” flag used with the <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a> type will now
work with Firebird as well as the mssql+pyodbc dialects; previously the
decimal conversion was not occurring.</p>
<a class="changelog-reference headerlink reference internal" href="#change-9aad279410ec35f73c2ed835b9775263">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0-40"><span class="target" id="change-f1ee7d7ea1eb2a0cb21a50ae1dea3fe9"><strong>[mssql] [bug] [pymssql]</strong> </span><p>Added “Net-Lib error during Connection reset by peer” message
to the list of messages checked for “disconnect” within the
pymssql dialect.  Courtesy John Anderson.</p>
<a class="changelog-reference headerlink reference internal" href="#change-f1ee7d7ea1eb2a0cb21a50ae1dea3fe9">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0-41"><span class="target" id="change-b65b88da0221c3f0bb0c2443185a5221"><strong>[mssql] [bug]</strong> </span><p>Fixed bug introduced in 0.8.0 where the <code class="docutils literal notranslate"><span class="pre">DROP</span> <span class="pre">INDEX</span></code>
statement for an index in MSSQL would render incorrectly if the
index were in an alternate schema; the schemaname/tablename
would be reversed.  The format has been also been revised to
match current MSSQL documentation.  Courtesy Derek Harland.</p>
<a class="changelog-reference headerlink reference internal" href="#change-b65b88da0221c3f0bb0c2443185a5221">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-oracle">
<h3>oracle<a class="headerlink" href="#change-0.9.0-oracle" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-42"><span class="target" id="change-9be5ac15b91d5ec132c4a6b689d5d15e"><strong>[oracle] [bug]</strong> </span><p>Added ORA-02396 “maximum idle time” error code to list of
“is disconnect” codes with cx_oracle.</p>
<a class="changelog-reference headerlink reference internal" href="#change-9be5ac15b91d5ec132c4a6b689d5d15e">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2864">#2864</a></p>
</p>
</li>
<li><p id="change-0.9.0-43"><span class="target" id="change-495a336b8096587d32bf1959ae9c2509"><strong>[oracle] [bug]</strong> </span><p>Fixed bug where Oracle <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> types given with no length
(e.g. for a <code class="docutils literal notranslate"><span class="pre">CAST</span></code> or similar) would incorrectly render <code class="docutils literal notranslate"><span class="pre">None</span> <span class="pre">CHAR</span></code>
or similar.</p>
<a class="changelog-reference headerlink reference internal" href="#change-495a336b8096587d32bf1959ae9c2509">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2870">#2870</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-firebird">
<h3>firebird<a class="headerlink" href="#change-0.9.0-firebird" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-44"><span class="target" id="change-0e80ff1217d1159ae0303de5c0ed4ec5"><strong>[firebird] [bug]</strong> </span><p>The firebird dialect will quote identifiers which begin with an
underscore.  Courtesy Treeve Jelbert.</p>
<a class="changelog-reference headerlink reference internal" href="#change-0e80ff1217d1159ae0303de5c0ed4ec5">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2897">#2897</a></p>
</p>
</li>
<li><p id="change-0.9.0-45"><span class="target" id="change-eea51d8b16bb72d519c6f5a9cb105561"><strong>[firebird] [bug]</strong> </span><p>Fixed bug in Firebird index reflection where the columns within the
index were not sorted correctly; they are now sorted
in order of RDB$FIELD_POSITION.</p>
<a class="changelog-reference headerlink reference internal" href="#change-eea51d8b16bb72d519c6f5a9cb105561">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0-46"><span class="target" id="change-70bdabe000861535a7e228956add9020"><strong>[firebird] [bug]</strong> </span><p>Changed the queries used by Firebird to list table and view names
to query from the <code class="docutils literal notranslate"><span class="pre">rdb$relations</span></code> view instead of the
<code class="docutils literal notranslate"><span class="pre">rdb$relation_fields</span></code> and <code class="docutils literal notranslate"><span class="pre">rdb$view_relations</span></code> views.
Variants of both the old and new queries are mentioned on many
FAQ and blogs, however the new queries are taken straight from
the “Firebird FAQ” which appears to be the most official source
of info.</p>
<a class="changelog-reference headerlink reference internal" href="#change-70bdabe000861535a7e228956add9020">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2898">#2898</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0-misc">
<h3>misc<a class="headerlink" href="#change-0.9.0-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0-47"><span class="target" id="change-577e7805c86d301deafe2f47a2840148"><strong>[removed]</strong> </span><p>The “informix” and “informixdb” dialects have been removed; the code
is now available as a separate repository on Bitbucket.   The IBM-DB
project has provided production-level Informix support since the
informixdb dialect was first added.</p>
<a class="changelog-reference headerlink reference internal" href="#change-577e7805c86d301deafe2f47a2840148">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0-48"><span class="target" id="change-b9609d3e6665e3b2e9cbc73bb84adebc"><strong>[bug] [declarative]</strong> </span><p>Error message when a string arg sent to <a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> which
doesn’t resolve to a class or mapper has been corrected to work
the same way as when a non-string arg is received, which indicates
the name of the relationship which had the configurational error.</p>
<a class="changelog-reference headerlink reference internal" href="#change-b9609d3e6665e3b2e9cbc73bb84adebc">¶</a><p>This change is also <strong>backported</strong> to: 0.8.5</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2888">#2888</a></p>
</p>
</li>
<li><p id="change-0.9.0-49"><span class="target" id="change-7b23b02498aded0119f08fe8df17cb20"><strong>[bug] [ext]</strong> </span><p>Fixed bug which prevented the <code class="docutils literal notranslate"><span class="pre">serializer</span></code> extension from working
correctly with table or column names that contain non-ASCII
characters.</p>
<a class="changelog-reference headerlink reference internal" href="#change-7b23b02498aded0119f08fe8df17cb20">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2869">#2869</a></p>
</p>
</li>
<li><p id="change-0.9.0-50"><span class="target" id="change-51a37bd7516f5c6879964cfd09f1be56"><strong>[bug] [examples]</strong> </span><p>Fixed bug which prevented history_meta recipe from working with
joined inheritance schemes more than one level deep.</p>
<a class="changelog-reference headerlink reference internal" href="#change-51a37bd7516f5c6879964cfd09f1be56">¶</a><p></p>
</p>
</li>
</ul>
</div>
</div>
<div class="section" id="change-0.9.0b1">
<h2 class="release-version">0.9.0b1<a class="headerlink" href="#change-0.9.0b1" title="Permalink to this headline">¶</a></h2>
Released: October 26, 2013<div class="section" id="change-0.9.0b1-general">
<h3>general<a class="headerlink" href="#change-0.9.0b1-general" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-0"><span class="target" id="change-63557d61147791e2c67e8fe819f1b2b2"><strong>[general] [feature] [py3k]</strong> </span><p>The C extensions are ported to Python 3 and will build under
any supported CPython 2 or 3 environment.</p>
<a class="changelog-reference headerlink reference internal" href="#change-63557d61147791e2c67e8fe819f1b2b2">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2161">#2161</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-1"><span class="target" id="change-e1f88f4751daaf8c4bf39213780dfc1f"><strong>[general] [feature] [py3k]</strong> </span><p>The codebase is now “in-place” for Python
2 and 3, the need to run 2to3 has been removed.
Compatibility is now against Python 2.6 on forward.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e1f88f4751daaf8c4bf39213780dfc1f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2671">#2671</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-2"><span class="target" id="change-0858791080deb02ea2ef1c8aec366f29"><strong>[general]</strong> </span><p>A large refactoring of packages has reorganized
the import structure of many Core modules as well as some aspects
of the ORM modules.  In particular <code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql</span></code> has been broken
out into several more modules than before so that the very large size
of <code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression</span></code> is now pared down.   The effort
has focused on a large reduction in import cycles.   Additionally,
the system of API functions in <code class="docutils literal notranslate"><span class="pre">sqlalchemy.sql.expression</span></code> and
<code class="docutils literal notranslate"><span class="pre">sqlalchemy.orm</span></code> has been reorganized to eliminate redundancy
in documentation between the functions vs. the objects they produce.</p>
<a class="changelog-reference headerlink reference internal" href="#change-0858791080deb02ea2ef1c8aec366f29">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-orm">
<h3>orm<a class="headerlink" href="#change-0.9.0b1-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-3"><span class="target" id="change-9262d71ee52f650e127ee71427812930"><strong>[orm] [feature]</strong> </span><p>Added new option to <a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> <code class="docutils literal notranslate"><span class="pre">distinct_target_key</span></code>.
This enables the subquery eager loader strategy to apply a DISTINCT
to the innermost SELECT subquery, to assist in the case where
duplicate rows are generated by the innermost query which corresponds
to this relationship (there’s not yet a general solution to the issue
of dupe rows within subquery eager loading, however, when joins outside
of the innermost subquery produce dupes).  When the flag
is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, the DISTINCT is rendered unconditionally, and when
it is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, DISTINCT is rendered if the innermost relationship
targets columns that do not comprise a full primary key.
The option defaults to False in 0.8 (e.g. off by default in all cases),
None in 0.9 (e.g. automatic by default).   Thanks to Alexander Koval
for help with this.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#change-2836"><span class="std std-ref">Subquery Eager Loading will apply DISTINCT to the innermost SELECT for some queries</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-9262d71ee52f650e127ee71427812930">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2836">#2836</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-4"><span class="target" id="change-7df1b4e6150537b72c4b758277a44288"><strong>[orm] [feature]</strong> </span><p>The association proxy now returns <code class="docutils literal notranslate"><span class="pre">None</span></code> when fetching a scalar
attribute off of a scalar relationship, where the scalar relationship
itself points to <code class="docutils literal notranslate"><span class="pre">None</span></code>, instead of raising an <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#migration-2810"><span class="std std-ref">Association Proxy Missing Scalar returns None</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-7df1b4e6150537b72c4b758277a44288">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2810">#2810</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-5"><span class="target" id="change-17ada80ccb89c1e1109f3190e75092b5"><strong>[orm] [feature]</strong> </span><p>Added new method <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.state.AttributeState.load_history" title="sqlalchemy.orm.state.AttributeState.load_history"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AttributeState.load_history()</span></code></a>, works like
<a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.state.AttributeState.history" title="sqlalchemy.orm.state.AttributeState.history"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AttributeState.history</span></code></a> but also fires loader callables.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#change-2787"><span class="std std-ref">attributes.get_history() will query from the DB by default if value not present</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-17ada80ccb89c1e1109f3190e75092b5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2787">#2787</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-6"><span class="target" id="change-3108052346d72a5b370a5dd64588efa8"><strong>[orm] [feature]</strong> </span><p>Added a new load option <a class="reference internal" href="../orm/loading_columns.html#sqlalchemy.orm.load_only" title="sqlalchemy.orm.load_only"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_only()</span></code></a>.  This allows a series
of column names to be specified as loading “only” those attributes,
deferring the rest.</p>
<a class="changelog-reference headerlink reference internal" href="#change-3108052346d72a5b370a5dd64588efa8">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1418">#1418</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-7"><span class="target" id="change-44e23631c9a2cd3d7341ba488a0ec775"><strong>[orm] [feature]</strong> </span><p>The system of loader options has been entirely rearchitected to build
upon a much more comprehensive base, the <a class="reference internal" href="../orm/loading_relationships.html#sqlalchemy.orm.Load" title="sqlalchemy.orm.Load"><code class="xref py py-class docutils literal notranslate"><span class="pre">Load</span></code></a> object.  This
base allows any common loader option like <a class="reference internal" href="../orm/loading_relationships.html#sqlalchemy.orm.joinedload" title="sqlalchemy.orm.joinedload"><code class="xref py py-func docutils literal notranslate"><span class="pre">joinedload()</span></code></a>,
<a class="reference internal" href="../orm/loading_columns.html#sqlalchemy.orm.defer" title="sqlalchemy.orm.defer"><code class="xref py py-func docutils literal notranslate"><span class="pre">defer()</span></code></a>, etc. to be used in a “chained” style for the purpose
of specifying options down a path, such as <code class="docutils literal notranslate"><span class="pre">joinedload(&quot;foo&quot;).subqueryload(&quot;bar&quot;)</span></code>.
The new system supersedes the usage of dot-separated path names,
multiple attributes within options, and the usage of <code class="docutils literal notranslate"><span class="pre">_all()</span></code> options.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#feature-1418"><span class="std std-ref">New Query Options API; load_only() option</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-44e23631c9a2cd3d7341ba488a0ec775">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1418">#1418</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-8"><span class="target" id="change-a1bb82ee5cb482c0985d71e1e82e3b50"><strong>[orm] [feature]</strong> </span><p>The <a class="reference internal" href="../orm/composites.html#sqlalchemy.orm.composite" title="sqlalchemy.orm.composite"><code class="xref py py-func docutils literal notranslate"><span class="pre">composite()</span></code></a> construct now maintains the return object
when used in a column-oriented <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a>, rather than expanding
out into individual columns.  This makes use of the new <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Bundle" title="sqlalchemy.orm.query.Bundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bundle</span></code></a>
feature internally.  This behavior is backwards incompatible; to
select from a composite column which will expand out, use
<code class="docutils literal notranslate"><span class="pre">MyClass.some_composite.clauses</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#migration-2824"><span class="std std-ref">Composite attributes are now returned as their object form when queried on a per-attribute basis</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-a1bb82ee5cb482c0985d71e1e82e3b50">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2824">#2824</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-9"><span class="target" id="change-e3d4b8c06aa3216a8f10452f097a17ae"><strong>[orm] [feature]</strong> </span><p>A new construct <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Bundle" title="sqlalchemy.orm.query.Bundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bundle</span></code></a> is added, which allows for specification
of groups of column expressions to a <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> construct.
The group of columns are returned as a single tuple by default.  The
behavior of <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Bundle" title="sqlalchemy.orm.query.Bundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bundle</span></code></a> can be overridden however to provide
any sort of result processing to the returned row.  The behavior
of <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Bundle" title="sqlalchemy.orm.query.Bundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bundle</span></code></a> is also embedded into composite attributes now
when they are used in a column-oriented <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#change-2824"><span class="std std-ref">Column Bundles for ORM queries</span></a></p>
<p><a class="reference internal" href="migration_09.html#migration-2824"><span class="std std-ref">Composite attributes are now returned as their object form when queried on a per-attribute basis</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-e3d4b8c06aa3216a8f10452f097a17ae">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2824">#2824</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-10"><span class="target" id="change-ebb167a81b388b8ac090fa33246c48a2"><strong>[orm] [feature]</strong> </span><p>The <code class="docutils literal notranslate"><span class="pre">version_id_generator</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">Mapper</span></code> can now be specified
to rely upon server generated version identifiers, using triggers
or other database-provided versioning features, or via an optional programmatic
value, by setting <code class="docutils literal notranslate"><span class="pre">version_id_generator=False</span></code>.
When using a server-generated version identifier, the ORM will use RETURNING when
available to immediately
load the new version value, else it will emit a second SELECT.</p>
<a class="changelog-reference headerlink reference internal" href="#change-ebb167a81b388b8ac090fa33246c48a2">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2793">#2793</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-11"><span class="target" id="change-8ee7cac9783d870a07c279041dd11bc9"><strong>[orm] [feature]</strong> </span><p>The <code class="docutils literal notranslate"><span class="pre">eager_defaults</span></code> flag of <a class="reference internal" href="../orm/mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> will now allow the
newly generated default values to be fetched using an inline
RETURNING clause, rather than a second SELECT statement, for backends
that support RETURNING.</p>
<a class="changelog-reference headerlink reference internal" href="#change-8ee7cac9783d870a07c279041dd11bc9">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2793">#2793</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-12"><span class="target" id="change-03c6ce5802904e9ebc488ea78ab24b78"><strong>[orm] [feature]</strong> </span><p>Added a new attribute <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.info" title="sqlalchemy.orm.session.Session.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.info</span></code></a> to <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>;
this is a dictionary where applications can store arbitrary
data local to a <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>.
The contents of <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session.info" title="sqlalchemy.orm.session.Session.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.info</span></code></a> can be also be initialized
using the <code class="docutils literal notranslate"><span class="pre">info</span></code> argument of <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> or
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.sessionmaker" title="sqlalchemy.orm.session.sessionmaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">sessionmaker</span></code></a>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-03c6ce5802904e9ebc488ea78ab24b78">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0b1-13"><span class="target" id="change-3fab266a28f41e49452166ecc367921d"><strong>[orm] [feature]</strong> </span><p>Removal of event listeners is now implemented.    The feature is
provided via the <a class="reference internal" href="../core/event.html#sqlalchemy.event.remove" title="sqlalchemy.event.remove"><code class="xref py py-func docutils literal notranslate"><span class="pre">remove()</span></code></a> function.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#feature-2268"><span class="std std-ref">Event Removal API</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-3fab266a28f41e49452166ecc367921d">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2268">#2268</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-14"><span class="target" id="change-0dc7109a8a2359edd8e21d7ed70a1462"><strong>[orm] [feature]</strong> </span><p>The mechanism by which attribute events pass along an
<code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeImpl</span></code> as an “initiator” token has been changed;
the object is now an event-specific object called <a class="reference internal" href="../orm/internals.html#sqlalchemy.orm.attributes.Event" title="sqlalchemy.orm.attributes.Event"><code class="xref py py-class docutils literal notranslate"><span class="pre">Event</span></code></a>.
Additionally, the attribute system no longer halts events based
on a matching “initiator” token; this logic has been moved to be
specific to ORM backref event handlers, which are the typical source
of the re-propagation of an attribute event onto subsequent append/set/remove
operations.  End user code which emulates the behavior of backrefs
must now ensure that recursive event propagation schemes are halted,
if the scheme does not use the backref handlers.   Using this new system,
backref handlers can now perform a
“two-hop” operation when an object is appended to a collection,
associated with a new many-to-one, de-associated with the previous
many-to-one, and then removed from a previous collection.   Before this
change, the last step of removal from the previous collection would
not occur.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#migration-2789"><span class="std std-ref">Backref handlers can now propagate more than one level deep</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-0dc7109a8a2359edd8e21d7ed70a1462">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2789">#2789</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-15"><span class="target" id="change-0a9cba0c775121ff87389c9d5a411292"><strong>[orm] [feature]</strong> </span><p>A major change regarding how the ORM constructs joins where
the right side is itself a join or left outer join.   The ORM
is now configured to allow simple nesting of joins of
the form <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">JOIN</span> <span class="pre">(b</span> <span class="pre">JOIN</span> <span class="pre">c</span> <span class="pre">ON</span> <span class="pre">b.id=c.id)</span> <span class="pre">ON</span> <span class="pre">a.id=b.id</span></code>,
rather than forcing the right side into a <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> subquery.
This should allow significant performance improvements on most
backends, most particularly MySQL.   The one database backend
that has for many years held back this change, SQLite, is now addressed by
moving the production of the <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> subquery from the
ORM to the SQL compiler; so that a right-nested join on SQLite will still
ultimately render with a <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>, while all other backends
are no longer impacted by this workaround.</p>
<p>As part of this change, a new argument <code class="docutils literal notranslate"><span class="pre">flat=True</span></code> has been added
to the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.aliased" title="sqlalchemy.orm.aliased"><code class="xref py py-func docutils literal notranslate"><span class="pre">aliased()</span></code></a>, <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Join.alias" title="sqlalchemy.sql.expression.Join.alias"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Join.alias()</span></code></a>, and
<a class="reference internal" href="../orm/inheritance_loading.html#sqlalchemy.orm.with_polymorphic" title="sqlalchemy.orm.with_polymorphic"><code class="xref py py-func docutils literal notranslate"><span class="pre">with_polymorphic()</span></code></a> functions, which allows an “alias” of a
JOIN to be produced which applies an anonymous alias to each component
table within the join, rather than producing a subquery.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#feature-joins-09"><span class="std std-ref">Many JOIN and LEFT OUTER JOIN expressions will no longer be wrapped in (SELECT * FROM ..) AS ANON_1</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-0a9cba0c775121ff87389c9d5a411292">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2587">#2587</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-16"><span class="target" id="change-a0c2b843b3a7a6f41d90792cf10e7e3d"><strong>[orm] [bug]</strong> </span><p>Fixed bug where using an annotation such as <a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.remote" title="sqlalchemy.orm.remote"><code class="xref py py-func docutils literal notranslate"><span class="pre">remote()</span></code></a> or
<a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.foreign" title="sqlalchemy.orm.foreign"><code class="xref py py-func docutils literal notranslate"><span class="pre">foreign()</span></code></a> on a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> before association with a parent
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> could produce issues related to the parent table not
rendering within joins, due to the inherent copy operation performed
by an annotation.</p>
<a class="changelog-reference headerlink reference internal" href="#change-a0c2b843b3a7a6f41d90792cf10e7e3d">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2813">#2813</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-17"><span class="target" id="change-ef9f61eaff6e736d97c7a7096da10f37"><strong>[orm] [bug]</strong> </span><p>Fixed bug where <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.exists" title="sqlalchemy.orm.query.Query.exists"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.exists()</span></code></a> failed to work correctly
without any WHERE criterion.  Courtesy Vladimir Magamedov.</p>
<a class="changelog-reference headerlink reference internal" href="#change-ef9f61eaff6e736d97c7a7096da10f37">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2818">#2818</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-18"><span class="target" id="change-4315e5745177d007461f7bc0247cbb12"><strong>[orm] [bug]</strong> </span><p>Fixed a potential issue in an ordered sequence implementation used
by the ORM to iterate mapper hierarchies; under the Jython interpreter
this implementation wasn’t ordered, even though cPython and PyPy
maintained ordering.</p>
<a class="changelog-reference headerlink reference internal" href="#change-4315e5745177d007461f7bc0247cbb12">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2794">#2794</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-19"><span class="target" id="change-e0cad55b3c8cd8dfb6d0ee70f9dfe7d0"><strong>[orm] [bug]</strong> </span><p>Fixed bug in ORM-level event registration where the “raw” or
“propagate” flags could potentially be mis-configured in some
“unmapped base class” configurations.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e0cad55b3c8cd8dfb6d0ee70f9dfe7d0">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2786">#2786</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-20"><span class="target" id="change-e1a708dde5288510230755ac690de45b"><strong>[orm] [bug]</strong> </span><p>A performance fix related to the usage of the <a class="reference internal" href="../orm/loading_columns.html#sqlalchemy.orm.defer" title="sqlalchemy.orm.defer"><code class="xref py py-func docutils literal notranslate"><span class="pre">defer()</span></code></a> option
when loading mapped entities.   The function overhead of applying
a per-object deferred callable to an instance at load time was
significantly higher than that of just loading the data from the row
(note that <code class="docutils literal notranslate"><span class="pre">defer()</span></code> is meant to reduce DB/network overhead, not
necessarily function call count); the function call overhead is now
less than that of loading data from the column in all cases.  There
is also a reduction in the number of “lazy callable” objects created
per load from N (total deferred values in the result) to 1 (total
number of deferred cols).</p>
<a class="changelog-reference headerlink reference internal" href="#change-e1a708dde5288510230755ac690de45b">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2778">#2778</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-21"><span class="target" id="change-8a5cddc8cb97dec46f5e9e5bf4c4d922"><strong>[orm] [bug]</strong> </span><p>Fixed bug whereby attribute history functions would fail
when an object we moved from “persistent” to “pending”
using the <a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.session.make_transient" title="sqlalchemy.orm.session.make_transient"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_transient()</span></code></a> function, for operations
involving collection-based backrefs.</p>
<a class="changelog-reference headerlink reference internal" href="#change-8a5cddc8cb97dec46f5e9e5bf4c4d922">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2773">#2773</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-22"><span class="target" id="change-dd4b79b5d51e7c3f475fb2adec886c01"><strong>[orm] [bug]</strong> </span><p>A warning is emitted when trying to flush an object of an inherited
class where the polymorphic discriminator has been assigned
to a value that is invalid for the class.</p>
<a class="changelog-reference headerlink reference internal" href="#change-dd4b79b5d51e7c3f475fb2adec886c01">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2750">#2750</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-23"><span class="target" id="change-d8b5c05c64292219e59d34a4d1d9edfe"><strong>[orm] [bug]</strong> </span><p>Fixed bug in polymorphic SQL generation where multiple joined-inheritance
entities against the same base class joined to each other as well
would not track columns on the base table independently of each other if
the string of joins were more than two entities long.</p>
<a class="changelog-reference headerlink reference internal" href="#change-d8b5c05c64292219e59d34a4d1d9edfe">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2759">#2759</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-24"><span class="target" id="change-0df6c969856f2e6e6ddbed5c093b58f7"><strong>[orm] [bug]</strong> </span><p>Fixed bug where sending a composite attribute into <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.order_by" title="sqlalchemy.orm.query.Query.order_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.order_by()</span></code></a>
would produce a parenthesized expression not accepted by some databases.</p>
<a class="changelog-reference headerlink reference internal" href="#change-0df6c969856f2e6e6ddbed5c093b58f7">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2754">#2754</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-25"><span class="target" id="change-62648da125cd1e7e856bccba57c1c4b9"><strong>[orm] [bug]</strong> </span><p>Fixed the interaction between composite attributes and
the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.aliased" title="sqlalchemy.orm.aliased"><code class="xref py py-func docutils literal notranslate"><span class="pre">aliased()</span></code></a> function.  Previously, composite attributes
wouldn’t work correctly in comparison operations when aliasing
was applied.</p>
<a class="changelog-reference headerlink reference internal" href="#change-62648da125cd1e7e856bccba57c1c4b9">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2755">#2755</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-26"><span class="target" id="change-a33d0ee0457fdf8d843d390aca84d3e7"><strong>[orm] [bug] [ext]</strong> </span><p>Fixed bug where <a class="reference internal" href="../orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableDict" title="sqlalchemy.ext.mutable.MutableDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">MutableDict</span></code></a> didn’t report a change event
when <code class="docutils literal notranslate"><span class="pre">clear()</span></code> was called.</p>
<a class="changelog-reference headerlink reference internal" href="#change-a33d0ee0457fdf8d843d390aca84d3e7">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2730">#2730</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-27"><span class="target" id="change-e7e01f7d15796a940fa6608c2a24096c"><strong>[orm] [bug]</strong> </span><p>Fixed bug where list instrumentation would fail to represent a
setslice of <code class="docutils literal notranslate"><span class="pre">[0:0]</span></code> correctly, which in particular could occur
when using <code class="docutils literal notranslate"><span class="pre">insert(0,</span> <span class="pre">item)</span></code> with the association proxy.  Due
to some quirk in Python collections, the issue was much more likely
with Python 3 rather than 2.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e7e01f7d15796a940fa6608c2a24096c">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3, 0.8.0b1</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2807">#2807</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-28"><span class="target" id="change-57cba062cac3ea3d4b9c20737f356339"><strong>[orm] [bug]</strong> </span><p><a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.attributes.get_history" title="sqlalchemy.orm.attributes.get_history"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_history()</span></code></a> when used with a scalar column-mapped
attribute will now honor the “passive” flag
passed to it; as this defaults to <code class="docutils literal notranslate"><span class="pre">PASSIVE_OFF</span></code>, the function will
by default query the database if the value is not present.
This is a behavioral change vs. 0.8.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#change-2787"><span class="std std-ref">attributes.get_history() will query from the DB by default if value not present</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-57cba062cac3ea3d4b9c20737f356339">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2787">#2787</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-29"><span class="target" id="change-077302a77471edd431eee122414f0ff1"><strong>[orm] [bug] [associationproxy]</strong> </span><p>Added additional criterion to the ==, != comparators, used with
scalar values, for comparisons to None to also take into account
the association record itself being non-present, in addition to the
existing test for the scalar endpoint on the association record
being NULL.  Previously, comparing <code class="docutils literal notranslate"><span class="pre">Cls.scalar</span> <span class="pre">==</span> <span class="pre">None</span></code> would return
records for which <code class="docutils literal notranslate"><span class="pre">Cls.associated</span></code> were present and
<code class="docutils literal notranslate"><span class="pre">Cls.associated.scalar</span></code> is None, but not rows for which
<code class="docutils literal notranslate"><span class="pre">Cls.associated</span></code> is non-present.  More significantly, the
inverse operation <code class="docutils literal notranslate"><span class="pre">Cls.scalar</span> <span class="pre">!=</span> <span class="pre">None</span></code> <em>would</em> return <code class="docutils literal notranslate"><span class="pre">Cls</span></code>
rows for which <code class="docutils literal notranslate"><span class="pre">Cls.associated</span></code> was non-present.</p>
<p>The case for <code class="docutils literal notranslate"><span class="pre">Cls.scalar</span> <span class="pre">!=</span> <span class="pre">'somevalue'</span></code> is also modified
to act more like a direct SQL comparison; only rows for
which <code class="docutils literal notranslate"><span class="pre">Cls.associated</span></code> is present and <code class="docutils literal notranslate"><span class="pre">Associated.scalar</span></code>
is non-NULL and not equal to <code class="docutils literal notranslate"><span class="pre">'somevalue'</span></code> are returned.
Previously, this would be a simple <code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">EXISTS</span></code>.</p>
<p>Also added a special use case where you
can call <code class="docutils literal notranslate"><span class="pre">Cls.scalar.has()</span></code> with no arguments,
when <code class="docutils literal notranslate"><span class="pre">Cls.scalar</span></code> is a column-based value - this returns whether or
not <code class="docutils literal notranslate"><span class="pre">Cls.associated</span></code> has any rows present, regardless of whether
or not <code class="docutils literal notranslate"><span class="pre">Cls.associated.scalar</span></code> is NULL or not.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#migration-2751"><span class="std std-ref">Association Proxy SQL Expression Improvements and Fixes</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-077302a77471edd431eee122414f0ff1">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2751">#2751</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-30"><span class="target" id="change-04b284e1a49effb2ce153e574641dfb0"><strong>[orm] [bug]</strong> </span><p>Fixed an obscure bug where the wrong results would be
fetched when joining/joinedloading across a many-to-many
relationship to a single-table-inheriting
subclass with a specific discriminator value, due to “secondary”
rows that would come back.  The “secondary” and right-side
tables are now inner joined inside of parenthesis for all
ORM joins on many-to-many relationships so that the left-&gt;right
join can accurately filtered.  This change was made possible
by finally addressing the issue with right-nested joins
outlined in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2587">#2587</a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#feature-joins-09"><span class="std std-ref">Many JOIN and LEFT OUTER JOIN expressions will no longer be wrapped in (SELECT * FROM ..) AS ANON_1</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-04b284e1a49effb2ce153e574641dfb0">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2369">#2369</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-31"><span class="target" id="change-6856f4c9574c2e7f8cae541a3af37c17"><strong>[orm] [bug]</strong> </span><p>The “auto-aliasing” behavior of the <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.select_from()</span></code></a>
method has been turned off.  The specific behavior is now
available via a new method <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.select_entity_from" title="sqlalchemy.orm.query.Query.select_entity_from"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.select_entity_from()</span></code></a>.
The auto-aliasing behavior here was never well documented and
is generally not what’s desired, as <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.select_from" title="sqlalchemy.orm.query.Query.select_from"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.select_from()</span></code></a>
has become more oriented towards controlling how a JOIN is
rendered.  <a class="reference internal" href="../orm/query.html#sqlalchemy.orm.query.Query.select_entity_from" title="sqlalchemy.orm.query.Query.select_entity_from"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.select_entity_from()</span></code></a> will also be made
available in 0.8 so that applications which rely on the auto-aliasing
can shift their applications to use this method.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#migration-2736"><span class="std std-ref">_query.Query.select_from() no longer applies the clause to corresponding entities</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-6856f4c9574c2e7f8cae541a3af37c17">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2736">#2736</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-orm-declarative">
<h3>orm declarative<a class="headerlink" href="#change-0.9.0b1-orm-declarative" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-32"><span class="target" id="change-928ad6a6f0e7bf2d61add68c58d2693a"><strong>[feature] [declarative] [orm]</strong> </span><p>Added a convenience class decorator <a class="reference internal" href="../orm/extensions/declarative/api.html#sqlalchemy.ext.declarative.as_declarative" title="sqlalchemy.ext.declarative.as_declarative"><code class="xref py py-func docutils literal notranslate"><span class="pre">as_declarative()</span></code></a>, is
a wrapper for <a class="reference internal" href="../orm/extensions/declarative/api.html#sqlalchemy.ext.declarative.declarative_base" title="sqlalchemy.ext.declarative.declarative_base"><code class="xref py py-func docutils literal notranslate"><span class="pre">declarative_base()</span></code></a> which allows an existing base
class to be applied using a nifty class-decorated approach.</p>
<a class="changelog-reference headerlink reference internal" href="#change-928ad6a6f0e7bf2d61add68c58d2693a">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-33"><span class="target" id="change-fa2beb10ebb49a0f8c15349cf5a7ca72"><strong>[feature] [declarative] [orm]</strong> </span><p>ORM descriptors such as hybrid properties can now be referenced
by name in a string argument used with <code class="docutils literal notranslate"><span class="pre">order_by</span></code>,
<code class="docutils literal notranslate"><span class="pre">primaryjoin</span></code>, or similar in <a class="reference internal" href="../orm/relationship_api.html#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>,
in addition to column-bound attributes.</p>
<a class="changelog-reference headerlink reference internal" href="#change-fa2beb10ebb49a0f8c15349cf5a7ca72">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2761">#2761</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-engine">
<h3>engine<a class="headerlink" href="#change-0.9.0b1-engine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-34"><span class="target" id="change-9457a7d4378c3c1d2d029acff304883b"><strong>[engine] [feature]</strong> </span><p><code class="docutils literal notranslate"><span class="pre">repr()</span></code> for the <a class="reference internal" href="../core/engines.html#sqlalchemy.engine.url.URL" title="sqlalchemy.engine.url.URL"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></a> of an <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
will now conceal the password using asterisks.
Courtesy Gunnlaugur Þór Briem.</p>
<a class="changelog-reference headerlink reference internal" href="#change-9457a7d4378c3c1d2d029acff304883b">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2821">#2821</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-35"><span class="target" id="change-d27b9f0357f06e9cf95fd1246c8052ae"><strong>[engine] [feature]</strong> </span><p>New events added to <a class="reference internal" href="../core/events.html#sqlalchemy.events.ConnectionEvents" title="sqlalchemy.events.ConnectionEvents"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConnectionEvents</span></code></a>:</p>
<ul>
<li><p><a class="reference internal" href="../core/events.html#sqlalchemy.events.ConnectionEvents.engine_connect" title="sqlalchemy.events.ConnectionEvents.engine_connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.engine_connect()</span></code></a></p></li>
<li><p><a class="reference internal" href="../core/events.html#sqlalchemy.events.ConnectionEvents.set_connection_execution_options" title="sqlalchemy.events.ConnectionEvents.set_connection_execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.set_connection_execution_options()</span></code></a></p></li>
<li><p><a class="reference internal" href="../core/events.html#sqlalchemy.events.ConnectionEvents.set_engine_execution_options" title="sqlalchemy.events.ConnectionEvents.set_engine_execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConnectionEvents.set_engine_execution_options()</span></code></a></p></li>
</ul>
<a class="changelog-reference headerlink reference internal" href="#change-d27b9f0357f06e9cf95fd1246c8052ae">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2770">#2770</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-36"><span class="target" id="change-3d8267e6caa813efc145b77d062c77ad"><strong>[engine] [bug] [oracle]</strong> </span><p>Dialect.initialize() is not called a second time if an <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine" title="sqlalchemy.engine.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>
is recreated, due to a disconnect error.   This fixes a particular
issue in the Oracle 8 dialect, but in general the dialect.initialize()
phase should only be once per dialect.</p>
<a class="changelog-reference headerlink reference internal" href="#change-3d8267e6caa813efc145b77d062c77ad">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2776">#2776</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-37"><span class="target" id="change-155adccbc41937b6cb1bc83c19fd47ef"><strong>[engine] [bug] [pool]</strong> </span><p>Fixed bug where <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.QueuePool" title="sqlalchemy.pool.QueuePool"><code class="xref py py-class docutils literal notranslate"><span class="pre">QueuePool</span></code></a> would lose the correct
checked out count if an existing pooled connection failed to reconnect
after an invalidate or recycle event.</p>
<a class="changelog-reference headerlink reference internal" href="#change-155adccbc41937b6cb1bc83c19fd47ef">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2772">#2772</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-38"><span class="target" id="change-e8091dd32fb1ad01f0003ca4b9687bf5"><strong>[engine] [bug]</strong> </span><p>Fixed bug where the <code class="docutils literal notranslate"><span class="pre">reset_on_return</span></code> argument to various <a class="reference internal" href="../core/pooling.html#sqlalchemy.pool.Pool" title="sqlalchemy.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a>
implementations would not be propagated when the pool was regenerated.
Courtesy Eevee.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e8091dd32fb1ad01f0003ca4b9687bf5">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-39"><span class="target" id="change-eb0b93a1244b5f1389a13544c801b4cf"><strong>[engine] [bug]</strong> </span><p>The regexp used by the <a class="reference internal" href="../core/engines.html#sqlalchemy.engine.url.make_url" title="sqlalchemy.engine.url.make_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_url()</span></code></a> function now parses
ipv6 addresses, e.g. surrounded by brackets.</p>
<a class="changelog-reference headerlink reference internal" href="#change-eb0b93a1244b5f1389a13544c801b4cf">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3, 0.8.0b1</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2851">#2851</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-40"><span class="target" id="change-8fe08fa349b1117af24feae4b1a76bc5"><strong>[engine] [bug]</strong> </span><p>The method signature of <a class="reference internal" href="../core/internals.html#sqlalchemy.engine.interfaces.Dialect.reflecttable" title="sqlalchemy.engine.interfaces.Dialect.reflecttable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Dialect.reflecttable()</span></code></a>, which in
all known cases is provided by <a class="reference internal" href="../core/internals.html#sqlalchemy.engine.default.DefaultDialect" title="sqlalchemy.engine.default.DefaultDialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">DefaultDialect</span></code></a>, has been
tightened to expect <code class="docutils literal notranslate"><span class="pre">include_columns</span></code> and <code class="docutils literal notranslate"><span class="pre">exclude_columns</span></code>
arguments without any kw option, reducing ambiguity - previously
<code class="docutils literal notranslate"><span class="pre">exclude_columns</span></code> was missing.</p>
<a class="changelog-reference headerlink reference internal" href="#change-8fe08fa349b1117af24feae4b1a76bc5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2748">#2748</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-sql">
<h3>sql<a class="headerlink" href="#change-0.9.0b1-sql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-41"><span class="target" id="change-e911a8b7deaa9ca6726dfc5d21dfd76d"><strong>[sql] [feature]</strong> </span><p>Added support for “unique constraint” reflection, via the
<a class="reference internal" href="../core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_unique_constraints" title="sqlalchemy.engine.reflection.Inspector.get_unique_constraints"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Inspector.get_unique_constraints()</span></code></a> method.
Thanks for Roman Podolyaka for the patch.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e911a8b7deaa9ca6726dfc5d21dfd76d">¶</a><p>This change is also <strong>backported</strong> to: 0.8.4</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1443">#1443</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-42"><span class="target" id="change-93cc634b6be87be3a5f50c6295f3ece2"><strong>[sql] [feature]</strong> </span><p>The <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.update" title="sqlalchemy.sql.expression.update"><code class="xref py py-func docutils literal notranslate"><span class="pre">update()</span></code></a>, <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert()</span></code></a>, and <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.delete" title="sqlalchemy.sql.expression.delete"><code class="xref py py-func docutils literal notranslate"><span class="pre">delete()</span></code></a> constructs
will now interpret ORM entities as target tables to be operated upon,
e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="k">import</span> <span class="n">insert</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">delete</span>

<span class="n">ins</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">SomeMappedClass</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="n">del_</span> <span class="o">=</span> <span class="n">delete</span><span class="p">(</span><span class="n">SomeMappedClass</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">SomeMappedClass</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">upd</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">SomeMappedClass</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">SomeMappedClass</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ed&#39;</span><span class="p">)</span></pre></div>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-93cc634b6be87be3a5f50c6295f3ece2">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-43"><span class="target" id="change-634c840bd558d84c2b0aeee85ce399c3"><strong>[sql] [feature] [mysql] [postgresql]</strong> </span><p>The PostgreSQL and MySQL dialects now support reflection/inspection
of foreign key options, including ON UPDATE, ON DELETE.  PostgreSQL
also reflects MATCH, DEFERRABLE, and INITIALLY.  Courtesy ijl.</p>
<a class="changelog-reference headerlink reference internal" href="#change-634c840bd558d84c2b0aeee85ce399c3">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2183">#2183</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-44"><span class="target" id="change-d24a04a8befc766ba1bf79f8656487a5"><strong>[sql] [feature]</strong> </span><p>A <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.bindparam" title="sqlalchemy.sql.expression.bindparam"><code class="xref py py-func docutils literal notranslate"><span class="pre">bindparam()</span></code></a> construct with a “null” type (e.g. no type
specified) is now copied when used in a typed expression, and the
new copy is assigned the actual type of the compared column.  Previously,
this logic would occur on the given <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.bindparam" title="sqlalchemy.sql.expression.bindparam"><code class="xref py py-func docutils literal notranslate"><span class="pre">bindparam()</span></code></a> in place.
Additionally, a similar process now occurs for <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.bindparam" title="sqlalchemy.sql.expression.bindparam"><code class="xref py py-func docutils literal notranslate"><span class="pre">bindparam()</span></code></a> constructs
passed to <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.ValuesBase.values" title="sqlalchemy.sql.expression.ValuesBase.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.values()</span></code></a> for an <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert" title="sqlalchemy.sql.expression.Insert"><code class="xref py py-class docutils literal notranslate"><span class="pre">Insert</span></code></a> or
<a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Update" title="sqlalchemy.sql.expression.Update"><code class="xref py py-class docutils literal notranslate"><span class="pre">Update</span></code></a> construct, within the compilation phase of the
construct.</p>
<p>These are both subtle behavioral changes which may impact some
usages.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#migration-2850"><span class="std std-ref">A bindparam() construct with no type gets upgraded via copy when a type is available</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-d24a04a8befc766ba1bf79f8656487a5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2850">#2850</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-45"><span class="target" id="change-39321a75ce7fa62c42a70b5096452d0e"><strong>[sql] [feature]</strong> </span><p>An overhaul of expression handling for special symbols particularly
with conjunctions, e.g.
<code class="docutils literal notranslate"><span class="pre">None</span></code> <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.null" title="sqlalchemy.sql.expression.null"><code class="xref py py-func docutils literal notranslate"><span class="pre">null()</span></code></a> <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.true" title="sqlalchemy.sql.expression.true"><code class="xref py py-func docutils literal notranslate"><span class="pre">true()</span></code></a>
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.false" title="sqlalchemy.sql.expression.false"><code class="xref py py-func docutils literal notranslate"><span class="pre">false()</span></code></a>, including consistency in rendering NULL
in conjunctions, “short-circuiting” of <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.and_" title="sqlalchemy.sql.expression.and_"><code class="xref py py-func docutils literal notranslate"><span class="pre">and_()</span></code></a> and <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.or_" title="sqlalchemy.sql.expression.or_"><code class="xref py py-func docutils literal notranslate"><span class="pre">or_()</span></code></a>
expressions which contain boolean constants, and rendering of
boolean constants and expressions as compared to “1” or “0” for backends
that don’t feature <code class="docutils literal notranslate"><span class="pre">true</span></code>/<code class="docutils literal notranslate"><span class="pre">false</span></code> constants.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#migration-2804"><span class="std std-ref">Improved rendering of Boolean constants, NULL constants, conjunctions</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-39321a75ce7fa62c42a70b5096452d0e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2734">#2734</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2804">#2804</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2823">#2823</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-46"><span class="target" id="change-272e70220cd05bb94293b58f14259825"><strong>[sql] [feature]</strong> </span><p>The typing system now handles the task of rendering “literal bind” values,
e.g. values that are normally bound parameters but due to context must
be rendered as strings, typically within DDL constructs such as
CHECK constraints and indexes (note that “literal bind” values
become used by DDL as of <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2742">#2742</a>).  A new method
<a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine.literal_processor" title="sqlalchemy.types.TypeEngine.literal_processor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TypeEngine.literal_processor()</span></code></a> serves as the base, and
<a class="reference internal" href="../core/custom_types.html#sqlalchemy.types.TypeDecorator.process_literal_param" title="sqlalchemy.types.TypeDecorator.process_literal_param"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TypeDecorator.process_literal_param()</span></code></a> is added to allow wrapping
of a native literal rendering method.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#change-2838"><span class="std std-ref">The typing system now handles the task of rendering “literal bind” values</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-272e70220cd05bb94293b58f14259825">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2838">#2838</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-47"><span class="target" id="change-98eded5d80636b193ea09e3c9865f4a1"><strong>[sql] [feature]</strong> </span><p>The <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table.tometadata" title="sqlalchemy.schema.Table.tometadata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Table.tometadata()</span></code></a> method now produces copies of
all <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.SchemaItem.info" title="sqlalchemy.schema.SchemaItem.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SchemaItem.info</span></code></a> dictionaries from all <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.SchemaItem" title="sqlalchemy.schema.SchemaItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">SchemaItem</span></code></a>
objects within the structure including columns, constraints,
foreign keys, etc.   As these dictionaries
are copies, they are independent of the original dictionary.
Previously, only the <code class="docutils literal notranslate"><span class="pre">.info</span></code> dictionary of <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> was transferred
within this operation, and it was only linked in place, not copied.</p>
<a class="changelog-reference headerlink reference internal" href="#change-98eded5d80636b193ea09e3c9865f4a1">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2716">#2716</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-48"><span class="target" id="change-2f3ab8473c252112e2ebb16aa940261f"><strong>[sql] [feature]</strong> </span><p>The <code class="docutils literal notranslate"><span class="pre">default</span></code> argument of <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> now accepts a class
or object method as an argument, in addition to a standalone function;
will properly detect if the “context” argument is accepted or not.</p>
<a class="changelog-reference headerlink reference internal" href="#change-2f3ab8473c252112e2ebb16aa940261f">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0b1-49"><span class="target" id="change-13e79ff2064616ed83c6e394ab472ee5"><strong>[sql] [feature]</strong> </span><p>Added new method to the <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.insert" title="sqlalchemy.sql.expression.insert"><code class="xref py py-func docutils literal notranslate"><span class="pre">insert()</span></code></a> construct
<a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.Insert.from_select" title="sqlalchemy.sql.expression.Insert.from_select"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Insert.from_select()</span></code></a>.  Given a list of columns and
a selectable, renders <code class="docutils literal notranslate"><span class="pre">INSERT</span> <span class="pre">INTO</span> <span class="pre">(table)</span> <span class="pre">(columns)</span> <span class="pre">SELECT</span> <span class="pre">..</span></code>.
While this feature is highlighted as part of 0.9 it is also
backported to 0.8.3.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#feature-722"><span class="std std-ref">INSERT from SELECT</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-13e79ff2064616ed83c6e394ab472ee5">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/722">#722</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-50"><span class="target" id="change-3300a90d71384cf7c366f03b14fa1351"><strong>[sql] [feature]</strong> </span><p>Provided a new attribute for <a class="reference internal" href="../core/custom_types.html#sqlalchemy.types.TypeDecorator" title="sqlalchemy.types.TypeDecorator"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code></a>
called <a class="reference internal" href="../core/custom_types.html#sqlalchemy.types.TypeDecorator.coerce_to_is_types" title="sqlalchemy.types.TypeDecorator.coerce_to_is_types"><code class="xref py py-attr docutils literal notranslate"><span class="pre">TypeDecorator.coerce_to_is_types</span></code></a>,
to make it easier to control how comparisons using
<code class="docutils literal notranslate"><span class="pre">==</span></code> or <code class="docutils literal notranslate"><span class="pre">!=</span></code> to <code class="docutils literal notranslate"><span class="pre">None</span></code> and boolean types goes
about producing an <code class="docutils literal notranslate"><span class="pre">IS</span></code> expression, or a plain
equality expression with a bound parameter.</p>
<a class="changelog-reference headerlink reference internal" href="#change-3300a90d71384cf7c366f03b14fa1351">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2734">#2734</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2744">#2744</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-51"><span class="target" id="change-e50ad7b22d3a616aeb47cf832c27097a"><strong>[sql] [feature]</strong> </span><p>A <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.label" title="sqlalchemy.sql.expression.label"><code class="xref py py-func docutils literal notranslate"><span class="pre">label()</span></code></a> construct will now render as its name alone
in an <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause, if that label is also referred to
in the columns clause of the select, instead of rewriting the
full expression.  This gives the database a better chance to
optimize the evaluation of the same expression in two different
contexts.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#migration-1068"><span class="std std-ref">Label constructs can now render as their name alone in an ORDER BY</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-e50ad7b22d3a616aeb47cf832c27097a">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1068">#1068</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-52"><span class="target" id="change-ddd4fc287951371b4a3e827639abe33c"><strong>[sql] [bug]</strong> </span><p>Fixed bug where <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.type_coerce" title="sqlalchemy.sql.expression.type_coerce"><code class="xref py py-func docutils literal notranslate"><span class="pre">type_coerce()</span></code></a> would not interpret ORM
elements with a <code class="docutils literal notranslate"><span class="pre">__clause_element__()</span></code> method properly.</p>
<a class="changelog-reference headerlink reference internal" href="#change-ddd4fc287951371b4a3e827639abe33c">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2849">#2849</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-53"><span class="target" id="change-a5059e2a0d6f7ae306b16d71a6884f3f"><strong>[sql] [bug]</strong> </span><p>The <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Enum" title="sqlalchemy.types.Enum"><code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></a> and <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Boolean" title="sqlalchemy.types.Boolean"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a> types now bypass
any custom (e.g. TypeDecorator) type in use when producing the
CHECK constraint for the “non native” type.  This so that the custom type
isn’t involved in the expression within the CHECK, since this
expression is against the “impl” value and not the “decorated” value.</p>
<a class="changelog-reference headerlink reference internal" href="#change-a5059e2a0d6f7ae306b16d71a6884f3f">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2842">#2842</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-54"><span class="target" id="change-2d486e59e387ed6c8d50bf5d99627cdf"><strong>[sql] [bug]</strong> </span><p>The <code class="docutils literal notranslate"><span class="pre">.unique</span></code> flag on <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> could be produced as <code class="docutils literal notranslate"><span class="pre">None</span></code>
if it was generated from a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> that didn’t specify <code class="docutils literal notranslate"><span class="pre">unique</span></code>
(where it defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>).  The flag will now always be <code class="docutils literal notranslate"><span class="pre">True</span></code> or
<code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-2d486e59e387ed6c8d50bf5d99627cdf">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2825">#2825</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-55"><span class="target" id="change-6f6cd0ca9e6e5050ad6d52b884122ea9"><strong>[sql] [bug]</strong> </span><p>Fixed bug in default compiler plus those of postgresql, mysql, and
mssql to ensure that any literal SQL expression values are
rendered directly as literals, instead of as bound parameters,
within a CREATE INDEX statement.  This also changes the rendering
scheme for other DDL such as constraints.</p>
<a class="changelog-reference headerlink reference internal" href="#change-6f6cd0ca9e6e5050ad6d52b884122ea9">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2742">#2742</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-56"><span class="target" id="change-0e498b684ea9cbcfc3f277d61204d65b"><strong>[sql] [bug]</strong> </span><p>A <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.select" title="sqlalchemy.sql.expression.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select()</span></code></a> that is made to refer to itself in its FROM clause,
typically via in-place mutation, will raise an informative error
message rather than causing a recursion overflow.</p>
<a class="changelog-reference headerlink reference internal" href="#change-0e498b684ea9cbcfc3f277d61204d65b">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2815">#2815</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-57"><span class="target" id="change-6e1a5094981c35f027081bae82ca704a"><strong>[sql] [bug]</strong> </span><p>Fixed bug where using the <code class="docutils literal notranslate"><span class="pre">column_reflect</span></code> event to change the <code class="docutils literal notranslate"><span class="pre">.key</span></code>
of the incoming <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> would prevent primary key constraints,
indexes, and foreign key constraints from being correctly reflected.</p>
<a class="changelog-reference headerlink reference internal" href="#change-6e1a5094981c35f027081bae82ca704a">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2811">#2811</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-58"><span class="target" id="change-d12e927d520f09485a8678152c280b4e"><strong>[sql] [bug]</strong> </span><p>The <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.notin_" title="sqlalchemy.sql.operators.ColumnOperators.notin_"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ColumnOperators.notin_()</span></code></a> operator added in 0.8 now properly
produces the negation of the expression “IN” returns
when used against an empty collection.</p>
<a class="changelog-reference headerlink reference internal" href="#change-d12e927d520f09485a8678152c280b4e">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-59"><span class="target" id="change-2c8dbe177a3c8cba08249e3cdeca2362"><strong>[sql] [bug] [postgresql]</strong> </span><p>Fixed bug where the expression system relied upon the <code class="docutils literal notranslate"><span class="pre">str()</span></code>
form of a some expressions when referring to the <code class="docutils literal notranslate"><span class="pre">.c</span></code> collection
on a <code class="docutils literal notranslate"><span class="pre">select()</span></code> construct, but the <code class="docutils literal notranslate"><span class="pre">str()</span></code> form isn’t available
since the element relies on dialect-specific compilation constructs,
notably the <code class="docutils literal notranslate"><span class="pre">__getitem__()</span></code> operator as used with a PostgreSQL
<code class="docutils literal notranslate"><span class="pre">ARRAY</span></code> element.  The fix also adds a new exception class
<a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.UnsupportedCompilationError" title="sqlalchemy.exc.UnsupportedCompilationError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnsupportedCompilationError</span></code></a> which is raised in those cases
where a compiler is asked to compile something it doesn’t know
how to.</p>
<a class="changelog-reference headerlink reference internal" href="#change-2c8dbe177a3c8cba08249e3cdeca2362">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2780">#2780</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-60"><span class="target" id="change-ec66deaad21dd8b26baa4f0b315154b4"><strong>[sql] [bug]</strong> </span><p>Multiple fixes to the correlation behavior of
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a> constructs, first introduced in 0.8.0:</p>
<ul>
<li><p>To satisfy the use case where FROM entries should be
correlated outwards to a SELECT that encloses another,
which then encloses this one, correlation now works
across multiple levels when explicit correlation is
established via <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.correlate" title="sqlalchemy.sql.expression.Select.correlate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.correlate()</span></code></a>, provided
that the target select is somewhere along the chain
contained by a WHERE/ORDER BY/columns clause, not
just nested FROM clauses. This makes
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.correlate" title="sqlalchemy.sql.expression.Select.correlate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.correlate()</span></code></a> act more compatibly to
that of 0.7 again while still maintaining the new
“smart” correlation.</p></li>
<li><p>When explicit correlation is not used, the usual
“implicit” correlation limits its behavior to just
the immediate enclosing SELECT, to maximize compatibility
with 0.7 applications, and also prevents correlation
across nested FROMs in this case, maintaining compatibility
with 0.8.0/0.8.1.</p></li>
<li><p>The <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.correlate_except" title="sqlalchemy.sql.expression.Select.correlate_except"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.correlate_except()</span></code></a> method was not
preventing the given FROM clauses from correlation in
all cases, and also would cause FROM clauses to be incorrectly
omitted entirely (more like what 0.7 would do),
this has been fixed.</p></li>
<li><p>Calling <cite>select.correlate_except(None)</cite> will enter
all FROM clauses into correlation as would be expected.</p></li>
</ul>
<a class="changelog-reference headerlink reference internal" href="#change-ec66deaad21dd8b26baa4f0b315154b4">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2668">#2668</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2746">#2746</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-61"><span class="target" id="change-69bb8fab2a49ae9f49bba3d45913e256"><strong>[sql] [bug]</strong> </span><p>Fixed bug whereby joining a select() of a table “A” with multiple
foreign key paths to a table “B”, to that table “B”, would fail
to produce the “ambiguous join condition” error that would be
reported if you join table “A” directly to “B”; it would instead
produce a join condition with multiple criteria.</p>
<a class="changelog-reference headerlink reference internal" href="#change-69bb8fab2a49ae9f49bba3d45913e256">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2738">#2738</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-62"><span class="target" id="change-875b41219bbc43340ccf3d1e7d1f5fbf"><strong>[sql] [bug] [reflection]</strong> </span><p>Fixed bug whereby using <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.reflect" title="sqlalchemy.schema.MetaData.reflect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.reflect()</span></code></a> across a remote
schema as well as a local schema could produce wrong results
in the case where both schemas had a table of the same name.</p>
<a class="changelog-reference headerlink reference internal" href="#change-875b41219bbc43340ccf3d1e7d1f5fbf">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2728">#2728</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-63"><span class="target" id="change-413cb4c102d2705b115721cf5917ed43"><strong>[sql] [bug]</strong> </span><p>Removed the “not implemented” <code class="docutils literal notranslate"><span class="pre">__iter__()</span></code> call from the base
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators" title="sqlalchemy.sql.operators.ColumnOperators"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnOperators</span></code></a> class, while this was introduced
in 0.8.0 to prevent an endless, memory-growing loop when one also
implements a <code class="docutils literal notranslate"><span class="pre">__getitem__()</span></code> method on a custom
operator and then calls erroneously <code class="docutils literal notranslate"><span class="pre">list()</span></code> on that object,
it had the effect of causing column elements to report that they
were in fact iterable types which then throw an error when you try
to iterate.   There’s no real way to have both sides here so we
stick with Python best practices.  Careful with implementing
<code class="docutils literal notranslate"><span class="pre">__getitem__()</span></code> on your custom operators!</p>
<a class="changelog-reference headerlink reference internal" href="#change-413cb4c102d2705b115721cf5917ed43">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2726">#2726</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-64"><span class="target" id="change-97b9ec01528f6ce1a103f8b8800d8b35"><strong>[sql] [bug]</strong> </span><p>Fixed regression dating back to 0.7.9 whereby the name of a CTE might
not be properly quoted if it was referred to in multiple FROM clauses.</p>
<a class="changelog-reference headerlink reference internal" href="#change-97b9ec01528f6ce1a103f8b8800d8b35">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3, 0.8.0b1</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2801">#2801</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-65"><span class="target" id="change-0b6b7933cd03daaa51c88661f6a18a77"><strong>[sql] [bug] [cte]</strong> </span><p>Fixed bug in common table expression system where if the CTE were
used only as an <code class="docutils literal notranslate"><span class="pre">alias()</span></code> construct, it would not render using the
WITH keyword.</p>
<a class="changelog-reference headerlink reference internal" href="#change-0b6b7933cd03daaa51c88661f6a18a77">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3, 0.8.0b1</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2783">#2783</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-66"><span class="target" id="change-ee864489da68afbc90051f4bb9d0f94c"><strong>[sql] [bug]</strong> </span><p>Fixed bug in <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.CheckConstraint" title="sqlalchemy.schema.CheckConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckConstraint</span></code></a> DDL where the “quote” flag from a
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> object would not be propagated.</p>
<a class="changelog-reference headerlink reference internal" href="#change-ee864489da68afbc90051f4bb9d0f94c">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3, 0.8.0b1</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2784">#2784</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-67"><span class="target" id="change-68ca19e2d66effbff44cb5a9c9633d5f"><strong>[sql] [bug]</strong> </span><p>The “name” attribute is set on <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> before the “attach”
events are called, so that attachment events can be used to dynamically
generate a name for the index based on the parent table and/or
columns.</p>
<a class="changelog-reference headerlink reference internal" href="#change-68ca19e2d66effbff44cb5a9c9633d5f">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2835">#2835</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-68"><span class="target" id="change-f9093cc2030bb467e2b99b6844eee451"><strong>[sql] [bug]</strong> </span><p>The erroneous kw arg “schema” has been removed from the <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>
object. this was an accidental commit that did nothing; a warning is raised
in 0.8.3 when this kw arg is used.</p>
<a class="changelog-reference headerlink reference internal" href="#change-f9093cc2030bb467e2b99b6844eee451">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2831">#2831</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-69"><span class="target" id="change-80f90191c40a63606c13f48bd62758c9"><strong>[sql] [bug]</strong> </span><p>A rework to the way that “quoted” identifiers are handled, in that
instead of relying upon various <code class="docutils literal notranslate"><span class="pre">quote=True</span></code> flags being passed around,
these flags are converted into rich string objects with quoting information
included at the point at which they are passed to common schema constructs
like <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>, <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>, etc.   This solves the issue
of various methods that don’t correctly honor the “quote” flag such
as <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Engine.has_table" title="sqlalchemy.engine.Engine.has_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.has_table()</span></code></a> and related methods.  The <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.elements.quoted_name" title="sqlalchemy.sql.elements.quoted_name"><code class="xref py py-class docutils literal notranslate"><span class="pre">quoted_name</span></code></a>
object is a string subclass that can also be used explicitly if needed;
the object will hold onto the quoting preferences passed and will
also bypass the “name normalization” performed by dialects that
standardize on uppercase symbols, such as Oracle, Firebird and DB2.
The upshot is that the “uppercase” backends can now work with force-quoted
names, such as lowercase-quoted names and new reserved words.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#change-2812"><span class="std std-ref">Schema identifiers now carry along their own quoting information</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-80f90191c40a63606c13f48bd62758c9">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2812">#2812</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-70"><span class="target" id="change-6116437230b6aca55206409a957f932e"><strong>[sql] [bug]</strong> </span><p>The resolution of <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> objects to their
target <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> has been reworked to be as
immediate as possible, based on the moment that the
target <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> is associated with the same
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a> as this <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>, rather
than waiting for the first time a join is constructed,
or similar. This along with other improvements allows
earlier detection of some foreign key configuration
issues.  Also included here is a rework of the
type-propagation system, so that
it should be reliable now to set the type as <code class="docutils literal notranslate"><span class="pre">None</span></code>
on any <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> that refers to another via
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> - the type will be copied from the
target column as soon as that other column is associated,
and now works for composite foreign keys as well.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="migration_09.html#migration-1765"><span class="std std-ref">Columns can reliably get their type from a column referred to via ForeignKey</span></a></p>
</div>
<a class="changelog-reference headerlink reference internal" href="#change-6116437230b6aca55206409a957f932e">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/1765">#1765</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-postgresql">
<h3>postgresql<a class="headerlink" href="#change-0.9.0b1-postgresql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-71"><span class="target" id="change-58dd924c304b9c109245e798ac71d027"><strong>[postgresql] [feature]</strong> </span><p>Support for PostgreSQL 9.2 range types has been added.
Currently, no type translation is provided, so works
directly with strings or psycopg2 2.5 range extension types
at the moment.  Patch courtesy Chris Withers.</p>
<a class="changelog-reference headerlink reference internal" href="#change-58dd924c304b9c109245e798ac71d027">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-72"><span class="target" id="change-0c25a8156ec52fca32278f7939a5ec93"><strong>[postgresql] [feature]</strong> </span><p>Added support for “AUTOCOMMIT” isolation when using the psycopg2
DBAPI.   The keyword is available via the <code class="docutils literal notranslate"><span class="pre">isolation_level</span></code>
execution option.  Patch courtesy Roman Podolyaka.</p>
<a class="changelog-reference headerlink reference internal" href="#change-0c25a8156ec52fca32278f7939a5ec93">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2072">#2072</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-73"><span class="target" id="change-e0e1515141ca0c31a3932b72465f0701"><strong>[postgresql] [feature]</strong> </span><p>Added support for rendering <code class="docutils literal notranslate"><span class="pre">SMALLSERIAL</span></code> when a <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.SmallInteger" title="sqlalchemy.types.SmallInteger"><code class="xref py py-class docutils literal notranslate"><span class="pre">SmallInteger</span></code></a>
type is used on a primary key autoincrement column, based on server
version detection of PostgreSQL version 9.2 or greater.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e0e1515141ca0c31a3932b72465f0701">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2840">#2840</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-74"><span class="target" id="change-c7b42a13889c2700394a72cd53fdf578"><strong>[postgresql] [bug]</strong> </span><p>Removed a 128-character truncation from the reflection of the
server default for a column; this code was original from
PG system views which truncated the string for readability.</p>
<a class="changelog-reference headerlink reference internal" href="#change-c7b42a13889c2700394a72cd53fdf578">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2844">#2844</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-75"><span class="target" id="change-90c077a62f3393fc602fa4e68ef713bd"><strong>[postgresql] [bug]</strong> </span><p>Parenthesis will be applied to a compound SQL expression as
rendered in the column list of a CREATE INDEX statement.</p>
<a class="changelog-reference headerlink reference internal" href="#change-90c077a62f3393fc602fa4e68ef713bd">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2742">#2742</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-76"><span class="target" id="change-b877a338a8e83d90561d43c0061bc2dd"><strong>[postgresql] [bug]</strong> </span><p>Fixed bug where PostgreSQL version strings that had a prefix preceding
the words “PostgreSQL” or “EnterpriseDB” would not parse.
Courtesy Scott Schaefer.</p>
<a class="changelog-reference headerlink reference internal" href="#change-b877a338a8e83d90561d43c0061bc2dd">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2819">#2819</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-77"><span class="target" id="change-128a8c7189ca1b308a979d28e966c94a"><strong>[postgresql] [bug]</strong> </span><p>The behavior of <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.extract" title="sqlalchemy.sql.expression.extract"><code class="xref py py-func docutils literal notranslate"><span class="pre">extract()</span></code></a> has been simplified on the
PostgreSQL dialect to no longer inject a hardcoded <code class="docutils literal notranslate"><span class="pre">::timestamp</span></code>
or similar cast into the given expression, as this interfered
with types such as timezone-aware datetimes, but also
does not appear to be at all necessary with modern versions
of psycopg2.</p>
<a class="changelog-reference headerlink reference internal" href="#change-128a8c7189ca1b308a979d28e966c94a">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2740">#2740</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-78"><span class="target" id="change-a284671030fa2fb228bace39dcecba09"><strong>[postgresql] [bug]</strong> </span><p>Fixed bug in HSTORE type where keys/values that contained
backslashed quotes would not be escaped correctly when
using the “non native” (i.e. non-psycopg2) means
of translating HSTORE data.  Patch courtesy Ryan Kelly.</p>
<a class="changelog-reference headerlink reference internal" href="#change-a284671030fa2fb228bace39dcecba09">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2766">#2766</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-79"><span class="target" id="change-b45f503fcbf4da366ec6a3e9838963c9"><strong>[postgresql] [bug]</strong> </span><p>Fixed bug where the order of columns in a multi-column
PostgreSQL index would be reflected in the wrong order.
Courtesy Roman Podolyaka.</p>
<a class="changelog-reference headerlink reference internal" href="#change-b45f503fcbf4da366ec6a3e9838963c9">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2767">#2767</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-mysql">
<h3>mysql<a class="headerlink" href="#change-0.9.0b1-mysql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-80"><span class="target" id="change-d0a8eb2d08437d50b589f473fab54468"><strong>[mysql] [feature]</strong> </span><p>The <code class="docutils literal notranslate"><span class="pre">mysql_length</span></code> parameter used with <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> can now
be passed as a dictionary of column names/lengths, for use
with composite indexes.  Big thanks to Roman Podolyaka for the
patch.</p>
<a class="changelog-reference headerlink reference internal" href="#change-d0a8eb2d08437d50b589f473fab54468">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2704">#2704</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-81"><span class="target" id="change-8d6f26937d8905e155c0deb811a65b8c"><strong>[mysql] [feature]</strong> </span><p>The MySQL <a class="reference internal" href="../dialects/mysql.html#sqlalchemy.dialects.mysql.SET" title="sqlalchemy.dialects.mysql.SET"><code class="xref py py-class docutils literal notranslate"><span class="pre">SET</span></code></a> type now features the same auto-quoting
behavior as that of <a class="reference internal" href="../dialects/mysql.html#sqlalchemy.dialects.mysql.ENUM" title="sqlalchemy.dialects.mysql.ENUM"><code class="xref py py-class docutils literal notranslate"><span class="pre">ENUM</span></code></a>.  Quotes are not required when
setting up the value, but quotes that are present will be auto-detected
along with a warning.  This also helps with Alembic where
the SET type doesn’t render with quotes.</p>
<a class="changelog-reference headerlink reference internal" href="#change-8d6f26937d8905e155c0deb811a65b8c">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2817">#2817</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-82"><span class="target" id="change-e43926dc67636d3ba7e0744c194355b2"><strong>[mysql] [bug]</strong> </span><p>The change in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2721">#2721</a>, which is that the <code class="docutils literal notranslate"><span class="pre">deferrable</span></code> keyword
of <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> is silently ignored on the MySQL
backend, will be reverted as of 0.9; this keyword will now render again, raising
errors on MySQL as it is not understood - the same behavior will also
apply to the <code class="docutils literal notranslate"><span class="pre">initially</span></code> keyword.  In 0.8, the keywords will remain
ignored but a warning is emitted.   Additionally, the <code class="docutils literal notranslate"><span class="pre">match</span></code> keyword
now raises a <a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.CompileError" title="sqlalchemy.exc.CompileError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">CompileError</span></code></a> on 0.9 and emits a warning on 0.8;
this keyword is not only silently ignored by MySQL but also breaks
the ON UPDATE/ON DELETE options.</p>
<p>To use a <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>
that does not render or renders differently on MySQL, use a custom
compilation option.  An example of this usage has been added to the
documentation, see <a class="reference internal" href="../dialects/mysql.html#mysql-foreign-keys"><span class="std std-ref">MySQL Foreign Keys</span></a>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e43926dc67636d3ba7e0744c194355b2">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2721">#2721</a>, <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2839">#2839</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-83"><span class="target" id="change-2a6ed47e91f911c2105ce955afc32748"><strong>[mysql] [bug]</strong> </span><p>MySQL-connector dialect now allows options in the create_engine
query string to override those defaults set up in the connect,
including “buffered” and “raise_on_warnings”.</p>
<a class="changelog-reference headerlink reference internal" href="#change-2a6ed47e91f911c2105ce955afc32748">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2515">#2515</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-84"><span class="target" id="change-132183eb674d003b5472f2173789f67e"><strong>[mysql] [bug]</strong> </span><p>Fixed bug when using multi-table UPDATE where a supplemental
table is a SELECT with its own bound parameters, where the positioning
of the bound parameters would be reversed versus the statement
itself when using MySQL’s special syntax.</p>
<a class="changelog-reference headerlink reference internal" href="#change-132183eb674d003b5472f2173789f67e">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2768">#2768</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-85"><span class="target" id="change-b93865e4329f3662cd5b2933bf555218"><strong>[mysql] [bug]</strong> </span><p>Added another conditional to the <code class="docutils literal notranslate"><span class="pre">mysql+gaerdbms</span></code> dialect to
detect so-called “development” mode, where we should use the
<code class="docutils literal notranslate"><span class="pre">rdbms_mysqldb</span></code> DBAPI.  Patch courtesy Brett Slatkin.</p>
<a class="changelog-reference headerlink reference internal" href="#change-b93865e4329f3662cd5b2933bf555218">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2715">#2715</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-86"><span class="target" id="change-43e1dfe4d4c7f5082a4ca7f2271b21b0"><strong>[mysql] [bug]</strong> </span><p>The <code class="docutils literal notranslate"><span class="pre">deferrable</span></code> keyword argument on <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> and
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> will not render the <code class="docutils literal notranslate"><span class="pre">DEFERRABLE</span></code> keyword
on the MySQL dialect.  For a long time we left this in place because
a non-deferrable foreign key would act very differently than a deferrable
one, but some environments just disable FKs on MySQL, so we’ll be less
opinionated here.</p>
<a class="changelog-reference headerlink reference internal" href="#change-43e1dfe4d4c7f5082a4ca7f2271b21b0">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2721">#2721</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-87"><span class="target" id="change-8770e442e32764b20ee2132358bc9d6d"><strong>[mysql] [bug]</strong> </span><p>Updates to MySQL reserved words for versions 5.5, 5.6, courtesy
Hanno Schlichting.</p>
<a class="changelog-reference headerlink reference internal" href="#change-8770e442e32764b20ee2132358bc9d6d">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3, 0.8.0b1</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2791">#2791</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-88"><span class="target" id="change-1fad8db7eac7a5daf1d143084dbc55af"><strong>[mysql] [bug]</strong> </span><p>Fix and test parsing of MySQL foreign key options within reflection;
this complements the work in <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2183">#2183</a> where we begin to support
reflection of foreign key options such as ON UPDATE/ON DELETE
cascade.</p>
<a class="changelog-reference headerlink reference internal" href="#change-1fad8db7eac7a5daf1d143084dbc55af">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2839">#2839</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-89"><span class="target" id="change-e98fa083392ee258da3be2f4cc463340"><strong>[mysql] [bug]</strong> </span><p>Improved support for the cymysql driver, supporting version 0.6.5,
courtesy Hajime Nakagami.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e98fa083392ee258da3be2f4cc463340">¶</a><p></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-sqlite">
<h3>sqlite<a class="headerlink" href="#change-0.9.0b1-sqlite" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-90"><span class="target" id="change-e196956853a1c770ffc96aa3ebdb0027"><strong>[sqlite] [bug]</strong> </span><p>The newly added SQLite DATETIME arguments storage_format and
regexp apparently were not fully implemented correctly; while the
arguments were accepted, in practice they would have no effect;
this has been fixed.</p>
<a class="changelog-reference headerlink reference internal" href="#change-e196956853a1c770ffc96aa3ebdb0027">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2781">#2781</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-91"><span class="target" id="change-ed8a730c977ad5352148eb228c2b3a31"><strong>[sqlite] [bug]</strong> </span><p>Added <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.BIGINT" title="sqlalchemy.types.BIGINT"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.types.BIGINT</span></code></a> to the list of type names that can be
reflected by the SQLite dialect; courtesy Russell Stuart.</p>
<a class="changelog-reference headerlink reference internal" href="#change-ed8a730c977ad5352148eb228c2b3a31">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2764">#2764</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-mssql">
<h3>mssql<a class="headerlink" href="#change-0.9.0b1-mssql" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-92"><span class="target" id="change-02967c3908e9232b5bde5a7b76c9cd7b"><strong>[mssql] [bug]</strong> </span><p>When querying the information schema on SQL Server 2000, removed
a CAST call that was added in 0.8.1 to help with driver issues,
which apparently is not compatible on 2000.
The CAST remains in place for SQL Server 2005 and greater.</p>
<a class="changelog-reference headerlink reference internal" href="#change-02967c3908e9232b5bde5a7b76c9cd7b">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2747">#2747</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-93"><span class="target" id="change-bea87c5d2f97257ad289ce3893861719"><strong>[mssql] [bug] [pyodbc]</strong> </span><p>Fixes to MSSQL with Python 3 + pyodbc, including that statements
are passed correctly.</p>
<a class="changelog-reference headerlink reference internal" href="#change-bea87c5d2f97257ad289ce3893861719">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2355">#2355</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-oracle">
<h3>oracle<a class="headerlink" href="#change-0.9.0b1-oracle" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-94"><span class="target" id="change-d164453835dc47719c20c02f5a49d116"><strong>[oracle] [feature] [py3k]</strong> </span><p>The Oracle unit tests with cx_oracle now pass
fully under Python 3.</p>
<a class="changelog-reference headerlink reference internal" href="#change-d164453835dc47719c20c02f5a49d116">¶</a><p></p>
</p>
</li>
<li><p id="change-0.9.0b1-95"><span class="target" id="change-7db6754b84c59e26d48cb6796899ee20"><strong>[oracle] [bug]</strong> </span><p>Fixed bug where Oracle table reflection using synonyms would fail
if the synonym and the table were in different remote schemas.
Patch to fix courtesy Kyle Derr.</p>
<a class="changelog-reference headerlink reference internal" href="#change-7db6754b84c59e26d48cb6796899ee20">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2853">#2853</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-firebird">
<h3>firebird<a class="headerlink" href="#change-0.9.0b1-firebird" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-96"><span class="target" id="change-9175f0322dec423ed80f93115ad65aae"><strong>[firebird] [feature]</strong> </span><p>Added new flag <code class="docutils literal notranslate"><span class="pre">retaining=True</span></code> to the kinterbasdb and fdb dialects.
This controls the value of the <code class="docutils literal notranslate"><span class="pre">retaining</span></code> flag sent to the
<code class="docutils literal notranslate"><span class="pre">commit()</span></code> and <code class="docutils literal notranslate"><span class="pre">rollback()</span></code> methods of the DBAPI connection.
Due to historical concerns, this flag defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code> in 0.8.2,
however in 0.9.0b1 this flag defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-9175f0322dec423ed80f93115ad65aae">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2763">#2763</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-97"><span class="target" id="change-76539a1da5603da953dbce6672c8e461"><strong>[firebird] [feature]</strong> </span><p>The <code class="docutils literal notranslate"><span class="pre">fdb</span></code> dialect is now the default dialect when
specified without a dialect qualifier, i.e. <code class="docutils literal notranslate"><span class="pre">firebird://</span></code>,
per the Firebird project publishing <code class="docutils literal notranslate"><span class="pre">fdb</span></code> as their
official Python driver.</p>
<a class="changelog-reference headerlink reference internal" href="#change-76539a1da5603da953dbce6672c8e461">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2504">#2504</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-98"><span class="target" id="change-11863f3c419f255126f23bd31f39c054"><strong>[firebird] [bug]</strong> </span><p>Type lookup when reflecting the Firebird types LONG and
INT64 has been fixed so that LONG is treated as INTEGER,
INT64 treated as BIGINT, unless the type has a “precision”
in which case it’s treated as NUMERIC.  Patch courtesy
Russell Stuart.</p>
<a class="changelog-reference headerlink reference internal" href="#change-11863f3c419f255126f23bd31f39c054">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2757">#2757</a></p>
</p>
</li>
</ul>
</div>
<div class="section" id="change-0.9.0b1-misc">
<h3>misc<a class="headerlink" href="#change-0.9.0b1-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p id="change-0.9.0b1-99"><span class="target" id="change-4376b4db83754e008ed7559a50c2b16c"><strong>[feature]</strong> </span><p>Added a new flag <code class="docutils literal notranslate"><span class="pre">system=True</span></code> to <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>, which marks
the column as a “system” column which is automatically made present
by the database (such as PostgreSQL <code class="docutils literal notranslate"><span class="pre">oid</span></code> or <code class="docutils literal notranslate"><span class="pre">xmin</span></code>).  The
column will be omitted from the <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> statement but will
otherwise be available for querying.   In addition, the
<a class="reference internal" href="../core/ddl.html#sqlalchemy.schema.CreateColumn" title="sqlalchemy.schema.CreateColumn"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateColumn</span></code></a> construct can be applied to a custom
compilation rule which allows skipping of columns, by producing
a rule that returns <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-4376b4db83754e008ed7559a50c2b16c">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-100"><span class="target" id="change-d810542c0eef5129e99e0dea72af3bb9"><strong>[feature] [examples]</strong> </span><p>Improved the examples in <code class="docutils literal notranslate"><span class="pre">examples/generic_associations</span></code>, including
that <code class="docutils literal notranslate"><span class="pre">discriminator_on_association.py</span></code> makes use of single table
inheritance do the work with the “discriminator”.  Also
added a true “generic foreign key” example, which works similarly
to other popular frameworks in that it uses an open-ended integer
to point to any other table, foregoing traditional referential
integrity.  While we don’t recommend this pattern, information wants
to be free.</p>
<a class="changelog-reference headerlink reference internal" href="#change-d810542c0eef5129e99e0dea72af3bb9">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-101"><span class="target" id="change-c6ae54dff0bc9fddf9cbe1f7a37fcd59"><strong>[feature] [core]</strong> </span><p>Added a new variant to <a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.UpdateBase.returning" title="sqlalchemy.sql.expression.UpdateBase.returning"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateBase.returning()</span></code></a> called
<a class="reference internal" href="../core/dml.html#sqlalchemy.sql.expression.ValuesBase.return_defaults" title="sqlalchemy.sql.expression.ValuesBase.return_defaults"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ValuesBase.return_defaults()</span></code></a>; this allows arbitrary columns
to be added to the RETURNING clause of the statement without interfering
with the compilers usual “implicit returning” feature, which is used to
efficiently fetch newly generated primary key values.  For supporting
backends, a dictionary of all fetched values is present at
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.ResultProxy.returned_defaults" title="sqlalchemy.engine.ResultProxy.returned_defaults"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ResultProxy.returned_defaults</span></code></a>.</p>
<a class="changelog-reference headerlink reference internal" href="#change-c6ae54dff0bc9fddf9cbe1f7a37fcd59">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2793">#2793</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-102"><span class="target" id="change-026a7898970464580f20e377c6428616"><strong>[feature] [pool]</strong> </span><p>Added pool logging for “rollback-on-return” and the less used
“commit-on-return”.  This is enabled with the rest of pool
“debug” logging.</p>
<a class="changelog-reference headerlink reference internal" href="#change-026a7898970464580f20e377c6428616">¶</a><p>References: <a class="reference external" href="http://www.sqlalchemy.org/trac/ticket/2752">#2752</a></p>
</p>
</li>
<li><p id="change-0.9.0b1-103"><span class="target" id="change-95b0a27ef450ed818ac940e3ded22313"><strong>[bug] [examples]</strong> </span><p>Added “autoincrement=False” to the history table created in the
versioning example, as this table shouldn’t have autoinc on it
in any case, courtesy Patrick Schmid.</p>
<a class="changelog-reference headerlink reference internal" href="#change-95b0a27ef450ed818ac940e3ded22313">¶</a><p>This change is also <strong>backported</strong> to: 0.8.3</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-104"><span class="target" id="change-de133057736a5ba4eb2f13b2226d6189"><strong>[bug] [ext]</strong> </span><p>Fixed bug whereby if a composite type were set up
with a function instead of a class, the mutable extension
would trip up when it tried to check that column
for being a <a class="reference internal" href="../orm/extensions/mutable.html#sqlalchemy.ext.mutable.MutableComposite" title="sqlalchemy.ext.mutable.MutableComposite"><code class="xref py py-class docutils literal notranslate"><span class="pre">MutableComposite</span></code></a> (which it isn’t).
Courtesy asldevi.</p>
<a class="changelog-reference headerlink reference internal" href="#change-de133057736a5ba4eb2f13b2226d6189">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-105"><span class="target" id="change-b0dcd18db52ac8a72250f771c09f4c4f"><strong>[bug] [examples]</strong> </span><p>Fixed an issue with the “versioning” recipe whereby a many-to-one
reference could produce a meaningless version for the target,
even though it was not changed, when backrefs were present.
Patch courtesy Matt Chisholm.</p>
<a class="changelog-reference headerlink reference internal" href="#change-b0dcd18db52ac8a72250f771c09f4c4f">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p></p>
</p>
</li>
<li><p id="change-0.9.0b1-106"><span class="target" id="change-47f2cda56e1d7a6b9dffa4b1b316855a"><strong>[requirements]</strong> </span><p>The Python <a class="reference external" href="https://pypi.python.org/pypi/mock">mock</a> library
is now required in order to run the unit test suite.  While part
of the standard library as of Python 3.3, previous Python installations
will need to install this in order to run unit tests or to
use the <code class="docutils literal notranslate"><span class="pre">sqlalchemy.testing</span></code> package for external dialects.</p>
<a class="changelog-reference headerlink reference internal" href="#change-47f2cda56e1d7a6b9dffa4b1b316855a">¶</a><p>This change is also <strong>backported</strong> to: 0.8.2</p>
<p></p>
</p>
</li>
</ul>
</div>
</div>
</div>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="changelog_10.html" title="previous chapter">1.0 Changelog</a>
        Next:
        <a href="changelog_08.html" title="next chapter">0.8 Changelog</a>

    <div id="docs-copyright">
        &copy; <a href="../copyright.html">Copyright</a> 2007-2020, the SQLAlchemy authors and contributors.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 3.0.3.
    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '1.3.17',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../_static/detectmobile.js"></script>
    <script type="text/javascript" src="../_static/init.js"></script>


    </body>
</html>


