<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        
        <title>
            
    
    Relationships API
 &mdash;
    SQLAlchemy 1.3 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../_static/changelog.css" type="text/css" />
                <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
        <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="SQLAlchemy 1.3 Documentation" href="../index.html" />
        <link rel="up" title="Relationship Configuration" href="relationships.html" />
        <link rel="next" title="Loading Objects" href="loading_objects.html" />
        <link rel="prev" title="Special Relationship Persistence Patterns" href="relationship_persistence.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">1.3.17</span>


        | Release Date: May 13, 2020

    </div>

    <h1>SQLAlchemy 1.3 Documentation</h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">


        <div id="docs-sidebar-popout">
            <h3><a href="../index.html">SQLAlchemy 1.3 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../contents.html">Contents</a> |
                <a href="../genindex.html">Index</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="index.html" title="SQLAlchemy ORM">SQLAlchemy ORM</a>
        </h3>

        <ul>
<li><span class="link-container"><a class="reference external" href="tutorial.html">Object Relational Tutorial</a></span></li>
<li><span class="link-container"><a class="reference external" href="mapper_config.html">Mapper Configuration</a></span></li>
<li><span class="link-container"><a class="reference external" href="relationships.html">Relationship Configuration</a></span><ul>
<li><span class="link-container"><a class="reference external" href="basic_relationships.html">Basic Relationship Patterns</a></span></li>
<li><span class="link-container"><a class="reference external" href="self_referential.html">Adjacency List Relationships</a></span></li>
<li><span class="link-container"><a class="reference external" href="backref.html">Linking Relationships with Backref</a></span></li>
<li><span class="link-container"><a class="reference external" href="join_conditions.html">Configuring how Relationship Joins</a></span></li>
<li><span class="link-container"><a class="reference external" href="collections.html">Collection Configuration and Techniques</a></span></li>
<li><span class="link-container"><a class="reference external" href="relationship_persistence.html">Special Relationship Persistence Patterns</a></span></li>
<li class="selected"><span class="link-container"><strong>Relationships API</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="loading_objects.html">Loading Objects</a></span></li>
<li><span class="link-container"><a class="reference external" href="session.html">Using the Session</a></span></li>
<li><span class="link-container"><a class="reference external" href="extending.html">Events and Internals</a></span></li>
<li><span class="link-container"><a class="reference external" href="extensions/index.html">ORM Extensions</a></span></li>
<li><span class="link-container"><a class="reference external" href="examples.html">ORM Examples</a></span></li>
</ul>



        </div>

        </div>

    </div>

    

    <div id="docs-body" class="withsidebar" >
        
<div class="section" id="relationships-api">
<h1>Relationships API<a class="headerlink" href="#relationships-api" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt id="sqlalchemy.orm.relationship">
<em class="property">function </em><code class="sig-prename descclassname">sqlalchemy.orm.</code><code class="sig-name descname">relationship</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">argument</span></em>, <em class="sig-param"><span class="n">secondary</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">primaryjoin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">secondaryjoin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">foreign_keys</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">uselist</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">order_by</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">backref</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">back_populates</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">post_update</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">cascade</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">extension</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">viewonly</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">lazy</span><span class="o">=</span><span class="default_value">'select'</span></em>, <em class="sig-param"><span class="n">collection_class</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">passive_deletes</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">passive_updates</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">remote_side</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">enable_typechecks</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">join_depth</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">comparator_factory</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">single_parent</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">innerjoin</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">distinct_target_key</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">doc</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">active_history</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">cascade_backrefs</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">load_on_pending</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">bake_queries</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">_local_remote_pairs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">query_class</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">info</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">omit_join</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sync_backref</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.relationship" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a relationship between two mapped classes.</p>
<p>This corresponds to a parent-child or associative table relationship.
The constructed class is an instance of
<a class="reference internal" href="internals.html#sqlalchemy.orm.RelationshipProperty" title="sqlalchemy.orm.RelationshipProperty"><code class="xref py py-class docutils literal notranslate"><span class="pre">RelationshipProperty</span></code></a>.</p>
<p>A typical <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>, used in a classical mapping:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mapper</span><span class="p">(</span><span class="n">Parent</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
  <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="n">relationship</span><span class="p">(</span><span class="n">Child</span><span class="p">)</span>
<span class="p">})</span></pre></div>
</div>
<p>Some arguments accepted by <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>
optionally accept a
callable function, which when called produces the desired value.
The callable is invoked by the parent <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> at “mapper
initialization” time, which happens only when mappers are first used,
and is assumed to be after all mappings have been constructed.  This
can be used to resolve order-of-declaration and other dependency
issues, such as if <code class="docutils literal notranslate"><span class="pre">Child</span></code> is declared below <code class="docutils literal notranslate"><span class="pre">Parent</span></code> in the same
file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mapper</span><span class="p">(</span><span class="n">Parent</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;children&quot;</span><span class="p">:</span><span class="n">relationship</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Child</span><span class="p">,</span>
                        <span class="n">order_by</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">Child</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="p">})</span></pre></div>
</div>
<p>When using the <a class="reference internal" href="extensions/declarative/index.html"><span class="std std-ref">Declarative</span></a> extension, the Declarative
initializer allows string arguments to be passed to
<a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>.  These string arguments are converted into
callables that evaluate the string as Python code, using the
Declarative class-registry as a namespace.  This allows the lookup of
related classes to be automatic via their string name, and removes the
need for related classes to be imported into the local module space
before the dependent classes have been declared.  It is still required
that the modules in which these related classes appear are imported
anywhere in the application at some point before the related mappings
are actually used, else a lookup error will be raised when the
<a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>
attempts to resolve the string reference to the
related class.    An example of a string- resolved class is as
follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="k">import</span> <span class="n">declarative_base</span>

<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;parent&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">children</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s2">&quot;Child&quot;</span><span class="p">,</span> <span class="n">order_by</span><span class="o">=</span><span class="s2">&quot;Child.id&quot;</span><span class="p">)</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="relationships.html"><span class="std std-ref">Relationship Configuration</span></a> - Full introductory and
reference documentation for <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>.</p>
<p><a class="reference internal" href="tutorial.html#orm-tutorial-relationship"><span class="std std-ref">Building a Relationship</span></a> - ORM tutorial introduction.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.argument"></span><strong>argument</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.argument">¶</a> – <p>A mapped class, or actual <a class="reference internal" href="mapping_api.html#sqlalchemy.orm.Mapper" title="sqlalchemy.orm.Mapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapper</span></code></a> instance,
representing
the target of the relationship.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.relationship.params.argument" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.argument</span></code></a>
may also be passed as a callable
function which is evaluated at mapper initialization time, and may
be passed as a string name when using Declarative.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Prior to SQLAlchemy 1.3.16, this value is interpreted
using Python’s <code class="docutils literal notranslate"><span class="pre">eval()</span></code> function.
<strong>DO NOT PASS UNTRUSTED INPUT TO THIS STRING</strong>.
See <a class="reference internal" href="extensions/declarative/relationships.html#declarative-relationship-eval"><span class="std std-ref">Evaluation of relationship arguments</span></a> for details on
declarative evaluation of <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> arguments.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="extensions/declarative/relationships.html#declarative-configuring-relationships"><span class="std std-ref">Configuring Relationships</span></a> - further detail
on relationship configuration when using Declarative.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.secondary"></span><strong>secondary</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.secondary">¶</a> – <p>For a many-to-many relationship, specifies the intermediary
table, and is typically an instance of <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.
In less common circumstances, the argument may also be specified
as an <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Alias" title="sqlalchemy.sql.expression.Alias"><code class="xref py py-class docutils literal notranslate"><span class="pre">Alias</span></code></a> construct, or even a
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Join" title="sqlalchemy.sql.expression.Join"><code class="xref py py-class docutils literal notranslate"><span class="pre">Join</span></code></a> construct.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.relationship.params.secondary" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.secondary</span></code></a> may
also be passed as a callable function which is evaluated at
mapper initialization time.  When using Declarative, it may also
be a string argument noting the name of a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
that is
present in the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData" title="sqlalchemy.schema.MetaData"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code></a>
collection associated with the
parent-mapped <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When passed as a Python-evaluable string, the
argument is interpreted using Python’s <code class="docutils literal notranslate"><span class="pre">eval()</span></code> function.
<strong>DO NOT PASS UNTRUSTED INPUT TO THIS STRING</strong>.
See <a class="reference internal" href="extensions/declarative/relationships.html#declarative-relationship-eval"><span class="std std-ref">Evaluation of relationship arguments</span></a> for details on
declarative evaluation of <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> arguments.</p>
</div>
<p>The <a class="reference internal" href="#sqlalchemy.orm.relationship.params.secondary" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.secondary</span></code></a> keyword argument is
typically applied in the case where the intermediary
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
is not otherwise expressed in any direct class mapping. If the
“secondary” table is also explicitly mapped elsewhere (e.g. as in
<a class="reference internal" href="basic_relationships.html#association-pattern"><span class="std std-ref">Association Object</span></a>), one should consider applying the
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.viewonly" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.viewonly</span></code></a> flag so that this
<a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>
is not used for persistence operations which
may conflict with those of the association object pattern.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="basic_relationships.html#relationships-many-to-many"><span class="std std-ref">Many To Many</span></a> - Reference example of “many
to many”.</p>
<p><a class="reference internal" href="tutorial.html#orm-tutorial-many-to-many"><span class="std std-ref">Building a Many To Many Relationship</span></a> - ORM tutorial introduction to
many-to-many relationships.</p>
<p><a class="reference internal" href="join_conditions.html#self-referential-many-to-many"><span class="std std-ref">Self-Referential Many-to-Many Relationship</span></a> - Specifics on using
many-to-many in a self-referential case.</p>
<p><a class="reference internal" href="extensions/declarative/relationships.html#declarative-many-to-many"><span class="std std-ref">Configuring Many-to-Many Relationships</span></a> - Additional options when using
Declarative.</p>
<p><a class="reference internal" href="basic_relationships.html#association-pattern"><span class="std std-ref">Association Object</span></a> - an alternative to
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.secondary" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.secondary</span></code></a>
when composing association
table relationships, allowing additional attributes to be
specified on the association table.</p>
<p><a class="reference internal" href="join_conditions.html#composite-secondary-join"><span class="std std-ref">Composite “Secondary” Joins</span></a> - a lesser-used pattern which
in some cases can enable complex <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> SQL
conditions to be used.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.9.2: </span><a class="reference internal" href="#sqlalchemy.orm.relationship.params.secondary" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.secondary</span></code></a>
works
more effectively when referring to a <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Join" title="sqlalchemy.sql.expression.Join"><code class="xref py py-class docutils literal notranslate"><span class="pre">Join</span></code></a>
instance.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.active_history"></span><strong>active_history=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.active_history">¶</a> – When <code class="docutils literal notranslate"><span class="pre">True</span></code>, indicates that the “previous” value for a
many-to-one reference should be loaded when replaced, if
not already loaded. Normally, history tracking logic for
simple many-to-ones only needs to be aware of the “new”
value in order to perform a flush. This flag is available
for applications that make use of
<a class="reference internal" href="session_api.html#sqlalchemy.orm.attributes.get_history" title="sqlalchemy.orm.attributes.get_history"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_history()</span></code></a> which also need to know
the “previous” value of the attribute.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.backref"></span><strong>backref</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.backref">¶</a> – <p>Indicates the string name of a property to be placed on the related
mapper’s class that will handle this relationship in the other
direction. The other property will be created automatically
when the mappers are configured.  Can also be passed as a
<a class="reference internal" href="#sqlalchemy.orm.backref" title="sqlalchemy.orm.backref"><code class="xref py py-func docutils literal notranslate"><span class="pre">backref()</span></code></a> object to control the configuration of the
new relationship.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="backref.html#relationships-backref"><span class="std std-ref">Linking Relationships with Backref</span></a> - Introductory documentation and
examples.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.relationship.params.back_populates" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.back_populates</span></code></a> - alternative form
of backref specification.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.backref" title="sqlalchemy.orm.backref"><code class="xref py py-func docutils literal notranslate"><span class="pre">backref()</span></code></a> - allows control over <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>
configuration when using <a class="reference internal" href="#sqlalchemy.orm.relationship.params.backref" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.backref</span></code></a>.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.back_populates"></span><strong>back_populates</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.back_populates">¶</a> – <p>Takes a string name and has the same meaning as
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.backref" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.backref</span></code></a>, except the complementing
property is <strong>not</strong> created automatically, and instead must be
configured explicitly on the other mapper.  The complementing
property should also indicate
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.back_populates" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.back_populates</span></code></a> to this relationship to
ensure proper functioning.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="backref.html#relationships-backref"><span class="std std-ref">Linking Relationships with Backref</span></a> - Introductory documentation and
examples.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.relationship.params.backref" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.backref</span></code></a> - alternative form
of backref specification.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.bake_queries"></span><strong>bake_queries=True</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.bake_queries">¶</a> – <p>Use the <a class="reference internal" href="extensions/baked.html#sqlalchemy.ext.baked.BakedQuery" title="sqlalchemy.ext.baked.BakedQuery"><code class="xref py py-class docutils literal notranslate"><span class="pre">BakedQuery</span></code></a> cache to cache the construction of SQL
used in lazy loads.  True by default.   Set to False if the
join condition of the relationship has unusual features that
might not respond well to statement caching.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.2: </span>“Baked” loading is the default implementation for the “select”,
a.k.a. “lazy” loading strategy for relationships.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0.0.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="extensions/baked.html"><span class="std std-ref">Baked Queries</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.cascade"></span><strong>cascade</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.cascade">¶</a> – <p>A comma-separated list of cascade rules which determines how
Session operations should be “cascaded” from parent to child.
This defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>, which means the default cascade
should be used - this default cascade is <code class="docutils literal notranslate"><span class="pre">&quot;save-update,</span> <span class="pre">merge&quot;</span></code>.</p>
<p>The available cascades are <code class="docutils literal notranslate"><span class="pre">save-update</span></code>, <code class="docutils literal notranslate"><span class="pre">merge</span></code>,
<code class="docutils literal notranslate"><span class="pre">expunge</span></code>, <code class="docutils literal notranslate"><span class="pre">delete</span></code>, <code class="docutils literal notranslate"><span class="pre">delete-orphan</span></code>, and <code class="docutils literal notranslate"><span class="pre">refresh-expire</span></code>.
An additional option, <code class="docutils literal notranslate"><span class="pre">all</span></code> indicates shorthand for
<code class="docutils literal notranslate"><span class="pre">&quot;save-update,</span> <span class="pre">merge,</span> <span class="pre">refresh-expire,</span>
<span class="pre">expunge,</span> <span class="pre">delete&quot;</span></code>, and is often used as in <code class="docutils literal notranslate"><span class="pre">&quot;all,</span> <span class="pre">delete-orphan&quot;</span></code>
to indicate that related objects should follow along with the
parent object in all cases, and be deleted when de-associated.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="cascades.html#unitofwork-cascades"><span class="std std-ref">Cascades</span></a> - Full detail on each of the available
cascade options.</p>
<p><a class="reference internal" href="tutorial.html#tutorial-delete-cascade"><span class="std std-ref">Configuring delete/delete-orphan Cascade</span></a> - Tutorial example describing
a delete cascade.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.cascade_backrefs"></span><strong>cascade_backrefs=True</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.cascade_backrefs">¶</a> – <p>A boolean value indicating if the <code class="docutils literal notranslate"><span class="pre">save-update</span></code> cascade should
operate along an assignment event intercepted by a backref.
When set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, the attribute managed by this relationship
will not cascade an incoming transient object into the session of a
persistent parent, if the event is received via backref.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="cascades.html#backref-cascade"><span class="std std-ref">Controlling Cascade on Backrefs</span></a> - Full discussion and examples on how
the <a class="reference internal" href="#sqlalchemy.orm.relationship.params.cascade_backrefs" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.cascade_backrefs</span></code></a> option is used.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.collection_class"></span><strong>collection_class</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.collection_class">¶</a> – <p>A class or callable that returns a new list-holding object. will
be used in place of a plain list for storing elements.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="collections.html#custom-collections"><span class="std std-ref">Customizing Collection Access</span></a> - Introductory documentation and
examples.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.comparator_factory"></span><strong>comparator_factory</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.comparator_factory">¶</a> – <p>A class which extends <a class="reference internal" href="internals.html#sqlalchemy.orm.RelationshipProperty.Comparator" title="sqlalchemy.orm.RelationshipProperty.Comparator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Comparator</span></code></a>
which provides custom SQL clause generation for comparison
operations.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="internals.html#sqlalchemy.orm.PropComparator" title="sqlalchemy.orm.PropComparator"><code class="xref py py-class docutils literal notranslate"><span class="pre">PropComparator</span></code></a> - some detail on redefining comparators
at this level.</p>
<p><a class="reference internal" href="mapped_attributes.html#custom-comparators"><span class="std std-ref">Operator Customization</span></a> - Brief intro to this feature.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.distinct_target_key"></span><strong>distinct_target_key=None</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.distinct_target_key">¶</a> – <p>Indicate if a “subquery” eager load should apply the DISTINCT
keyword to the innermost SELECT statement.  When left as <code class="docutils literal notranslate"><span class="pre">None</span></code>,
the DISTINCT keyword will be applied in those cases when the target
columns do not comprise the full primary key of the target table.
When set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, the DISTINCT keyword is applied to the
innermost SELECT unconditionally.</p>
<p>It may be desirable to set this flag to False when the DISTINCT is
reducing performance of the innermost subquery beyond that of what
duplicate innermost rows may be causing.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.9.0: </span>-
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.distinct_target_key" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.distinct_target_key</span></code></a> now defaults to
<code class="docutils literal notranslate"><span class="pre">None</span></code>, so that the feature enables itself automatically for
those cases where the innermost query targets a non-unique
key.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="loading_relationships.html"><span class="std std-ref">Relationship Loading Techniques</span></a> - includes an introduction to subquery
eager loading.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.doc"></span><strong>doc</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.doc">¶</a> – Docstring which will be applied to the resulting descriptor.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.extension"></span><strong>extension</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.extension">¶</a> – <p>an <a class="reference internal" href="deprecated.html#sqlalchemy.orm.interfaces.AttributeExtension" title="sqlalchemy.orm.interfaces.AttributeExtension"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeExtension</span></code></a> instance, or list of extensions,
which will be prepended to the list of attribute listeners for
the resulting descriptor placed on the class.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 0.7: </span><a class="reference internal" href="deprecated.html#sqlalchemy.orm.interfaces.AttributeExtension" title="sqlalchemy.orm.interfaces.AttributeExtension"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeExtension</span></code></a> is deprecated in favor of the <a class="reference internal" href="events.html#sqlalchemy.orm.events.AttributeEvents" title="sqlalchemy.orm.events.AttributeEvents"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeEvents</span></code></a> listener interface.  The <a class="reference internal" href="#sqlalchemy.orm.relationship.params.extension" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.extension</span></code></a> parameter will be removed in a future release.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.foreign_keys"></span><strong>foreign_keys</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.foreign_keys">¶</a> – <p>A list of columns which are to be used as “foreign key”
columns, or columns which refer to the value in a remote
column, within the context of this <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>
object’s <a class="reference internal" href="#sqlalchemy.orm.relationship.params.primaryjoin" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.primaryjoin</span></code></a> condition.
That is, if the <a class="reference internal" href="#sqlalchemy.orm.relationship.params.primaryjoin" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.primaryjoin</span></code></a>
condition of this <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> is <code class="docutils literal notranslate"><span class="pre">a.id</span> <span class="pre">==</span>
<span class="pre">b.a_id</span></code>, and the values in <code class="docutils literal notranslate"><span class="pre">b.a_id</span></code> are required to be
present in <code class="docutils literal notranslate"><span class="pre">a.id</span></code>, then the “foreign key” column of this
<a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> is <code class="docutils literal notranslate"><span class="pre">b.a_id</span></code>.</p>
<p>In normal cases, the <a class="reference internal" href="#sqlalchemy.orm.relationship.params.foreign_keys" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.foreign_keys</span></code></a>
parameter is <strong>not required.</strong> <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> will
automatically determine which columns in the
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.primaryjoin" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.primaryjoin</span></code></a> condition are to be
considered “foreign key” columns based on those
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> objects that specify
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>,
or are otherwise listed as referencing columns in a
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a> construct.
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.foreign_keys" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.foreign_keys</span></code></a> is only needed when:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>There is more than one way to construct a join from the local
table to the remote table, as there are multiple foreign key
references present.  Setting <code class="docutils literal notranslate"><span class="pre">foreign_keys</span></code> will limit the
<a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>
to consider just those columns specified
here as “foreign”.</p></li>
<li><p>The <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> being mapped does not actually have
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKey" title="sqlalchemy.schema.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> or
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="sqlalchemy.schema.ForeignKeyConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>
constructs present, often because the table
was reflected from a database that does not support foreign key
reflection (MySQL MyISAM).</p></li>
<li><p>The <a class="reference internal" href="#sqlalchemy.orm.relationship.params.primaryjoin" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.primaryjoin</span></code></a>
argument is used to
construct a non-standard join condition, which makes use of
columns or expressions that do not normally refer to their
“parent” column, such as a join condition expressed by a
complex comparison using a SQL function.</p></li>
</ol>
</div></blockquote>
<p>The <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> construct will raise informative
error messages that suggest the use of the
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.foreign_keys" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.foreign_keys</span></code></a> parameter when
presented with an ambiguous condition.   In typical cases,
if <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> doesn’t raise any exceptions, the
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.foreign_keys" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.foreign_keys</span></code></a> parameter is usually
not needed.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.relationship.params.foreign_keys" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.foreign_keys</span></code></a> may also be passed as a
callable function which is evaluated at mapper initialization time,
and may be passed as a Python-evaluable string when using
Declarative.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When passed as a Python-evaluable string, the
argument is interpreted using Python’s <code class="docutils literal notranslate"><span class="pre">eval()</span></code> function.
<strong>DO NOT PASS UNTRUSTED INPUT TO THIS STRING</strong>.
See <a class="reference internal" href="extensions/declarative/relationships.html#declarative-relationship-eval"><span class="std std-ref">Evaluation of relationship arguments</span></a> for details on
declarative evaluation of <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> arguments.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="join_conditions.html#relationship-foreign-keys"><span class="std std-ref">Handling Multiple Join Paths</span></a></p>
<p><a class="reference internal" href="join_conditions.html#relationship-custom-foreign"><span class="std std-ref">Creating Custom Foreign Conditions</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.foreign" title="sqlalchemy.orm.foreign"><code class="xref py py-func docutils literal notranslate"><span class="pre">foreign()</span></code></a> - allows direct annotation of the “foreign”
columns within a <a class="reference internal" href="#sqlalchemy.orm.relationship.params.primaryjoin" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.primaryjoin</span></code></a>
condition.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.info"></span><strong>info</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.info">¶</a> – Optional data dictionary which will be populated into the
<a class="reference internal" href="internals.html#sqlalchemy.orm.interfaces.MapperProperty.info" title="sqlalchemy.orm.interfaces.MapperProperty.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MapperProperty.info</span></code></a> attribute of this object.</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.innerjoin"></span><strong>innerjoin=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.innerjoin">¶</a> – <p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, joined eager loads will use an inner join to join
against related tables instead of an outer join.  The purpose
of this option is generally one of performance, as inner joins
generally perform better than outer joins.</p>
<p>This flag can be set to <code class="docutils literal notranslate"><span class="pre">True</span></code> when the relationship references an
object via many-to-one using local foreign keys that are not
nullable, or when the reference is one-to-one or a collection that
is guaranteed to have one or at least one entry.</p>
<p>The option supports the same “nested” and “unnested” options as
that of <a class="reference internal" href="loading_relationships.html#sqlalchemy.orm.joinedload.params.innerjoin" title="sqlalchemy.orm.joinedload"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">joinedload.innerjoin</span></code></a>.  See that flag
for details on nested / unnested behaviors.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="loading_relationships.html#sqlalchemy.orm.joinedload.params.innerjoin" title="sqlalchemy.orm.joinedload"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">joinedload.innerjoin</span></code></a> - the option as specified by
loader option, including detail on nesting behavior.</p>
<p><a class="reference internal" href="loading_relationships.html#what-kind-of-loading"><span class="std std-ref">What Kind of Loading to Use ?</span></a> - Discussion of some details of
various loader options.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.join_depth"></span><strong>join_depth</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.join_depth">¶</a> – <p>When non-<code class="docutils literal notranslate"><span class="pre">None</span></code>, an integer value indicating how many levels
deep “eager” loaders should join on a self-referring or cyclical
relationship.  The number counts how many times the same Mapper
shall be present in the loading condition along a particular join
branch.  When left at its default of <code class="docutils literal notranslate"><span class="pre">None</span></code>, eager loaders
will stop chaining when they encounter a the same target mapper
which is already higher up in the chain.  This option applies
both to joined- and subquery- eager loaders.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="self_referential.html#self-referential-eager-loading"><span class="std std-ref">Configuring Self-Referential Eager Loading</span></a> - Introductory documentation
and examples.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.lazy"></span><strong>lazy='select'</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.lazy">¶</a> – <p>specifies
How the related items should be loaded.  Default value is
<code class="docutils literal notranslate"><span class="pre">select</span></code>.  Values include:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">select</span></code> - items should be loaded lazily when the property is
first accessed, using a separate SELECT statement, or identity map
fetch for simple many-to-one references.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">immediate</span></code> - items should be loaded as the parents are loaded,
using a separate SELECT statement, or identity map fetch for
simple many-to-one references.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">joined</span></code> - items should be loaded “eagerly” in the same query as
that of the parent, using a JOIN or LEFT OUTER JOIN.  Whether
the join is “outer” or not is determined by the
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.innerjoin" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.innerjoin</span></code></a> parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">subquery</span></code> - items should be loaded “eagerly” as the parents are
loaded, using one additional SQL statement, which issues a JOIN to
a subquery of the original statement, for each collection
requested.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">selectin</span></code> - items should be loaded “eagerly” as the parents
are loaded, using one or more additional SQL statements, which
issues a JOIN to the immediate parent object, specifying primary
key identifiers using an IN clause.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2.</span></p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">noload</span></code> - no loading should occur at any time.  This is to
support “write-only” attributes, or attributes which are
populated in some manner specific to the application.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">raise</span></code> - lazy loading is disallowed; accessing
the attribute, if its value were not already loaded via eager
loading, will raise an <a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a>.
This strategy can be used when objects are to be detached from
their attached <a class="reference internal" href="session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> after they are loaded.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">raise_on_sql</span></code> - lazy loading that emits SQL is disallowed;
accessing the attribute, if its value were not already loaded via
eager loading, will raise an
<a class="reference internal" href="../core/exceptions.html#sqlalchemy.exc.InvalidRequestError" title="sqlalchemy.exc.InvalidRequestError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">InvalidRequestError</span></code></a>, <strong>if the lazy load
needs to emit SQL</strong>.  If the lazy load can pull the related value
from the identity map or determine that it should be None, the
value is loaded.  This strategy can be used when objects will
remain associated with the attached <a class="reference internal" href="session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>, however
additional SELECT statements should be blocked.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">dynamic</span></code> - the attribute will return a pre-configured
<a class="reference internal" href="query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> object for all read
operations, onto which further filtering operations can be
applied before iterating the results.  See
the section <a class="reference internal" href="collections.html#dynamic-relationship"><span class="std std-ref">Dynamic Relationship Loaders</span></a> for more details.</p></li>
<li><p>True - a synonym for ‘select’</p></li>
<li><p>False - a synonym for ‘joined’</p></li>
<li><p>None - a synonym for ‘noload’</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="loading_relationships.html"><span class="doc">Relationship Loading Techniques</span></a> - Full documentation on
relationship loader configuration.</p>
<p><a class="reference internal" href="collections.html#dynamic-relationship"><span class="std std-ref">Dynamic Relationship Loaders</span></a> - detail on the <code class="docutils literal notranslate"><span class="pre">dynamic</span></code> option.</p>
<p><a class="reference internal" href="collections.html#collections-noload-raiseload"><span class="std std-ref">Setting Noload, RaiseLoad</span></a> - notes on “noload” and “raise”</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.load_on_pending"></span><strong>load_on_pending=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.load_on_pending">¶</a> – <p>Indicates loading behavior for transient or pending parent objects.</p>
<p>When set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, causes the lazy-loader to
issue a query for a parent object that is not persistent, meaning it
has never been flushed.  This may take effect for a pending object
when autoflush is disabled, or for a transient object that has been
“attached” to a <a class="reference internal" href="session_api.html#sqlalchemy.orm.session.Session" title="sqlalchemy.orm.session.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> but is not part of its pending
collection.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.relationship.params.load_on_pending" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.load_on_pending</span></code></a>
flag does not improve
behavior when the ORM is used normally - object references should be
constructed at the object level, not at the foreign key level, so
that they are present in an ordinary way before a flush proceeds.
This flag is not not intended for general use.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="session_api.html#sqlalchemy.orm.session.Session.enable_relationship_loading" title="sqlalchemy.orm.session.Session.enable_relationship_loading"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.enable_relationship_loading()</span></code></a> - this method
establishes “load on pending” behavior for the whole object, and
also allows loading on objects that remain transient or
detached.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.order_by"></span><strong>order_by</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.order_by">¶</a> – <p>Indicates the ordering that should be applied when loading these
items.  <a class="reference internal" href="#sqlalchemy.orm.relationship.params.order_by" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.order_by</span></code></a>
is expected to refer to
one of the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
objects to which the target class is
mapped, or the attribute itself bound to the target class which
refers to the column.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.relationship.params.order_by" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.order_by</span></code></a>
may also be passed as a callable
function which is evaluated at mapper initialization time, and may
be passed as a Python-evaluable string when using Declarative.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When passed as a Python-evaluable string, the
argument is interpreted using Python’s <code class="docutils literal notranslate"><span class="pre">eval()</span></code> function.
<strong>DO NOT PASS UNTRUSTED INPUT TO THIS STRING</strong>.
See <a class="reference internal" href="extensions/declarative/relationships.html#declarative-relationship-eval"><span class="std std-ref">Evaluation of relationship arguments</span></a> for details on
declarative evaluation of <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> arguments.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.passive_deletes"></span><strong>passive_deletes=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.passive_deletes">¶</a> – <p>Indicates loading behavior during delete operations.</p>
<p>A value of True indicates that unloaded child items should not
be loaded during a delete operation on the parent.  Normally,
when a parent item is deleted, all child items are loaded so
that they can either be marked as deleted, or have their
foreign key to the parent set to NULL.  Marking this flag as
True usually implies an ON DELETE &lt;CASCADE|SET NULL&gt; rule is in
place which will handle updating/deleting child rows on the
database side.</p>
<p>Additionally, setting the flag to the string value ‘all’ will
disable the “nulling out” of the child foreign keys, when the parent
object is deleted and there is no delete or delete-orphan cascade
enabled.  This is typically used when a triggering or error raise
scenario is in place on the database side.  Note that the foreign
key attributes on in-session child objects will not be changed after
a flush occurs so this is a very special use-case setting.
Additionally, the “nulling out” will still occur if the child
object is de-associated with the parent.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="collections.html#passive-deletes"><span class="std std-ref">Using Passive Deletes</span></a> - Introductory documentation
and examples.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.passive_updates"></span><strong>passive_updates=True</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.passive_updates">¶</a> – <p>Indicates the persistence behavior to take when a referenced
primary key value changes in place, indicating that the referencing
foreign key columns will also need their value changed.</p>
<p>When True, it is assumed that <code class="docutils literal notranslate"><span class="pre">ON</span> <span class="pre">UPDATE</span> <span class="pre">CASCADE</span></code> is configured on
the foreign key in the database, and that the database will
handle propagation of an UPDATE from a source column to
dependent rows.  When False, the SQLAlchemy
<a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>
construct will attempt to emit its own UPDATE statements to
modify related targets.  However note that SQLAlchemy <strong>cannot</strong>
emit an UPDATE for more than one level of cascade.  Also,
setting this flag to False is not compatible in the case where
the database is in fact enforcing referential integrity, unless
those constraints are explicitly “deferred”, if the target backend
supports it.</p>
<p>It is highly advised that an application which is employing
mutable primary keys keeps <code class="docutils literal notranslate"><span class="pre">passive_updates</span></code> set to True,
and instead uses the referential integrity features of the database
itself in order to handle the change efficiently and fully.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="relationship_persistence.html#passive-updates"><span class="std std-ref">Mutable Primary Keys / Update Cascades</span></a> - Introductory documentation and
examples.</p>
<p><a class="reference internal" href="mapping_api.html#sqlalchemy.orm.mapper.params.passive_updates" title="sqlalchemy.orm.mapper"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">mapper.passive_updates</span></code></a> - a similar flag which
takes effect for joined-table inheritance mappings.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.post_update"></span><strong>post_update</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.post_update">¶</a> – <p>This indicates that the relationship should be handled by a
second UPDATE statement after an INSERT or before a
DELETE. Currently, it also will issue an UPDATE after the
instance was UPDATEd as well, although this technically should
be improved. This flag is used to handle saving bi-directional
dependencies between two individual rows (i.e. each row
references the other), where it would otherwise be impossible to
INSERT or DELETE both rows fully since one row exists before the
other. Use this flag when a particular mapping arrangement will
incur two rows that are dependent on each other, such as a table
that has a one-to-many relationship to a set of child rows, and
also has a column that references a single child row within that
list (i.e. both tables contain a foreign key to each other). If
a flush operation returns an error that a “cyclical
dependency” was detected, this is a cue that you might want to
use <a class="reference internal" href="#sqlalchemy.orm.relationship.params.post_update" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.post_update</span></code></a> to “break” the cycle.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="relationship_persistence.html#post-update"><span class="std std-ref">Rows that point to themselves / Mutually Dependent Rows</span></a> - Introductory documentation and examples.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.primaryjoin"></span><strong>primaryjoin</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.primaryjoin">¶</a> – <p>A SQL expression that will be used as the primary
join of the child object against the parent object, or in a
many-to-many relationship the join of the parent object to the
association table. By default, this value is computed based on the
foreign key relationships of the parent and child tables (or
association table).</p>
<p><a class="reference internal" href="#sqlalchemy.orm.relationship.params.primaryjoin" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.primaryjoin</span></code></a> may also be passed as a
callable function which is evaluated at mapper initialization time,
and may be passed as a Python-evaluable string when using
Declarative.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When passed as a Python-evaluable string, the
argument is interpreted using Python’s <code class="docutils literal notranslate"><span class="pre">eval()</span></code> function.
<strong>DO NOT PASS UNTRUSTED INPUT TO THIS STRING</strong>.
See <a class="reference internal" href="extensions/declarative/relationships.html#declarative-relationship-eval"><span class="std std-ref">Evaluation of relationship arguments</span></a> for details on
declarative evaluation of <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> arguments.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="join_conditions.html#relationship-primaryjoin"><span class="std std-ref">Specifying Alternate Join Conditions</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.remote_side"></span><strong>remote_side</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.remote_side">¶</a> – <p>Used for self-referential relationships, indicates the column or
list of columns that form the “remote side” of the relationship.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.relationship.params.remote_side" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.remote_side</span></code></a> may also be passed as a
callable function which is evaluated at mapper initialization time,
and may be passed as a Python-evaluable string when using
Declarative.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When passed as a Python-evaluable string, the
argument is interpreted using Python’s <code class="docutils literal notranslate"><span class="pre">eval()</span></code> function.
<strong>DO NOT PASS UNTRUSTED INPUT TO THIS STRING</strong>.
See <a class="reference internal" href="extensions/declarative/relationships.html#declarative-relationship-eval"><span class="std std-ref">Evaluation of relationship arguments</span></a> for details on
declarative evaluation of <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> arguments.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="self_referential.html#self-referential"><span class="std std-ref">Adjacency List Relationships</span></a> - in-depth explanation of how
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.remote_side" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.remote_side</span></code></a>
is used to configure self-referential relationships.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.remote" title="sqlalchemy.orm.remote"><code class="xref py py-func docutils literal notranslate"><span class="pre">remote()</span></code></a> - an annotation function that accomplishes the
same purpose as <a class="reference internal" href="#sqlalchemy.orm.relationship.params.remote_side" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.remote_side</span></code></a>,
typically
when a custom <a class="reference internal" href="#sqlalchemy.orm.relationship.params.primaryjoin" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.primaryjoin</span></code></a> condition
is used.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.query_class"></span><strong>query_class</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.query_class">¶</a> – <p>A <a class="reference internal" href="query.html#sqlalchemy.orm.query.Query" title="sqlalchemy.orm.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a>
subclass that will be used as the base of the
“appender query” returned by a “dynamic” relationship, that
is, a relationship that specifies <code class="docutils literal notranslate"><span class="pre">lazy=&quot;dynamic&quot;</span></code> or was
otherwise constructed using the <a class="reference internal" href="#sqlalchemy.orm.dynamic_loader" title="sqlalchemy.orm.dynamic_loader"><code class="xref py py-func docutils literal notranslate"><span class="pre">dynamic_loader()</span></code></a>
function.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="collections.html#dynamic-relationship"><span class="std std-ref">Dynamic Relationship Loaders</span></a> - Introduction to “dynamic”
relationship loaders.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.secondaryjoin"></span><strong>secondaryjoin</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.secondaryjoin">¶</a> – <p>A SQL expression that will be used as the join of
an association table to the child object. By default, this value is
computed based on the foreign key relationships of the association
and child tables.</p>
<p><a class="reference internal" href="#sqlalchemy.orm.relationship.params.secondaryjoin" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.secondaryjoin</span></code></a> may also be passed as a
callable function which is evaluated at mapper initialization time,
and may be passed as a Python-evaluable string when using
Declarative.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When passed as a Python-evaluable string, the
argument is interpreted using Python’s <code class="docutils literal notranslate"><span class="pre">eval()</span></code> function.
<strong>DO NOT PASS UNTRUSTED INPUT TO THIS STRING</strong>.
See <a class="reference internal" href="extensions/declarative/relationships.html#declarative-relationship-eval"><span class="std std-ref">Evaluation of relationship arguments</span></a> for details on
declarative evaluation of <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> arguments.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="join_conditions.html#relationship-primaryjoin"><span class="std std-ref">Specifying Alternate Join Conditions</span></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.single_parent"></span><strong>single_parent</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.single_parent">¶</a> – <p>When True, installs a validator which will prevent objects
from being associated with more than one parent at a time.
This is used for many-to-one or many-to-many relationships that
should be treated either as one-to-one or one-to-many.  Its usage
is optional, except for <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> constructs which
are many-to-one or many-to-many and also
specify the <code class="docutils literal notranslate"><span class="pre">delete-orphan</span></code> cascade option.  The
<a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> construct itself will raise an error
instructing when this option is required.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="cascades.html#unitofwork-cascades"><span class="std std-ref">Cascades</span></a> - includes detail on when the
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.single_parent" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.single_parent</span></code></a>
flag may be appropriate.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.uselist"></span><strong>uselist</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.uselist">¶</a> – <p>A boolean that indicates if this property should be loaded as a
list or a scalar. In most cases, this value is determined
automatically by <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> at mapper configuration
time, based on the type and direction
of the relationship - one to many forms a list, many to one
forms a scalar, many to many is a list. If a scalar is desired
where normally a list would be present, such as a bi-directional
one-to-one relationship, set <a class="reference internal" href="#sqlalchemy.orm.relationship.params.uselist" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.uselist</span></code></a>
to
False.</p>
<p>The <a class="reference internal" href="#sqlalchemy.orm.relationship.params.uselist" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.uselist</span></code></a>
flag is also available on an
existing <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>
construct as a read-only attribute,
which can be used to determine if this <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>
deals
with collections or scalar attributes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">User</span><span class="o">.</span><span class="n">addresses</span><span class="o">.</span><span class="n">property</span><span class="o">.</span><span class="n">uselist</span>
<span class="go">True</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="basic_relationships.html#relationships-one-to-one"><span class="std std-ref">One To One</span></a> - Introduction to the “one to
one” relationship pattern, which is typically when the
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.uselist" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.uselist</span></code></a> flag is needed.</p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.viewonly"></span><strong>viewonly=False</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.viewonly">¶</a> – <p>When set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, the relationship is used only for loading
objects, and not for any persistence operation.  A
<a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> which specifies
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.viewonly" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.viewonly</span></code></a> can work
with a wider range of SQL operations within the
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.primaryjoin" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.primaryjoin</span></code></a> condition, including
operations that feature the use of a variety of comparison operators
as well as SQL functions such as <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.cast" title="sqlalchemy.sql.expression.cast"><code class="xref py py-func docutils literal notranslate"><span class="pre">cast()</span></code></a>.  The
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.viewonly" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.viewonly</span></code></a>
flag is also of general use when defining any kind of
<a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> that doesn’t represent
the full set of related objects, to prevent modifications of the
collection from resulting in persistence operations.</p>
<p>When using the <a class="reference internal" href="#sqlalchemy.orm.relationship.params.viewonly" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.viewonly</span></code></a> flag in
conjunction with backrefs, the
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.sync_backref" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.sync_backref</span></code></a> should be set to False;
this indicates that the backref should not actually populate this
relationship with data when changes occur on the other side; as this
is a viewonly relationship, it cannot accommodate changes in state
correctly as these will not be persisted.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.17: </span>- the
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.sync_backref" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.sync_backref</span></code></a>
flag set to False is required when using viewonly in conjunction
with backrefs. A warning is emitted when this flag is not set.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.orm.relationship.params.sync_backref" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.sync_backref</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.sync_backref"></span><strong>sync_backref</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.sync_backref">¶</a> – <p>A boolean that enables the events used to synchronize the in-Python
attributes when this relationship is target of either
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.backref" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.backref</span></code></a> or
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.back_populates" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.back_populates</span></code></a>.</p>
<p>Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>, which indicates that an automatic value should
be selected based on the value of the
<a class="reference internal" href="#sqlalchemy.orm.relationship.params.viewonly" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.viewonly</span></code></a> flag.  When left at its
default, changes in state for writable relationships will be
back-populated normally.  For viewonly relationships, a warning is
emitted unless the flag is set to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.17.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sqlalchemy.orm.relationship.params.viewonly" title="sqlalchemy.orm.relationship"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">relationship.viewonly</span></code></a></p>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.orm.relationship.params.omit_join"></span><strong>omit_join</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.orm.relationship.params.omit_join">¶</a> – <p>Allows manual control over the “selectin” automatic join
optimization.  Set to <code class="docutils literal notranslate"><span class="pre">False</span></code> to disable the “omit join” feature
added in SQLAlchemy 1.3; or leave as <code class="docutils literal notranslate"><span class="pre">None</span></code> to leave automatic
optimization in place.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This flag may only be set to <code class="docutils literal notranslate"><span class="pre">False</span></code>.   It is not
necessary to set it to <code class="docutils literal notranslate"><span class="pre">True</span></code> as the “omit_join” optimization is
automatically detected; if it is not detected, then the
optimization is not supported.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.3.11: </span>setting <code class="docutils literal notranslate"><span class="pre">omit_join</span></code> to True will now
emit a warning as this was not the intended use of this flag.</p>
</div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="sqlalchemy.orm.backref">
<em class="property">function </em><code class="sig-prename descclassname">sqlalchemy.orm.</code><code class="sig-name descname">backref</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.backref" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a back reference with explicit keyword arguments, which are the
same arguments one can send to <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>.</p>
<p>Used with the <code class="docutils literal notranslate"><span class="pre">backref</span></code> keyword argument to <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a> in
place of a string argument, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;items&#39;</span><span class="p">:</span><span class="n">relationship</span><span class="p">(</span>
    <span class="n">SomeItem</span><span class="p">,</span> <span class="n">backref</span><span class="o">=</span><span class="n">backref</span><span class="p">(</span><span class="s1">&#39;parent&#39;</span><span class="p">,</span> <span class="n">lazy</span><span class="o">=</span><span class="s1">&#39;subquery&#39;</span><span class="p">))</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="backref.html#relationships-backref"><span class="std std-ref">Linking Relationships with Backref</span></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="sqlalchemy.orm.relation">
<em class="property">function </em><code class="sig-prename descclassname">sqlalchemy.orm.</code><code class="sig-name descname">relation</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.relation" title="Permalink to this definition">¶</a></dt>
<dd><p>A synonym for <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt id="sqlalchemy.orm.dynamic_loader">
<em class="property">function </em><code class="sig-prename descclassname">sqlalchemy.orm.</code><code class="sig-name descname">dynamic_loader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">argument</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.dynamic_loader" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a dynamically-loading mapper property.</p>
<p>This is essentially the same as
using the <code class="docutils literal notranslate"><span class="pre">lazy='dynamic'</span></code> argument with <a class="reference internal" href="#sqlalchemy.orm.relationship" title="sqlalchemy.orm.relationship"><code class="xref py py-func docutils literal notranslate"><span class="pre">relationship()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dynamic_loader</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">)</span>

<span class="c1"># is the same as</span>

<span class="n">relationship</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">,</span> <span class="n">lazy</span><span class="o">=</span><span class="s2">&quot;dynamic&quot;</span><span class="p">)</span></pre></div>
</div>
<p>See the section <a class="reference internal" href="collections.html#dynamic-relationship"><span class="std std-ref">Dynamic Relationship Loaders</span></a> for more details
on dynamic loading.</p>
</dd></dl>

<dl class="py function">
<dt id="sqlalchemy.orm.foreign">
<em class="property">function </em><code class="sig-prename descclassname">sqlalchemy.orm.</code><code class="sig-name descname">foreign</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expr</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.foreign" title="Permalink to this definition">¶</a></dt>
<dd><p>Annotate a portion of a primaryjoin expression
with a ‘foreign’ annotation.</p>
<p>See the section <a class="reference internal" href="join_conditions.html#relationship-custom-foreign"><span class="std std-ref">Creating Custom Foreign Conditions</span></a> for a
description of use.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="join_conditions.html#relationship-custom-foreign"><span class="std std-ref">Creating Custom Foreign Conditions</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.remote" title="sqlalchemy.orm.remote"><code class="xref py py-func docutils literal notranslate"><span class="pre">remote()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt id="sqlalchemy.orm.remote">
<em class="property">function </em><code class="sig-prename descclassname">sqlalchemy.orm.</code><code class="sig-name descname">remote</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">expr</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.orm.remote" title="Permalink to this definition">¶</a></dt>
<dd><p>Annotate a portion of a primaryjoin expression
with a ‘remote’ annotation.</p>
<p>See the section <a class="reference internal" href="join_conditions.html#relationship-custom-foreign"><span class="std std-ref">Creating Custom Foreign Conditions</span></a> for a
description of use.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="join_conditions.html#relationship-custom-foreign"><span class="std std-ref">Creating Custom Foreign Conditions</span></a></p>
<p><a class="reference internal" href="#sqlalchemy.orm.foreign" title="sqlalchemy.orm.foreign"><code class="xref py py-func docutils literal notranslate"><span class="pre">foreign()</span></code></a></p>
</div>
</dd></dl>

</div>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="relationship_persistence.html" title="previous chapter">Special Relationship Persistence Patterns</a>
        Next:
        <a href="loading_objects.html" title="next chapter">Loading Objects</a>

    <div id="docs-copyright">
        &copy; <a href="../copyright.html">Copyright</a> 2007-2020, the SQLAlchemy authors and contributors.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 3.0.3.
    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '1.3.17',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>

    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../_static/detectmobile.js"></script>
    <script type="text/javascript" src="../_static/init.js"></script>


    </body>
</html>


