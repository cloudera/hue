{"body":"<div><div><div class=\"hue-doc-title\">Impala String Functions</div><div><p>\n      String functions are classified as those primarily accepting or returning <span class=\"hue-doc-codeph\">STRING</span>,\n      <span class=\"hue-doc-codeph\">VARCHAR</span>, or <span class=\"hue-doc-codeph\">CHAR</span> data types, for example to measure the length of a string\n      or concatenate two strings together.\n      <ul><li>\n          All the functions that accept <span class=\"hue-doc-codeph\">STRING</span> arguments also accept the <span class=\"hue-doc-codeph\">VARCHAR</span>\n          and <span class=\"hue-doc-codeph\">CHAR</span> types introduced in Impala 2.0.\n        </li><li>\n          Whenever <span class=\"hue-doc-codeph\">VARCHAR</span> or <span class=\"hue-doc-codeph\">CHAR</span> values are passed to a function that returns a\n          string value, the return type is normalized to <span class=\"hue-doc-codeph\">STRING</span>. For example, a call to\n          <span class=\"hue-doc-codeph\">concat()</span> with a mix of <span class=\"hue-doc-codeph\">STRING</span>, <span class=\"hue-doc-codeph\">VARCHAR</span>, and\n          <span class=\"hue-doc-codeph\">CHAR</span> arguments produces a <span class=\"hue-doc-codeph\">STRING</span> result.\n        </li></ul></p><p><b>Related information:</b></p><p>\n      The string functions operate mainly on these data types: <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_string.xml\" data-doc-anchor-id=\"string\">STRING Data Type</a>,\n      <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_varchar.xml\" data-doc-anchor-id=\"varchar\">VARCHAR Data Type (Impala 2.0 or higher only)</a>, and <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_char.xml\" data-doc-anchor-id=\"char\">CHAR Data Type (Impala 2.0 or higher only)</a>.\n    </p><p><b>Function reference:</b></p><p>\n      Impala supports the following string functions:\n    </p><dl><dt><span class=\"hue-doc-codeph\">ascii(string str)</span></dt><dd><b>Purpose:</b> Returns the numeric ASCII code of the first character of the argument.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">int</span></p></dd><dt><span class=\"hue-doc-codeph\">base64decode(string str)</span></dt><dd><b>Purpose:</b><p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p><p><b>Usage notes:</b></p><p>\n            For general information about Base64 encoding, see\n            <a class=\"hue-doc-external-link\" href=\"https://en.wikipedia.org/wiki/Base64\" target=\"_blank\">https://en.wikipedia.org/wiki/Base64</a>.\n          </p><p>\n        The functions <span class=\"hue-doc-codeph\">base64encode()</span> and\n        <span class=\"hue-doc-codeph\">base64decode()</span> are typically used\n        in combination, to store in an Impala table string data that is\n        problematic to store or transmit. For example, you could use\n        these functions to store string data that uses an encoding\n        other than UTF-8, or to transform the values in contexts that\n        require ASCII values, such as for partition key columns.\n        Keep in mind that base64-encoded values produce different results\n        for string functions such as <span class=\"hue-doc-codeph\">LENGTH()</span>,\n        <span class=\"hue-doc-codeph\">MAX()</span>, and <span class=\"hue-doc-codeph\">MIN()</span> than when\n        those functions are called with the unencoded string values.\n      </p><p>\n        The set of characters that can be generated as output\n        from <span class=\"hue-doc-codeph\">base64encode()</span>, or specified in\n        the argument string to <span class=\"hue-doc-codeph\">base64decode()</span>,\n        are the ASCII uppercase and lowercase letters (A-Z, a-z),\n        digits (0-9), and the punctuation characters\n        <span class=\"hue-doc-codeph\">+</span>, <span class=\"hue-doc-codeph\">/</span>, and <span class=\"hue-doc-codeph\">=</span>.\n      </p><p>\n        All return values produced by <span class=\"hue-doc-codeph\">base64encode()</span>\n        are a multiple of 4 bytes in length. All argument values\n        supplied to <span class=\"hue-doc-codeph\">base64decode()</span> must also be a\n        multiple of 4 bytes in length. If a base64-encoded value\n        would otherwise have a different length, it can be padded\n        with trailing <span class=\"hue-doc-codeph\">=</span> characters to reach a length\n        that is a multiple of 4 bytes.\n      </p><p>\n        If the argument string to <span class=\"hue-doc-codeph\">base64decode()</span> does\n        not represent a valid base64-encoded value, subject to the\n        constraints of the Impala implementation such as the allowed\n        character set, the function returns <span class=\"hue-doc-codeph\">NULL</span>.\n      </p><p><b>Examples:</b></p><p>\n        The following examples show how to use <span class=\"hue-doc-codeph\">base64encode()</span>\n        and <span class=\"hue-doc-codeph\">base64decode()</span> together to store and retrieve\n        string values:\n<div class=\"hue-doc-codeblock\">\n-- An arbitrary string can be encoded in base 64.\n-- The length of the output is a multiple of 4 bytes,\n-- padded with trailing = characters if necessary.\nselect base64encode('hello world') as encoded,\n  length(base64encode('hello world')) as length;\n+------------------+--------+\n| encoded          | length |\n+------------------+--------+\n| aGVsbG8gd29ybGQ= | 16     |\n+------------------+--------+\n\n-- Passing an encoded value to base64decode() produces\n-- the original value.\nselect base64decode('aGVsbG8gd29ybGQ=') as decoded;\n+-------------+\n| decoded     |\n+-------------+\n| hello world |\n+-------------+\n</div>\n\n      These examples demonstrate incorrect encoded values that\n      produce <span class=\"hue-doc-codeph\">NULL</span> return values when decoded:\n\n<div class=\"hue-doc-codeblock\">\n-- The input value to base64decode() must be a multiple of 4 bytes.\n-- In this case, leaving off the trailing = padding character\n-- produces a NULL return value.\nselect base64decode('aGVsbG8gd29ybGQ') as decoded;\n+---------+\n| decoded |\n+---------+\n| NULL    |\n+---------+\nWARNINGS: UDF WARNING: Invalid base64 string; input length is 15,\n  which is not a multiple of 4.\n\n-- The input to base64decode() can only contain certain characters.\n-- The $ character in this case causes a NULL return value.\nselect base64decode('abc$');\n+----------------------+\n| base64decode('abc$') |\n+----------------------+\n| NULL                 |\n+----------------------+\nWARNINGS: UDF WARNING: Could not base64 decode input in space 4; actual output length 0\n</div>\n\n      These examples demonstrate <q>round-tripping</q> of an original string to an\n      encoded string, and back again. This technique is applicable if the original\n      source is in an unknown encoding, or if some intermediate processing stage\n      might cause national characters to be misrepresented:\n\n<div class=\"hue-doc-codeblock\">\nselect 'circumflex accents: â, ê, î, ô, û' as original,\n  base64encode('circumflex accents: â, ê, î, ô, û') as encoded;\n+-----------------------------------+------------------------------------------------------+\n| original                          | encoded                                              |\n+-----------------------------------+------------------------------------------------------+\n| circumflex accents: â, ê, î, ô, û | Y2lyY3VtZmxleCBhY2NlbnRzOiDDoiwgw6osIMOuLCDDtCwgw7s= |\n+-----------------------------------+------------------------------------------------------+\n\nselect base64encode('circumflex accents: â, ê, î, ô, û') as encoded,\n  base64decode(base64encode('circumflex accents: â, ê, î, ô, û')) as decoded;\n+------------------------------------------------------+-----------------------------------+\n| encoded                                              | decoded                           |\n+------------------------------------------------------+-----------------------------------+\n| Y2lyY3VtZmxleCBhY2NlbnRzOiDDoiwgw6osIMOuLCDDtCwgw7s= | circumflex accents: â, ê, î, ô, û |\n+------------------------------------------------------+-----------------------------------+\n</div></p></dd><dt><span class=\"hue-doc-codeph\">base64encode(string str)</span></dt><dd><b>Purpose:</b><p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p><p><b>Usage notes:</b></p><p>\n            For general information about Base64 encoding, see\n            <a class=\"hue-doc-external-link\" href=\"https://en.wikipedia.org/wiki/Base64\" target=\"_blank\">https://en.wikipedia.org/wiki/Base64</a>.\n          </p><p>\n        The functions <span class=\"hue-doc-codeph\">base64encode()</span> and\n        <span class=\"hue-doc-codeph\">base64decode()</span> are typically used\n        in combination, to store in an Impala table string data that is\n        problematic to store or transmit. For example, you could use\n        these functions to store string data that uses an encoding\n        other than UTF-8, or to transform the values in contexts that\n        require ASCII values, such as for partition key columns.\n        Keep in mind that base64-encoded values produce different results\n        for string functions such as <span class=\"hue-doc-codeph\">LENGTH()</span>,\n        <span class=\"hue-doc-codeph\">MAX()</span>, and <span class=\"hue-doc-codeph\">MIN()</span> than when\n        those functions are called with the unencoded string values.\n      </p><p>\n        The set of characters that can be generated as output\n        from <span class=\"hue-doc-codeph\">base64encode()</span>, or specified in\n        the argument string to <span class=\"hue-doc-codeph\">base64decode()</span>,\n        are the ASCII uppercase and lowercase letters (A-Z, a-z),\n        digits (0-9), and the punctuation characters\n        <span class=\"hue-doc-codeph\">+</span>, <span class=\"hue-doc-codeph\">/</span>, and <span class=\"hue-doc-codeph\">=</span>.\n      </p><p>\n        All return values produced by <span class=\"hue-doc-codeph\">base64encode()</span>\n        are a multiple of 4 bytes in length. All argument values\n        supplied to <span class=\"hue-doc-codeph\">base64decode()</span> must also be a\n        multiple of 4 bytes in length. If a base64-encoded value\n        would otherwise have a different length, it can be padded\n        with trailing <span class=\"hue-doc-codeph\">=</span> characters to reach a length\n        that is a multiple of 4 bytes.\n      </p><p><b>Examples:</b></p><p>\n        The following examples show how to use <span class=\"hue-doc-codeph\">base64encode()</span>\n        and <span class=\"hue-doc-codeph\">base64decode()</span> together to store and retrieve\n        string values:\n<div class=\"hue-doc-codeblock\">\n-- An arbitrary string can be encoded in base 64.\n-- The length of the output is a multiple of 4 bytes,\n-- padded with trailing = characters if necessary.\nselect base64encode('hello world') as encoded,\n  length(base64encode('hello world')) as length;\n+------------------+--------+\n| encoded          | length |\n+------------------+--------+\n| aGVsbG8gd29ybGQ= | 16     |\n+------------------+--------+\n\n-- Passing an encoded value to base64decode() produces\n-- the original value.\nselect base64decode('aGVsbG8gd29ybGQ=') as decoded;\n+-------------+\n| decoded     |\n+-------------+\n| hello world |\n+-------------+\n</div>\n\n      These examples demonstrate incorrect encoded values that\n      produce <span class=\"hue-doc-codeph\">NULL</span> return values when decoded:\n\n<div class=\"hue-doc-codeblock\">\n-- The input value to base64decode() must be a multiple of 4 bytes.\n-- In this case, leaving off the trailing = padding character\n-- produces a NULL return value.\nselect base64decode('aGVsbG8gd29ybGQ') as decoded;\n+---------+\n| decoded |\n+---------+\n| NULL    |\n+---------+\nWARNINGS: UDF WARNING: Invalid base64 string; input length is 15,\n  which is not a multiple of 4.\n\n-- The input to base64decode() can only contain certain characters.\n-- The $ character in this case causes a NULL return value.\nselect base64decode('abc$');\n+----------------------+\n| base64decode('abc$') |\n+----------------------+\n| NULL                 |\n+----------------------+\nWARNINGS: UDF WARNING: Could not base64 decode input in space 4; actual output length 0\n</div>\n\n      These examples demonstrate <q>round-tripping</q> of an original string to an\n      encoded string, and back again. This technique is applicable if the original\n      source is in an unknown encoding, or if some intermediate processing stage\n      might cause national characters to be misrepresented:\n\n<div class=\"hue-doc-codeblock\">\nselect 'circumflex accents: â, ê, î, ô, û' as original,\n  base64encode('circumflex accents: â, ê, î, ô, û') as encoded;\n+-----------------------------------+------------------------------------------------------+\n| original                          | encoded                                              |\n+-----------------------------------+------------------------------------------------------+\n| circumflex accents: â, ê, î, ô, û | Y2lyY3VtZmxleCBhY2NlbnRzOiDDoiwgw6osIMOuLCDDtCwgw7s= |\n+-----------------------------------+------------------------------------------------------+\n\nselect base64encode('circumflex accents: â, ê, î, ô, û') as encoded,\n  base64decode(base64encode('circumflex accents: â, ê, î, ô, û')) as decoded;\n+------------------------------------------------------+-----------------------------------+\n| encoded                                              | decoded                           |\n+------------------------------------------------------+-----------------------------------+\n| Y2lyY3VtZmxleCBhY2NlbnRzOiDDoiwgw6osIMOuLCDDtCwgw7s= | circumflex accents: â, ê, î, ô, û |\n+------------------------------------------------------+-----------------------------------+\n</div></p></dd><dt><span class=\"hue-doc-codeph\">btrim(string a)</span>,\n          <span class=\"hue-doc-codeph\">btrim(string a, string chars_to_trim)</span></dt><dd><b>Purpose:</b> Removes all instances of one or more characters\n          from the start and end of a <span class=\"hue-doc-codeph\">STRING</span> value.\n          By default, removes only spaces.\n          If a non-<span class=\"hue-doc-codeph\">NULL</span> optional second argument is specified, the function removes all\n          occurrences of characters in that second argument from the beginning and\n          end of the string.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p><p><b>Added in:</b>Impala 2.3.0</p><p><b>Examples:</b></p><p>\n            The following examples show the default <span class=\"hue-doc-codeph\">btrim()</span> behavior,\n            and what changes when you specify the optional second argument.\n            All the examples bracket the output value with <span class=\"hue-doc-codeph\">[ ]</span>\n            so that you can see any leading or trailing spaces in the <span class=\"hue-doc-codeph\">btrim()</span> result.\n            By default, the function removes and number of both leading and trailing spaces.\n            When the second argument is specified, any number of occurrences of any\n            character in the second argument are removed from the start and end of the\n            input string; in this case, spaces are not removed (unless they are part of the second\n            argument) and any instances of the characters are not removed if they do not come\n            right at the beginning or end of the string.\n          </p><div class=\"hue-doc-codeblock\">-- Remove multiple spaces before and one space after.\nselect concat('[',btrim('    hello '),']');\n+---------------------------------------+\n| concat('[', btrim('    hello '), ']') |\n+---------------------------------------+\n| [hello]                               |\n+---------------------------------------+\n\n-- Remove any instances of x or y or z at beginning or end. Leave spaces alone.\nselect concat('[',btrim('xy    hello zyzzxx','xyz'),']');\n+------------------------------------------------------+\n| concat('[', btrim('xy    hello zyzzxx', 'xyz'), ']') |\n+------------------------------------------------------+\n| [    hello ]                                         |\n+------------------------------------------------------+\n\n-- Remove any instances of x or y or z at beginning or end.\n-- Leave x, y, z alone in the middle of the string.\nselect concat('[',btrim('xyhelxyzlozyzzxx','xyz'),']');\n+----------------------------------------------------+\n| concat('[', btrim('xyhelxyzlozyzzxx', 'xyz'), ']') |\n+----------------------------------------------------+\n| [helxyzlo]                                         |\n+----------------------------------------------------+\n</div></dd><dt><span class=\"hue-doc-codeph\">char_length(string a), <span class=\"hue-doc-ph\">character_length(string a)</span></span></dt><dd><b>Purpose:</b> Returns the length in characters of the argument string, including any\n          trailing spaces that pad a <span class=\"hue-doc-codeph\">CHAR</span> value.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">int</span></p><p><b>Usage notes:</b></p><p>\n            When applied to a <span class=\"hue-doc-codeph\">STRING</span> value, it returns the\n            same result as the <span class=\"hue-doc-codeph\">length()</span> function. When applied\n            to a <span class=\"hue-doc-codeph\">CHAR</span> value, it might return a larger value\n            than <span class=\"hue-doc-codeph\">length()</span> does, to account for trailing spaces\n            in the <span class=\"hue-doc-codeph\">CHAR</span>.\n          </p><p><b>Examples:</b></p><p>\n        The following example demonstrates how <span class=\"hue-doc-codeph\">length()</span>\n        and <span class=\"hue-doc-codeph\">char_length()</span> sometimes produce the same result,\n        and sometimes produce different results depending on the type of the\n        argument and the presence of trailing spaces for <span class=\"hue-doc-codeph\">CHAR</span>\n        values. The <span class=\"hue-doc-codeph\">S</span> and <span class=\"hue-doc-codeph\">C</span> values are\n        displayed with enclosing quotation marks to show any trailing spaces.\n<div class=\"hue-doc-codeblock\">create table length_demo (s string, c char(5));\ninsert into length_demo values\n  ('a',cast('a' as char(5))),\n  ('abc',cast('abc' as char(5))),\n  ('hello',cast('hello' as char(5)));\n\nselect concat('\"',s,'\"') as s, concat('\"',c,'\"') as c,\n  length(s), length(c),\n  char_length(s), char_length(c)\nfrom length_demo;\n+---------+---------+-----------+-----------+----------------+----------------+\n| s       | c       | length(s) | length(c) | char_length(s) | char_length(c) |\n+---------+---------+-----------+-----------+----------------+----------------+\n| \"a\"     | \"a    \" | 1         | 1         | 1              | 5              |\n| \"abc\"   | \"abc  \" | 3         | 3         | 3              | 5              |\n| \"hello\" | \"hello\" | 5         | 5         | 5              | 5              |\n+---------+---------+-----------+-----------+----------------+----------------+\n</div></p></dd><dt><span class=\"hue-doc-codeph\">chr(int character_code)</span></dt><dd><b>Purpose:</b> Returns a character specified by a decimal code point value.\n          The interpretation and display of the resulting character depends on your system locale.\n          Because consistent processing of Impala string values is only guaranteed\n          for values within the ASCII range, only use this function for values\n          corresponding to ASCII characters.\n          In particular, parameter values greater than 255 return an empty string.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p><p><b>Usage notes:</b> Can be used as the inverse of the <span class=\"hue-doc-codeph\">ascii()</span> function, which\n            converts a character to its numeric ASCII code.\n          </p><p><b>Added in:</b>Impala 2.3.0</p><p><b>Examples:</b></p><div class=\"hue-doc-codeblock\">SELECT chr(65);\n+---------+\n| chr(65) |\n+---------+\n| A       |\n+---------+\n\nSELECT chr(97);\n+---------+\n| chr(97) |\n+---------+\n| a       |\n+---------+\n</div></dd><dt><span class=\"hue-doc-codeph\">concat(string a, string b...)</span></dt><dd><b>Purpose:</b> Returns a single string representing all the argument values joined together.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p><p><b>Usage notes:</b><span class=\"hue-doc-codeph\">concat()</span> and <span class=\"hue-doc-codeph\">concat_ws()</span> are appropriate for\n        concatenating the values of multiple columns within the same row, while <span class=\"hue-doc-codeph\">group_concat()</span>\n        joins together values from different rows.\n      </p></dd><dt><span class=\"hue-doc-codeph\">concat_ws(string sep, string a, string b...)</span></dt><dd><b>Purpose:</b> Returns a single string representing the second and following argument values joined\n          together, delimited by a specified separator.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p><p><b>Usage notes:</b><span class=\"hue-doc-codeph\">concat()</span> and <span class=\"hue-doc-codeph\">concat_ws()</span> are appropriate for\n        concatenating the values of multiple columns within the same row, while <span class=\"hue-doc-codeph\">group_concat()</span>\n        joins together values from different rows.\n      </p></dd><dt><span class=\"hue-doc-codeph\">find_in_set(string str, string strList)</span></dt><dd><b>Purpose:</b> Returns the position (starting from 1) of the first occurrence of a specified string\n          within a comma-separated string. Returns <span class=\"hue-doc-codeph\">NULL</span> if either argument is\n          <span class=\"hue-doc-codeph\">NULL</span>, 0 if the search string is not found, or 0 if the search string contains a comma.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">int</span></p></dd><dt><span class=\"hue-doc-codeph\">group_concat(string s [, string sep])</span></dt><dd><b>Purpose:</b> Returns a single string representing the argument value concatenated together for each\n          row of the result set. If the optional separator string is specified, the separator is added between each\n          pair of concatenated values.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p><p><b>Usage notes:</b><span class=\"hue-doc-codeph\">concat()</span> and <span class=\"hue-doc-codeph\">concat_ws()</span> are appropriate for\n        concatenating the values of multiple columns within the same row, while <span class=\"hue-doc-codeph\">group_concat()</span>\n        joins together values from different rows.\n      </p><p>\n            By default, returns a single string covering the whole result set. To include other columns or values\n            in the result set, or to produce multiple concatenated strings for subsets of rows, include a\n            <span class=\"hue-doc-codeph\">GROUP BY</span> clause in the query.\n          </p><p>\n            Strictly speaking, <span class=\"hue-doc-codeph\">group_concat()</span> is an aggregate function, not a scalar\n            function like the others in this list.\n            For additional details and examples, see <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_group_concat.xml\" data-doc-anchor-id=\"group_concat\">GROUP_CONCAT Function</a>.\n          </p></dd><dt><span class=\"hue-doc-codeph\">initcap(string str)</span></dt><dd><b>Purpose:</b> Returns the input string with the first letter capitalized.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p></dd><dt><span class=\"hue-doc-codeph\">instr(string str, string substr <span class=\"hue-doc-ph\">[, bigint position [, bigint occurrence ] ]</span>)</span></dt><dd><b>Purpose:</b> Returns the position (starting from 1) of the first occurrence of a substring within a\n          longer string.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">int</span></p><p><b>Usage notes:</b></p><p>\n            If the substring is not present in the string, the function returns 0:\n          </p><div class=\"hue-doc-codeblock\">\nselect instr('foo bar bletch', 'z');\n+------------------------------+\n| instr('foo bar bletch', 'z') |\n+------------------------------+\n| 0                            |\n+------------------------------+\n</div><p>\n            The optional third and fourth arguments let you find instances of the substring\n            other than the first instance starting from the left:\n          </p><ul><li><p>\n                The third argument lets you specify a starting point within the string\n                other than 1:\n              </p><div class=\"hue-doc-codeblock\">\n-- Restricting the search to positions 7..end,\n-- the first occurrence of 'b' is at position 9.\nselect instr('foo bar bletch', 'b', 7);\n+---------------------------------+\n| instr('foo bar bletch', 'b', 7) |\n+---------------------------------+\n| 9                               |\n+---------------------------------+\n\n-- If there are no more occurrences after the\n-- specified position, the result is 0.\nselect instr('foo bar bletch', 'b', 10);\n+----------------------------------+\n| instr('foo bar bletch', 'b', 10) |\n+----------------------------------+\n| 0                                |\n+----------------------------------+\n</div><p>\n                If the third argument is negative, the search works right-to-left\n                starting that many characters from the right. The return value still\n                represents the position starting from the left side of the string.\n              </p><div class=\"hue-doc-codeblock\">\n-- Scanning right to left, the first occurrence of 'o'\n-- is at position 8. (8th character from the left.)\nselect instr('hello world','o',-1);\n+-------------------------------+\n| instr('hello world', 'o', -1) |\n+-------------------------------+\n| 8                             |\n+-------------------------------+\n\n-- Scanning right to left, starting from the 6th character\n-- from the right, the first occurrence of 'o' is at\n-- position 5 (5th character from the left).\nselect instr('hello world','o',-6);\n+-------------------------------+\n| instr('hello world', 'o', -6) |\n+-------------------------------+\n| 5                             |\n+-------------------------------+\n\n-- If there are no more occurrences after the\n-- specified position, the result is 0.\nselect instr('hello world','o',-10);\n+--------------------------------+\n| instr('hello world', 'o', -10) |\n+--------------------------------+\n| 0                              |\n+--------------------------------+\n</div></li><li><p>\n                The fourth argument lets you specify an occurrence other than the first:\n              </p><div class=\"hue-doc-codeblock\">\n-- 2nd occurrence of 'b' is at position 9.\nselect instr('foo bar bletch', 'b', 1, 2);\n+------------------------------------+\n| instr('foo bar bletch', 'b', 1, 2) |\n+------------------------------------+\n| 9                                  |\n+------------------------------------+\n\n-- Negative position argument means scan right-to-left.\n-- This example finds second instance of 'b' from the right.\nselect instr('foo bar bletch', 'b', -1, 2);\n+-------------------------------------+\n| instr('foo bar bletch', 'b', -1, 2) |\n+-------------------------------------+\n| 5                                   |\n+-------------------------------------+\n</div><p>\n                If the fourth argument is greater than the number of matching occurrences,\n                the function returns 0:\n              </p><div class=\"hue-doc-codeblock\">\n-- There is no 3rd occurrence within the string.\nselect instr('foo bar bletch', 'b', 1, 3);\n+------------------------------------+\n| instr('foo bar bletch', 'b', 1, 3) |\n+------------------------------------+\n| 0                                  |\n+------------------------------------+\n\n-- There is not even 1 occurrence when scanning\n-- the string starting at position 10.\nselect instr('foo bar bletch', 'b', 10, 1);\n+-------------------------------------+\n| instr('foo bar bletch', 'b', 10, 1) |\n+-------------------------------------+\n| 0                                   |\n+-------------------------------------+\n</div><p>\n                The fourth argument cannot be negative or zero. A non-positive value for\n                this argument causes an error:\n              </p><div class=\"hue-doc-codeblock\">\nselect instr('foo bar bletch', 'b', 1, 0);\nERROR: UDF ERROR: Invalid occurrence parameter to instr function: 0\n\nselect instr('aaaaaaaaa','aa', 1, -1);\nERROR: UDF ERROR: Invalid occurrence parameter to instr function: -1\n</div></li><li><p>\n                If either of the optional arguments is <span class=\"hue-doc-codeph\">NULL</span>,\n                the function also returns <span class=\"hue-doc-codeph\">NULL</span>:\n              </p><div class=\"hue-doc-codeblock\">\nselect instr('foo bar bletch', 'b', null);\n+------------------------------------+\n| instr('foo bar bletch', 'b', null) |\n+------------------------------------+\n| NULL                               |\n+------------------------------------+\n\nselect instr('foo bar bletch', 'b', 1, null);\n+---------------------------------------+\n| instr('foo bar bletch', 'b', 1, null) |\n+---------------------------------------+\n| NULL                                  |\n+---------------------------------------+\n</div></li></ul></dd><dt><span class=\"hue-doc-codeph\">left(string a, int num_chars)</span></dt><dd>\n          See the <span class=\"hue-doc-codeph\">strleft</span> function.\n        </dd><dt><span class=\"hue-doc-codeph\">length(string a)</span></dt><dd><b>Purpose:</b> Returns the length in characters of the argument string,\n          ignoring any trailing spaces in <span class=\"hue-doc-codeph\">CHAR</span> values.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">int</span></p><p><b>Usage notes:</b></p><p>\n            When applied to a <span class=\"hue-doc-codeph\">STRING</span> value, it returns the\n            same result as the <span class=\"hue-doc-codeph\">char_length()</span> function. When applied\n            to a <span class=\"hue-doc-codeph\">CHAR</span> value, it might return a smaller value\n            than <span class=\"hue-doc-codeph\">char_length()</span> does, because <span class=\"hue-doc-codeph\">length()</span>\n            ignores any trailing spaces in the <span class=\"hue-doc-codeph\">CHAR</span>.\n          </p><div class=\"hue-doc-note\">\n            Because the behavior of <span class=\"hue-doc-codeph\">length()</span> with <span class=\"hue-doc-codeph\">CHAR</span>\n            values containing trailing spaces is not standardized across the industry,\n            when porting code from other database systems, evaluate the behavior of\n            <span class=\"hue-doc-codeph\">length()</span> on the source system and switch to\n            <span class=\"hue-doc-codeph\">char_length()</span> for Impala if necessary.\n          </div><p><b>Examples:</b></p><p>\n        The following example demonstrates how <span class=\"hue-doc-codeph\">length()</span>\n        and <span class=\"hue-doc-codeph\">char_length()</span> sometimes produce the same result,\n        and sometimes produce different results depending on the type of the\n        argument and the presence of trailing spaces for <span class=\"hue-doc-codeph\">CHAR</span>\n        values. The <span class=\"hue-doc-codeph\">S</span> and <span class=\"hue-doc-codeph\">C</span> values are\n        displayed with enclosing quotation marks to show any trailing spaces.\n<div class=\"hue-doc-codeblock\">create table length_demo (s string, c char(5));\ninsert into length_demo values\n  ('a',cast('a' as char(5))),\n  ('abc',cast('abc' as char(5))),\n  ('hello',cast('hello' as char(5)));\n\nselect concat('\"',s,'\"') as s, concat('\"',c,'\"') as c,\n  length(s), length(c),\n  char_length(s), char_length(c)\nfrom length_demo;\n+---------+---------+-----------+-----------+----------------+----------------+\n| s       | c       | length(s) | length(c) | char_length(s) | char_length(c) |\n+---------+---------+-----------+-----------+----------------+----------------+\n| \"a\"     | \"a    \" | 1         | 1         | 1              | 5              |\n| \"abc\"   | \"abc  \" | 3         | 3         | 3              | 5              |\n| \"hello\" | \"hello\" | 5         | 5         | 5              | 5              |\n+---------+---------+-----------+-----------+----------------+----------------+\n</div></p></dd><dt><span class=\"hue-doc-codeph\">locate(string substr, string str[, int pos])</span></dt><dd><b>Purpose:</b> Returns the position (starting from 1) of the first occurrence of a substring within a\n          longer string, optionally after a particular position.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">int</span></p></dd><dt><span class=\"hue-doc-codeph\">lower(string a), <span class=\"hue-doc-ph\">lcase(string a)</span></span></dt><dd><b>Purpose:</b> Returns the argument string converted to all-lowercase.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p><p><b>Usage notes:</b></p><p>\n        In Impala 2.5 and higher, you can simplify queries that\n        use many <span class=\"hue-doc-codeph\">UPPER()</span> and <span class=\"hue-doc-codeph\">LOWER()</span> calls\n        to do case-insensitive comparisons, by using the <span class=\"hue-doc-codeph\">ILIKE</span>\n        or <span class=\"hue-doc-codeph\">IREGEXP</span> operators instead. See\n        <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_operators.xml\" data-doc-anchor-id=\"ilike\">ILIKE Operator</a> and\n        <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_operators.xml\" data-doc-anchor-id=\"iregexp\">IREGEXP Operator</a> for details.\n      </p></dd><dt><span class=\"hue-doc-codeph\">lpad(string str, int len, string pad)</span></dt><dd><b>Purpose:</b> Returns a string of a specified length, based on the first argument string. If the\n          specified string is too short, it is padded on the left with a repeating sequence of the characters from\n          the pad string. If the specified string is too long, it is truncated on the right.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p></dd><dt><span class=\"hue-doc-codeph\">ltrim(string a [, string chars_to_trim])</span></dt><dd><b>Purpose:</b> Returns the argument string with all occurrences\n          of characters specified by the second argument removed from\n          the left side. Removes spaces if the second argument is not specified.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p></dd><dt><span class=\"hue-doc-codeph\">parse_url(string urlString, string partToExtract [, string keyToExtract])</span></dt><dd><b>Purpose:</b> Returns the portion of a URL corresponding to a specified part. The part argument can be\n          <span class=\"hue-doc-codeph\">'PROTOCOL'</span>, <span class=\"hue-doc-codeph\">'HOST'</span>, <span class=\"hue-doc-codeph\">'PATH'</span>, <span class=\"hue-doc-codeph\">'REF'</span>,\n          <span class=\"hue-doc-codeph\">'AUTHORITY'</span>, <span class=\"hue-doc-codeph\">'FILE'</span>, <span class=\"hue-doc-codeph\">'USERINFO'</span>, or\n          <span class=\"hue-doc-codeph\">'QUERY'</span>. Uppercase is required for these literal values. When requesting the\n          <span class=\"hue-doc-codeph\">QUERY</span> portion of the URL, you can optionally specify a key to retrieve just the\n          associated value from the key-value pairs in the query string.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p><p><b>Usage notes:</b> This function is important for the traditional Hadoop use case of interpreting web\n            logs. For example, if the web traffic data features raw URLs not divided into separate table columns,\n            you can count visitors to a particular page by extracting the <span class=\"hue-doc-codeph\">'PATH'</span> or\n            <span class=\"hue-doc-codeph\">'FILE'</span> field, or analyze search terms by extracting the corresponding key from the\n            <span class=\"hue-doc-codeph\">'QUERY'</span> field.\n          </p></dd><dt><span class=\"hue-doc-codeph\">regexp_escape(string source)</span></dt><dd><b>Purpose:</b> The <span class=\"hue-doc-codeph\">regexp_escape</span> function returns\n          a string escaped for the special character in RE2 library so that the\n          special characters are interpreted literally rather than as special\n          characters. The following special characters are escaped by the\n          function:\n<div class=\"hue-doc-codeblock\">.\\+*?[^]$(){}=!&lt;&gt;|:-</div><p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p><p>\n        In Impala 2.0 and later, the Impala regular expression syntax conforms to the POSIX Extended Regular\n        Expression syntax used by the Google RE2 library. For details, see\n        <a class=\"hue-doc-external-link\" href=\"https://code.google.com/p/re2/\" target=\"_blank\">the RE2 documentation</a>. It\n        has most idioms familiar from regular expressions in Perl, Python, and so on, including\n        <span class=\"hue-doc-codeph\">.*?</span> for non-greedy matches.\n      </p><p>\n        In Impala 2.0 and later, a change in the underlying regular expression library could cause changes in the\n        way regular expressions are interpreted by this function. Test any queries that use regular expressions and\n        adjust the expression patterns if necessary. See\n        <a class=\"hue-doc-external-link\" href=\"https://www.cloudera.com/documentation/enterprise/latest/topics/impala_incompatible_changes.html#incompatible_changes_200\" target=\"_blank\">Incompatible Changes Introduced in Impala 2.0.0</a> for details.\n      </p><p>\n        Because the <span class=\"hue-doc-cmdname\">impala-shell</span> interpreter uses the <span class=\"hue-doc-codeph\">\\</span> character for escaping,\n        use <span class=\"hue-doc-codeph\">\\\\</span> to represent the regular expression escape character in any regular expressions\n        that you submit through <span class=\"hue-doc-cmdname\">impala-shell</span> . You might prefer to use the equivalent character\n        class names, such as <span class=\"hue-doc-codeph\">[[:digit:]]</span> instead of <span class=\"hue-doc-codeph\">\\d</span> which you would have to\n        escape as <span class=\"hue-doc-codeph\">\\\\d</span>.\n      </p><p><b>Examples:</b></p><p>\n            This example shows escaping one of special characters in RE2.\n          </p><div class=\"hue-doc-codeblock\">\n+------------------------------------------------------+\n| regexp_escape('Hello.world')                         |\n+------------------------------------------------------+\n| Hello\\.world                                         |\n+------------------------------------------------------+\n</div><p>\n            This example shows escaping all the special characters in RE2.\n          </p><div class=\"hue-doc-codeblock\">\n+------------------------------------------------------------+\n| regexp_escape('a.b\\\\c+d*e?f[g]h$i(j)k{l}m=n!o&lt;p&gt;q|r:s-t')  |\n+------------------------------------------------------------+\n| a\\.b\\\\c\\+d\\*e\\?f\\[g\\]h\\$i\\(j\\)k\\{l\\}m\\=n\\!o\\&lt;p\\&gt;q\\|r\\:s\\-t |\n+------------------------------------------------------------+\n</div></dd><dt><span class=\"hue-doc-codeph\">regexp_extract(string subject, string pattern, int index)</span></dt><dd><b>Purpose:</b> Returns the specified () group from a string based on a regular expression pattern. Group\n          0 refers to the entire extracted string, while group 1, 2, and so on refers to the first, second, and so\n          on <span class=\"hue-doc-codeph\">(...)</span> portion.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p><p>\n        In Impala 2.0 and later, the Impala regular expression syntax conforms to the POSIX Extended Regular\n        Expression syntax used by the Google RE2 library. For details, see\n        <a class=\"hue-doc-external-link\" href=\"https://code.google.com/p/re2/\" target=\"_blank\">the RE2 documentation</a>. It\n        has most idioms familiar from regular expressions in Perl, Python, and so on, including\n        <span class=\"hue-doc-codeph\">.*?</span> for non-greedy matches.\n      </p><p>\n        In Impala 2.0 and later, a change in the underlying regular expression library could cause changes in the\n        way regular expressions are interpreted by this function. Test any queries that use regular expressions and\n        adjust the expression patterns if necessary. See\n        <a class=\"hue-doc-external-link\" href=\"https://www.cloudera.com/documentation/enterprise/latest/topics/impala_incompatible_changes.html#incompatible_changes_200\" target=\"_blank\">Incompatible Changes Introduced in Impala 2.0.0</a> for details.\n      </p><p>\n        Because the <span class=\"hue-doc-cmdname\">impala-shell</span> interpreter uses the <span class=\"hue-doc-codeph\">\\</span> character for escaping,\n        use <span class=\"hue-doc-codeph\">\\\\</span> to represent the regular expression escape character in any regular expressions\n        that you submit through <span class=\"hue-doc-cmdname\">impala-shell</span> . You might prefer to use the equivalent character\n        class names, such as <span class=\"hue-doc-codeph\">[[:digit:]]</span> instead of <span class=\"hue-doc-codeph\">\\d</span> which you would have to\n        escape as <span class=\"hue-doc-codeph\">\\\\d</span>.\n      </p><p><b>Examples:</b></p><p>\n            This example shows how group 0 matches the full pattern string, including the portion outside any\n            <span class=\"hue-doc-codeph\">()</span> group:\n          </p><div class=\"hue-doc-codeblock\">[localhost:21000] &gt; select regexp_extract('abcdef123ghi456jkl','.*?(\\\\d+)',0);\n+------------------------------------------------------+\n| regexp_extract('abcdef123ghi456jkl', '.*?(\\\\d+)', 0) |\n+------------------------------------------------------+\n| abcdef123ghi456                                      |\n+------------------------------------------------------+\nReturned 1 row(s) in 0.11s</div><p>\n            This example shows how group 1 matches just the contents inside the first <span class=\"hue-doc-codeph\">()</span> group in\n            the pattern string:\n          </p><div class=\"hue-doc-codeblock\">[localhost:21000] &gt; select regexp_extract('abcdef123ghi456jkl','.*?(\\\\d+)',1);\n+------------------------------------------------------+\n| regexp_extract('abcdef123ghi456jkl', '.*?(\\\\d+)', 1) |\n+------------------------------------------------------+\n| 456                                                  |\n+------------------------------------------------------+\nReturned 1 row(s) in 0.11s</div><p>\n            Unlike in earlier Impala releases, the regular expression library used in Impala 2.0 and later supports\n            the <span class=\"hue-doc-codeph\">.*?</span> idiom for non-greedy matches. This example shows how a pattern string starting\n            with <span class=\"hue-doc-codeph\">.*?</span> matches the shortest possible portion of the source string, returning the\n            rightmost set of lowercase letters. A pattern string both starting and ending with <span class=\"hue-doc-codeph\">.*?</span>\n            finds two potential matches of equal length, and returns the first one found (the leftmost set of\n            lowercase letters).\n          </p><div class=\"hue-doc-codeblock\">[localhost:21000] &gt; select regexp_extract('AbcdBCdefGHI','.*?([[:lower:]]+)',1);\n+--------------------------------------------------------+\n| regexp_extract('abcdbcdefghi', '.*?([[:lower:]]+)', 1) |\n+--------------------------------------------------------+\n| def                                                    |\n+--------------------------------------------------------+\n[localhost:21000] &gt; select regexp_extract('AbcdBCdefGHI','.*?([[:lower:]]+).*?',1);\n+-----------------------------------------------------------+\n| regexp_extract('abcdbcdefghi', '.*?([[:lower:]]+).*?', 1) |\n+-----------------------------------------------------------+\n| bcd                                                       |\n+-----------------------------------------------------------+\n</div></dd><dt><span class=\"hue-doc-codeph\">regexp_like(string source, string pattern[, string options])</span></dt><dd><b>Purpose:</b> Returns <span class=\"hue-doc-codeph\">true</span> or <span class=\"hue-doc-codeph\">false</span> to indicate\n          whether the source string contains anywhere inside it the regular expression given by the pattern.\n          The optional third argument consists of letter flags that change how the match is performed,\n          such as <span class=\"hue-doc-codeph\">i</span> for case-insensitive matching.\n          <p><b>Syntax:</b></p><p>\n            The flags that you can include in the optional third argument are:\n          </p><ul><li><span class=\"hue-doc-codeph\">c</span>: Case-sensitive matching (the default).\n          </li><li><span class=\"hue-doc-codeph\">i</span>: Case-insensitive matching. If multiple instances of <span class=\"hue-doc-codeph\">c</span> and <span class=\"hue-doc-codeph\">i</span>\n          are included in the third argument, the last such option takes precedence.\n          </li><li><span class=\"hue-doc-codeph\">m</span>: Multi-line matching. The <span class=\"hue-doc-codeph\">^</span> and <span class=\"hue-doc-codeph\">$</span>\n          operators match the start or end of any line within the source string, not the\n          start and end of the entire string.\n          </li><li><span class=\"hue-doc-codeph\">n</span>: Newline matching. The <span class=\"hue-doc-codeph\">.</span> operator can match the\n          newline character. A repetition operator such as <span class=\"hue-doc-codeph\">.*</span> can\n          match a portion of the source string that spans multiple lines.\n          </li></ul><p><b>Return type:</b><span class=\"hue-doc-codeph\">boolean</span></p><p>\n        In Impala 2.0 and later, the Impala regular expression syntax conforms to the POSIX Extended Regular\n        Expression syntax used by the Google RE2 library. For details, see\n        <a class=\"hue-doc-external-link\" href=\"https://code.google.com/p/re2/\" target=\"_blank\">the RE2 documentation</a>. It\n        has most idioms familiar from regular expressions in Perl, Python, and so on, including\n        <span class=\"hue-doc-codeph\">.*?</span> for non-greedy matches.\n      </p><p>\n        In Impala 2.0 and later, a change in the underlying regular expression library could cause changes in the\n        way regular expressions are interpreted by this function. Test any queries that use regular expressions and\n        adjust the expression patterns if necessary. See\n        <a class=\"hue-doc-external-link\" href=\"https://www.cloudera.com/documentation/enterprise/latest/topics/impala_incompatible_changes.html#incompatible_changes_200\" target=\"_blank\">Incompatible Changes Introduced in Impala 2.0.0</a> for details.\n      </p><p>\n        Because the <span class=\"hue-doc-cmdname\">impala-shell</span> interpreter uses the <span class=\"hue-doc-codeph\">\\</span> character for escaping,\n        use <span class=\"hue-doc-codeph\">\\\\</span> to represent the regular expression escape character in any regular expressions\n        that you submit through <span class=\"hue-doc-cmdname\">impala-shell</span> . You might prefer to use the equivalent character\n        class names, such as <span class=\"hue-doc-codeph\">[[:digit:]]</span> instead of <span class=\"hue-doc-codeph\">\\d</span> which you would have to\n        escape as <span class=\"hue-doc-codeph\">\\\\d</span>.\n      </p><p><b>Examples:</b></p><p>\n            This example shows how <span class=\"hue-doc-codeph\">regexp_like()</span> can test for the existence\n            of various kinds of regular expression patterns within a source string:\n          </p><div class=\"hue-doc-codeblock\">\n-- Matches because the 'f' appears somewhere in 'foo'.\nselect regexp_like('foo','f');\n+-------------------------+\n| regexp_like('foo', 'f') |\n+-------------------------+\n| true                    |\n+-------------------------+\n\n-- Does not match because the comparison is case-sensitive by default.\nselect regexp_like('foo','F');\n+-------------------------+\n| regexp_like('foo', 'f') |\n+-------------------------+\n| false                   |\n+-------------------------+\n\n-- The 3rd argument can change the matching logic, such as 'i' meaning case-insensitive.\nselect regexp_like('foo','F','i');\n+------------------------------+\n| regexp_like('foo', 'f', 'i') |\n+------------------------------+\n| true                         |\n+------------------------------+\n\n-- The familiar regular expression notations work, such as ^ and $ anchors...\nselect regexp_like('foo','f$');\n+--------------------------+\n| regexp_like('foo', 'f$') |\n+--------------------------+\n| false                    |\n+--------------------------+\n\nselect regexp_like('foo','o$');\n+--------------------------+\n| regexp_like('foo', 'o$') |\n+--------------------------+\n| true                     |\n+--------------------------+\n\n-- ...and repetition operators such as * and +\nselect regexp_like('foooooobar','fo+b');\n+-----------------------------------+\n| regexp_like('foooooobar', 'fo+b') |\n+-----------------------------------+\n| true                              |\n+-----------------------------------+\n\nselect regexp_like('foooooobar','fx*y*o*b');\n+---------------------------------------+\n| regexp_like('foooooobar', 'fx*y*o*b') |\n+---------------------------------------+\n| true                                  |\n+---------------------------------------+\n</div></dd><dt><span class=\"hue-doc-codeph\">regexp_replace(string initial, string pattern, string replacement)</span></dt><dd><b>Purpose:</b> Returns the initial argument with the regular expression pattern replaced by the final\n          argument string.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p><p>\n        In Impala 2.0 and later, the Impala regular expression syntax conforms to the POSIX Extended Regular\n        Expression syntax used by the Google RE2 library. For details, see\n        <a class=\"hue-doc-external-link\" href=\"https://code.google.com/p/re2/\" target=\"_blank\">the RE2 documentation</a>. It\n        has most idioms familiar from regular expressions in Perl, Python, and so on, including\n        <span class=\"hue-doc-codeph\">.*?</span> for non-greedy matches.\n      </p><p>\n        In Impala 2.0 and later, a change in the underlying regular expression library could cause changes in the\n        way regular expressions are interpreted by this function. Test any queries that use regular expressions and\n        adjust the expression patterns if necessary. See\n        <a class=\"hue-doc-external-link\" href=\"https://www.cloudera.com/documentation/enterprise/latest/topics/impala_incompatible_changes.html#incompatible_changes_200\" target=\"_blank\">Incompatible Changes Introduced in Impala 2.0.0</a> for details.\n      </p><p>\n        Because the <span class=\"hue-doc-cmdname\">impala-shell</span> interpreter uses the <span class=\"hue-doc-codeph\">\\</span> character for escaping,\n        use <span class=\"hue-doc-codeph\">\\\\</span> to represent the regular expression escape character in any regular expressions\n        that you submit through <span class=\"hue-doc-cmdname\">impala-shell</span> . You might prefer to use the equivalent character\n        class names, such as <span class=\"hue-doc-codeph\">[[:digit:]]</span> instead of <span class=\"hue-doc-codeph\">\\d</span> which you would have to\n        escape as <span class=\"hue-doc-codeph\">\\\\d</span>.\n      </p><p><b>Examples:</b></p><p>\n            These examples show how you can replace parts of a string matching a pattern with replacement text,\n            which can include backreferences to any <span class=\"hue-doc-codeph\">()</span> groups in the pattern string. The\n            backreference numbers start at 1, and any <span class=\"hue-doc-codeph\">\\</span> characters must be escaped as\n            <span class=\"hue-doc-codeph\">\\\\</span>.\n          </p><p>\n            Replace a character pattern with new text:\n          </p><div class=\"hue-doc-codeblock\">[localhost:21000] &gt; select regexp_replace('aaabbbaaa','b+','xyz');\n+------------------------------------------+\n| regexp_replace('aaabbbaaa', 'b+', 'xyz') |\n+------------------------------------------+\n| aaaxyzaaa                                |\n+------------------------------------------+\nReturned 1 row(s) in 0.11s</div><p>\n            Replace a character pattern with substitution text that includes the original matching text:\n          </p><div class=\"hue-doc-codeblock\">[localhost:21000] &gt; select regexp_replace('aaabbbaaa','(b+)','&lt;\\\\1&gt;');\n+----------------------------------------------+\n| regexp_replace('aaabbbaaa', '(b+)', '&lt;\\\\1&gt;') |\n+----------------------------------------------+\n| aaa&lt;bbb&gt;aaa                                  |\n+----------------------------------------------+\nReturned 1 row(s) in 0.11s</div><p>\n            Remove all characters that are not digits:\n          </p><div class=\"hue-doc-codeblock\">[localhost:21000] &gt; select regexp_replace('123-456-789','[^[:digit:]]','');\n+---------------------------------------------------+\n| regexp_replace('123-456-789', '[^[:digit:]]', '') |\n+---------------------------------------------------+\n| 123456789                                         |\n+---------------------------------------------------+\nReturned 1 row(s) in 0.12s</div></dd><dt><span class=\"hue-doc-codeph\">repeat(string str, int n)</span></dt><dd><b>Purpose:</b> Returns the argument string repeated a specified number of times.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p></dd><dt><span class=\"hue-doc-codeph\">replace(string initial, string target, string replacement)</span></dt><dd><b>Purpose:</b> Returns the initial argument with all occurrences of the target string\n          replaced by the replacement string.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p><p><b>Usage notes:</b></p><p>\n            Because this function does not use any regular expression patterns, it is typically faster\n            than <span class=\"hue-doc-codeph\">regexp_replace()</span> for simple string substitutions.\n          </p><p>\n            If any argument is <span class=\"hue-doc-codeph\">NULL</span>, the return value is <span class=\"hue-doc-codeph\">NULL</span>.\n          </p><p>\n            Matching is case-sensitive.\n          </p><p>\n            If the replacement string contains another instance of the target\n            string, the expansion is only performed once, instead of\n            applying again to the newly constructed string.\n          </p><p><b>Added in:</b>Impala 2.9.0</p><p><b>Examples:</b></p><div class=\"hue-doc-codeblock\">-- Replace one string with another.\nselect replace('hello world','world','earth');\n+------------------------------------------+\n| replace('hello world', 'world', 'earth') |\n+------------------------------------------+\n| hello earth                              |\n+------------------------------------------+\n\n-- All occurrences of the target string are replaced.\nselect replace('hello world','o','0');\n+----------------------------------+\n| replace('hello world', 'o', '0') |\n+----------------------------------+\n| hell0 w0rld                      |\n+----------------------------------+\n\n-- If no match is found, the original string is returned unchanged.\nselect replace('hello world','xyz','abc');\n+--------------------------------------+\n| replace('hello world', 'xyz', 'abc') |\n+--------------------------------------+\n| hello world                          |\n+--------------------------------------+\n</div></dd><dt><span class=\"hue-doc-codeph\">reverse(string a)</span></dt><dd><b>Purpose:</b> Returns the argument string with characters in reversed order.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p></dd><dt><span class=\"hue-doc-codeph\">right(string a, int num_chars)</span></dt><dd>\n          See the <span class=\"hue-doc-codeph\">strright</span> function.\n        </dd><dt><span class=\"hue-doc-codeph\">rpad(string str, int len, string pad)</span></dt><dd><b>Purpose:</b> Returns a string of a specified length, based on the first argument string. If the\n          specified string is too short, it is padded on the right with a repeating sequence of the characters from\n          the pad string. If the specified string is too long, it is truncated on the right.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p></dd><dt><span class=\"hue-doc-codeph\">rtrim(string a [, string chars_to_trim])</span></dt><dd><b>Purpose:</b> Returns the argument string with all occurrences\n          of characters specified by the second argument removed from\n          the right side. Removes spaces if the second argument is not specified.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p></dd><dt><span class=\"hue-doc-codeph\">space(int n)</span></dt><dd><b>Purpose:</b> Returns a concatenated string of the specified number of spaces. Shorthand for\n          <span class=\"hue-doc-codeph\">repeat(' ',<span class=\"hue-doc-varname\">n</span>)</span>.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p></dd><dt><span class=\"hue-doc-codeph\">split_part(string source, string delimiter, bigint n)</span></dt><dd><b>Purpose:</b> Returns the nth field within a delimited string. The\n          fields are numbered starting from 1. The delimiter can consist of\n          multiple characters, not just a single character. All matching of the\n          delimiter is done exactly, not using any regular expression patterns.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p><p>\n        In Impala 2.0 and later, the Impala regular expression syntax conforms to the POSIX Extended Regular\n        Expression syntax used by the Google RE2 library. For details, see\n        <a class=\"hue-doc-external-link\" href=\"https://code.google.com/p/re2/\" target=\"_blank\">the RE2 documentation</a>. It\n        has most idioms familiar from regular expressions in Perl, Python, and so on, including\n        <span class=\"hue-doc-codeph\">.*?</span> for non-greedy matches.\n      </p><p>\n        In Impala 2.0 and later, a change in the underlying regular expression library could cause changes in the\n        way regular expressions are interpreted by this function. Test any queries that use regular expressions and\n        adjust the expression patterns if necessary. See\n        <a class=\"hue-doc-external-link\" href=\"https://www.cloudera.com/documentation/enterprise/latest/topics/impala_incompatible_changes.html#incompatible_changes_200\" target=\"_blank\">Incompatible Changes Introduced in Impala 2.0.0</a> for details.\n      </p><p>\n        Because the <span class=\"hue-doc-cmdname\">impala-shell</span> interpreter uses the <span class=\"hue-doc-codeph\">\\</span> character for escaping,\n        use <span class=\"hue-doc-codeph\">\\\\</span> to represent the regular expression escape character in any regular expressions\n        that you submit through <span class=\"hue-doc-cmdname\">impala-shell</span> . You might prefer to use the equivalent character\n        class names, such as <span class=\"hue-doc-codeph\">[[:digit:]]</span> instead of <span class=\"hue-doc-codeph\">\\d</span> which you would have to\n        escape as <span class=\"hue-doc-codeph\">\\\\d</span>.\n      </p><p><b>Examples:</b></p><p>\n            These examples show how to retrieve the nth field from a delimited\n            string:\n          </p><div class=\"hue-doc-codeblock\">\nselect split_part('x,y,z',',',1);\n+-----------------------------+\n| split_part('x,y,z', ',', 1) |\n+-----------------------------+\n| x                           |\n+-----------------------------+\n\nselect split_part('x,y,z',',',2);\n+-----------------------------+\n| split_part('x,y,z', ',', 2) |\n+-----------------------------+\n| y                           |\n+-----------------------------+\n\nselect split_part('x,y,z',',',3);\n+-----------------------------+\n| split_part('x,y,z', ',', 3) |\n+-----------------------------+\n| z                           |\n+-----------------------------+\n</div><p>\n            These examples show what happens for out-of-range field positions.\n            Specifying a value less than 1 produces an error. Specifying a value\n            greater than the number of fields returns a zero-length string\n            (which is not the same as <span class=\"hue-doc-codeph\">NULL</span>).\n          </p><div class=\"hue-doc-codeblock\">\nselect split_part('x,y,z',',',0);\nERROR: Invalid field position: 0\n\nwith t1 as (select split_part('x,y,z',',',4) nonexistent_field)\n  select\n      nonexistent_field\n    , concat('[',nonexistent_field,']')\n    , length(nonexistent_field);\nfrom t1\n+-------------------+-------------------------------------+---------------------------+\n| nonexistent_field | concat('[', nonexistent_field, ']') | length(nonexistent_field) |\n+-------------------+-------------------------------------+---------------------------+\n|                   | []                                  | 0                         |\n+-------------------+-------------------------------------+---------------------------+\n</div><p>\n            These examples show how the delimiter can be a multi-character value:\n          </p><div class=\"hue-doc-codeblock\">\nselect split_part('one***two***three','***',2);\n+-------------------------------------------+\n| split_part('one***two***three', '***', 2) |\n+-------------------------------------------+\n| two                                       |\n+-------------------------------------------+\n\nselect split_part('one\\|/two\\|/three','\\|/',3);\n+-------------------------------------------+\n| split_part('one\\|/two\\|/three', '\\|/', 3) |\n+-------------------------------------------+\n| three                                     |\n+-------------------------------------------+\n</div></dd><dt><span class=\"hue-doc-codeph\">strleft(string a, int num_chars)</span></dt><dd><b>Purpose:</b> Returns the leftmost characters of the string. Shorthand for a call to\n          <span class=\"hue-doc-codeph\">substr()</span> with 2 arguments.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p></dd><dt><span class=\"hue-doc-codeph\">strright(string a, int num_chars)</span></dt><dd><b>Purpose:</b> Returns the rightmost characters of the string. Shorthand for a call to\n          <span class=\"hue-doc-codeph\">substr()</span> with 2 arguments.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p></dd><dt><span class=\"hue-doc-codeph\">substr(string a, int start [, int len]), <span class=\"hue-doc-ph\">substring(string a, int start [, int\n          len])</span></span></dt><dd><b>Purpose:</b> Returns the portion of the string starting at a specified point, optionally with a\n          specified maximum length. The characters in the string are indexed starting at 1.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p></dd><dt><span class=\"hue-doc-codeph\">translate(string input, string from, string to)</span></dt><dd><b>Purpose:</b> Returns the input string with a set of characters replaced by another set of characters.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p></dd><dt><span class=\"hue-doc-codeph\">trim(string a)</span></dt><dd><b>Purpose:</b> Returns the input string with both leading and trailing spaces removed. The same as\n          passing the string through both <span class=\"hue-doc-codeph\">ltrim()</span> and <span class=\"hue-doc-codeph\">rtrim()</span>.\n          <p><b>Usage notes:</b> Often used during data cleansing operations during the ETL cycle, if input values might still have surrounding spaces.\n            For a more general-purpose function that can remove other leading and trailing characters besides spaces, see <span class=\"hue-doc-codeph\">btrim()</span>.\n          </p><p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p></dd><dt><span class=\"hue-doc-codeph\">upper(string a), <span class=\"hue-doc-ph\">ucase(string a)</span></span></dt><dd><b>Purpose:</b> Returns the argument string converted to all-uppercase.\n          <p><b>Return type:</b><span class=\"hue-doc-codeph\">string</span></p><p><b>Usage notes:</b></p><p>\n        In Impala 2.5 and higher, you can simplify queries that\n        use many <span class=\"hue-doc-codeph\">UPPER()</span> and <span class=\"hue-doc-codeph\">LOWER()</span> calls\n        to do case-insensitive comparisons, by using the <span class=\"hue-doc-codeph\">ILIKE</span>\n        or <span class=\"hue-doc-codeph\">IREGEXP</span> operators instead. See\n        <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_operators.xml\" data-doc-anchor-id=\"ilike\">ILIKE Operator</a> and\n        <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_operators.xml\" data-doc-anchor-id=\"iregexp\">IREGEXP Operator</a> for details.\n      </p></dd></dl></div></div></div>","title":"Impala String Functions"}