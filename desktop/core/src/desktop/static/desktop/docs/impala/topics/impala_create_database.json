{"body":"<div><div id=\"create_database\"><div class=\"hue-doc-title\">CREATE DATABASE Statement</div><div><p>\n      Creates a new database.\n    </p><p>\n      In Impala, a database is both:\n    </p><ul><li>\n        A logical construct for grouping together related tables, views, and functions within their own namespace.\n        You might use a separate database for each application, set of related tables, or round of experimentation.\n      </li><li>\n        A physical construct represented by a directory tree in HDFS. Tables (internal tables), partitions, and\n        data files are all located under this directory. You can perform HDFS-level operations such as backing it up and measuring space usage,\n        or remove it with a <span class=\"hue-doc-codeph\">DROP DATABASE</span> statement.\n      </li></ul><p id=\"syntax_blurb\"><b>Syntax:</b></p><div class=\"hue-doc-codeblock\">CREATE (DATABASE|SCHEMA) [IF NOT EXISTS] <span class=\"hue-doc-varname\">database_name</span>[COMMENT '<span class=\"hue-doc-varname\">database_comment</span>']\n  [LOCATION <span class=\"hue-doc-varname\">hdfs_path</span>];</div><p id=\"ddl_blurb\"><b>Statement type:</b> DDL\n      </p><p id=\"usage_notes_blurb\"><b>Usage notes:</b></p><p>\n      A database is physically represented as a directory in HDFS, with a filename extension <span class=\"hue-doc-codeph\">.db</span>,\n      under the main Impala data directory. If the associated HDFS directory does not exist, it is created for you.\n      All databases and their associated directories are top-level objects, with no physical or logical nesting.\n    </p><p>\n      After creating a database, to make it the current database within an <span class=\"hue-doc-cmdname\">impala-shell</span> session,\n      use the <span class=\"hue-doc-codeph\">USE</span> statement. You can refer to tables in the current database without prepending\n      any qualifier to their names.\n    </p><p>\n      When you first connect to Impala through <span class=\"hue-doc-cmdname\">impala-shell</span>, the database you start in (before\n      issuing any <span class=\"hue-doc-codeph\">CREATE DATABASE</span> or <span class=\"hue-doc-codeph\">USE</span> statements) is named\n      <span class=\"hue-doc-codeph\">default</span>.\n    </p><p id=\"builtins_db\">\n        Impala includes another predefined database, <span class=\"hue-doc-codeph\">_impala_builtins</span>, that\n        serves as the location for the\n        <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_functions.xml\" data-doc-anchor-id=\"builtins\">built-in functions</a>. To see\n        the built-in functions, use a statement like the following:\n<div class=\"hue-doc-codeblock\">show functions in _impala_builtins;\nshow functions in _impala_builtins like '*<span class=\"hue-doc-varname\">substring</span>*';\n</div></p><p>\n      After creating a database, your <span class=\"hue-doc-cmdname\">impala-shell</span> session or another\n      <span class=\"hue-doc-cmdname\">impala-shell</span> connected to the same node can immediately access that database. To access\n      the database through the Impala daemon on a different node, issue the <span class=\"hue-doc-codeph\">INVALIDATE METADATA</span>\n      statement first while connected to that other node.\n    </p><p>\n      Setting the <span class=\"hue-doc-codeph\">LOCATION</span> attribute for a new database is a way to work with sets of files in an\n      HDFS directory structure outside the default Impala data directory, as opposed to setting the\n      <span class=\"hue-doc-codeph\">LOCATION</span> attribute for each individual table.\n    </p><p id=\"sync_ddl_blurb\">\n        If you connect to different Impala nodes within an <span class=\"hue-doc-cmdname\">impala-shell</span>\n        session for load-balancing purposes, you can enable the <span class=\"hue-doc-codeph\">SYNC_DDL</span> query\n        option to make each DDL statement wait before returning, until the new or changed\n        metadata has been received by all the Impala nodes. See\n        <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_sync_ddl.xml\" data-doc-anchor-id=\"sync_ddl\">SYNC_DDL Query Option</a> for details.\n      </p><p id=\"hive_blurb\"><b>Hive considerations:</b></p><p>\n      When you create a database in Impala, the database can also be used by Hive.\n      When you create a database in Hive, issue an <span class=\"hue-doc-codeph\">INVALIDATE METADATA</span>\n      statement in Impala to make Impala permanently aware of the new database.\n    </p><p>\n      The <span class=\"hue-doc-codeph\">SHOW DATABASES</span> statement lists all databases, or the databases whose name\n      matches a wildcard pattern. <span class=\"hue-doc-ph\">In Impala 2.5 and higher, the\n      <span class=\"hue-doc-codeph\">SHOW DATABASES</span> output includes a second column that displays the associated\n      comment, if any, for each database.</span></p><p id=\"s3_blurb\"><b>Amazon S3 considerations:</b></p><p>\n      To specify that any tables created within a database reside on the Amazon S3 system,\n      you can include an <span class=\"hue-doc-codeph\">s3a://</span> prefix on the <span class=\"hue-doc-codeph\">LOCATION</span>\n      attribute. In Impala 2.6 and higher, Impala automatically creates any\n      required folders as the databases, tables, and partitions are created, and removes\n      them when they are dropped.\n    </p><p id=\"s3_ddl\">\n        In Impala 2.6 and higher, Impala DDL statements such as\n        <span class=\"hue-doc-codeph\">CREATE DATABASE</span>, <span class=\"hue-doc-codeph\">CREATE TABLE</span>, <span class=\"hue-doc-codeph\">DROP DATABASE\n        CASCADE</span>, <span class=\"hue-doc-codeph\">DROP TABLE</span>, and <span class=\"hue-doc-codeph\">ALTER TABLE [ADD|DROP]\n        PARTITION</span> can create or remove folders as needed in the Amazon S3 system. Prior\n        to Impala 2.6, you had to create folders yourself and point\n        Impala database, tables, or partitions at them, and manually remove folders when no\n        longer needed. See <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_s3.xml\" data-doc-anchor-id=\"s3\">Using Impala with Amazon S3 Object Store</a> for details about reading\n        and writing S3 data with Impala.\n      </p><p id=\"cancel_blurb_no\"><b>Cancellation:</b> Cannot be cancelled.\n      </p><p id=\"permissions_blurb\"><b>HDFS permissions:</b></p><p>\n      The user ID that the <span class=\"hue-doc-cmdname\">impalad</span> daemon runs under,\n      typically the <span class=\"hue-doc-codeph\">impala</span> user, must have write\n      permission for the parent HDFS directory under which the database\n      is located.\n    </p><p id=\"example_blurb\"><b>Examples:</b></p><div class=\"hue-doc-codeblock\" id=\"create_drop_db_example\">create database first_db;\nuse first_db;\ncreate table t1 (x int);\n\ncreate database second_db;\nuse second_db;\n-- Each database has its own namespace for tables.\n-- You can reuse the same table names in each database.\ncreate table t1 (s string);\n\ncreate database temp;\n\n-- You can either USE a database after creating it,\n-- or qualify all references to the table name with the name of the database.\n-- Here, tables T2 and T3 are both created in the TEMP database.\n\ncreate table temp.t2 (x int, y int);\nuse database temp;\ncreate table t3 (s string);\n\n-- You cannot drop a database while it is selected by the USE statement.\ndrop database temp;\n<i>ERROR: AnalysisException: Cannot drop current default database: temp</i>\n\n-- The always-available database 'default' is a convenient one to USE\n-- before dropping a database you created.\nuse default;\n\n-- Before dropping a database, first drop all the tables inside it,\n<span class=\"hue-doc-ph\">-- or in Impala 2.3 and higher use the CASCADE clause.</span>\ndrop database temp;\nERROR: ImpalaRuntimeException: Error making 'dropDatabase' RPC to Hive Metastore:\nCAUSED BY: InvalidOperationException: Database temp is not empty\nshow tables in temp;\n+------+\n| name |\n+------+\n| t3   |\n+------+\n\n<span class=\"hue-doc-ph\">-- Impala 2.3 and higher:</span><span class=\"hue-doc-ph\">drop database temp cascade;</span>\n\n-- Earlier releases:\ndrop table temp.t3;\ndrop database temp;\n</div><p id=\"related_info\"><b>Related information:</b></p><p><a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_databases.xml\" data-doc-anchor-id=\"databases\">Overview of Impala Databases</a>, <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_drop_database.xml\" data-doc-anchor-id=\"drop_database\">DROP DATABASE Statement</a>,\n      <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_use.xml\" data-doc-anchor-id=\"use\">USE Statement</a>, <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_show.xml\" data-doc-anchor-id=\"show_databases\">SHOW DATABASES</a>,\n      <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_tables.xml\" data-doc-anchor-id=\"tables\">Overview of Impala Tables</a></p></div></div></div>","title":"CREATE DATABASE Statement"}