{"body":"<div><div id=\"fixed_issues\"><div class=\"hue-doc-title\"><span class=\"hue-doc-ph\">Fixed Issues in Apache Impala</span><span class=\"hue-doc-ph\">Fixed Issues in Apache Impala</span></div><div><p>\n      The following sections describe the major issues fixed in each Impala release.\n    </p><p>\n      For known issues that are currently unresolved, see <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_known_issues.xml\" data-doc-anchor-id=\"known_issues\"><span class=\"hue-doc-ph\">Known Issues and Workarounds in Impala</span><span class=\"hue-doc-ph\">Apache Impala Known Issues</span></a>.\n    </p><p/></div><div id=\"fixed_issues_4_0_0\"><div class=\"hue-doc-title\">Issues Fixed in Impala 4.0</div><div><p> For the full list of issues closed in this release, including bug\n        fixes, see the <a class=\"hue-doc-external-link\" href=\"https://impala.apache.org/docs/changelog-4.0.html\" target=\"_blank\">changelog for Impala 4.0</a>. </p></div></div><div id=\"fixed_issues_3_4_0\"><div class=\"hue-doc-title\">Issues Fixed in Impala 3.4</div><div><p> For the full list of issues closed in this release, including bug\n        fixes, see the <a class=\"hue-doc-external-link\" href=\"https://impala.apache.org/docs/changelog-3.4.html\" target=\"_blank\">changelog for Impala 3.4</a>. </p></div></div><div id=\"fixed_issues_3_3_0\"><div class=\"hue-doc-title\">Issues Fixed in Impala 3.3</div><div><p> For the full list of issues closed in this release, including bug\n        fixes, see the <a class=\"hue-doc-external-link\" href=\"https://impala.apache.org/docs/changelog-3.3.html\" target=\"_blank\">changelog for Impala 3.3</a>. </p></div></div><div id=\"fixed_issues_3_2_0\"><div class=\"hue-doc-title\">Issues Fixed in Impala 3.2</div><div><p> For the full list of issues closed in this release, including bug\n        fixes, see the <a class=\"hue-doc-external-link\" href=\"https://impala.apache.org/docs/changelog-3.2.html\" target=\"_blank\">changelog for Impala 3.2</a>. </p><p>The following is a list of noteworthy issues fixed in Impala 3.2: </p><ul><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-341\" target=\"_blank\">IMPALA-341</a> - Remote profiles\n          are no longer ignored by the coordinator for the queries with the\n            <span class=\"hue-doc-codeph\">LIMIT</span> clause.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-941\" target=\"_blank\">IMPALA-941</a>- Impala supports\n          fully qualified table names that start with a number.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1048\" target=\"_blank\">IMPALA-1048</a> - The query\n          execution summary now includes the total time taken and memory\n          consumed by the data sink at the root of each query fragment.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-3323\" target=\"_blank\">IMPALA-3323</a> - Fixed the issue\n          where valid impala-shell options, such as\n            <span class=\"hue-doc-codeph\">--ldap_password_cmd</span>, were unrecognized when the\n            <span class=\"hue-doc-codeph\">--config_file</span> option was specified.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-5397\" target=\"_blank\">IMPALA-5397</a> - If a query has a\n          dedicated coordinator, its end time is now set when the query releases\n          its admission control resources. With no dedicated coordinator, the\n          end time is set on un-registration.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-5474\" target=\"_blank\">IMPALA-5474</a> - Fixed an issue\n          where adding a trivial subquery to a query with an error turns the\n          error into a warning.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-6521\" target=\"_blank\">IMPALA-6521</a> - When set,\n          experimental flags are now shown in /varz in web UI and log\n          files.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-6900\" target=\"_blank\">IMPALA-6900</a> -\n            <span class=\"hue-doc-codeph\">INVALIDATE METADATA</span> operation is no longer ignored\n          when HMS is empty.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-7446\" target=\"_blank\">IMPALA-7446</a> - Impala enables\n          buffer pool garbage collection when near process memory limit to\n          prevent queries from spilling to disk earlier than necessary.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-7659\" target=\"_blank\">IMPALA-7659</a> - In\n            <span class=\"hue-doc-codeph\">COMPUTE STATS</span>, Impala counts the number of\n            <span class=\"hue-doc-codeph\">NULL</span> values in a table</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-7857\" target=\"_blank\">IMPALA-7857</a> - Logs more\n          information about StateStore failure detection.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-7928\" target=\"_blank\">IMPALA-7928</a> - To increase the\n          efficiency of the HDFS file handle cache, remote reads for a\n          particular file are scheduled to a consistent set of executor nodes. </li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-7929\" target=\"_blank\">IMPALA-7929</a> - Impala query on\n          tables created via Hive and mapped to HBase failed with an internal\n          exception because the qualifier of the HBase key column is null in the\n          mapped table. Impala relaxed the requirement and allows a\n            <span class=\"hue-doc-codeph\">NULL</span> qualifier.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-7960\" target=\"_blank\">IMPALA-7960</a> - Impala now\n          returns a correct result when comparing <span class=\"hue-doc-codeph\">TIMESTAMP</span> to\n          a string literal in a binary predicate where the\n            <span class=\"hue-doc-codeph\">TIMESTAMP</span> is casted to <span class=\"hue-doc-codeph\">VARCHAR</span> of\n          smaller length.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-7961\" target=\"_blank\">IMPALA-7961</a> - Fixed an issue\n          where queries running with the <span class=\"hue-doc-codeph\">SYNC_DDL</span> query option\n          can fail when the Catalog Server is under a heavy load with concurrent\n          catalog operations of long-running DDLs.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-8026\" target=\"_blank\">IMPALA-8026</a> - Impala query\n          profile now reports correct row counts for all nested loop join\n          modes.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-8061\" target=\"_blank\">IMPALA-8061</a> - Impala correctly\n            initializes<span class=\"hue-doc-codeph\"> S3_ACCESS_VALIDATED</span> variable to zero\n          when <span class=\"hue-doc-codeph\">TARGET_FILESYSTEM=3</span>.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-8154\" target=\"_blank\">IMPALA-8154</a> - Disabled the\n            Kerberos<span class=\"hue-doc-codeph\"> auth_to_local</span> setting to prevent\n          connection issues between <span class=\"hue-doc-codeph\">impalads</span>.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-8188\" target=\"_blank\">IMPALA-8188</a> - Impala now\n          correctly detects an NVME device name and handles it.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-8245\" target=\"_blank\">IMPALA-8245</a> - Added hostname\n          to the timeout error message to enable the user to easily identify the\n          host which has reached a bad connection state with the HDFS\n          NameNode.</li><li><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-8254\" target=\"_blank\">IMPALA-8254</a> - <span class=\"hue-doc-codeph\">COMPUTE\n            STATS</span> failed if <span class=\"hue-doc-codeph\">COMPRESSION_CODEC</span> is\n          set.</li></ul></div></div><div id=\"fixed_issues_3_1_0\"><div class=\"hue-doc-title\">Issues Fixed in Impala 3.1</div><div><p> For the full list of issues closed in this release, including bug\n        fixes, see the <a class=\"hue-doc-external-link\" href=\"https://impala.apache.org/docs/changelog-3.1.html\" target=\"_blank\">changelog for Impala 3.1</a>. </p></div></div><div id=\"fixed_issues_3_0_0\"><div class=\"hue-doc-title\">Issues Fixed in Impala 3.0</div><div><p> For the full list of issues closed in this release, including bug\n        fixes, see the <a class=\"hue-doc-external-link\" href=\"https://impala.apache.org/docs/changelog-3.0.html\" target=\"_blank\">changelog for Impala 3.0</a>. </p></div></div><div id=\"fixed_issues_2_12_0\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.12</div><div><p>\n        For the full list of issues closed in this release, including bug fixes,\n        see the <a class=\"hue-doc-external-link\" href=\"https://impala.apache.org/docs/changelog-2.12.html\" target=\"_blank\">changelog for Impala 2.12</a>.\n      </p></div></div><div id=\"fixed_issues_2_11_0\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.11</div><div><p>\n        For the full list of issues closed in this release, including bug fixes,\n        see the <a class=\"hue-doc-external-link\" href=\"https://impala.apache.org/docs/changelog-2.11.html\" target=\"_blank\">changelog for Impala 2.11</a>.\n      </p></div></div><div id=\"fixed_issues_2100\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.10</div><div><p>\n        For the full list of issues closed in this release, including bug fixes,\n        see the <a class=\"hue-doc-external-link\" href=\"https://impala.apache.org/docs/changelog-2.10.html\" target=\"_blank\">changelog for Impala 2.10</a>.\n      </p></div></div><div id=\"fixed_issues_290\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.9.0</div><div><p>\n        For the full list of issues closed in this release, including bug fixes,\n        see the <a class=\"hue-doc-external-link\" href=\"https://impala.apache.org/docs/changelog-2.9.html\" target=\"_blank\">changelog for Impala 2.9</a>.\n      </p></div></div><div id=\"fixed_issues_280\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.8.0</div><div><p>\n        For the full list of Impala fixed issues in Impala 2.8, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=type%20%3D%20bug%20and%20project%20%3D%20IMPALA%20AND%20resolution%20%3D%20fixed%20AND%20affectedVersion%20!%3D%20%22Impala%202.8.0%22%20AND%20fixVersion%20%3D%20%22Impala%202.8.0%22%20and%20not%20labels%20%3D%20broken-build%20order%20by%20priority%20desc\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=type%20%3D%20bug%20and%20project%20%3D%20IMPALA%20AND%20resolution%20%3D%20fixed%20AND%20affectedVersion%20!%3D%20%22Impala%202.8.0%22%20AND%20fixVersion%20%3D%20%22Impala%202.8.0%22%20and%20not%20labels%20%3D%20broken-build%20order%20by%20priority%20desc</a>.\n      </p></div></div><div id=\"fixed_issues_270\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.7.0</div><div><p>\n        For the full list of Impala fixed issues in Impala 2.7.0, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=%20type%20%3D%20bug%20and%20project%20%3D%20IMPALA%20AND%20resolution%20%3D%20fixed%20AND%20affectedVersion%20!%3D%20%22Impala%202.7.0%22%20AND%20fixVersion%20%3D%20%22Impala%202.7.0%22%20and%20not%20labels%20%3D%20broken-build%20order%20by%20priority%20desc\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=%20type%20%3D%20bug%20and%20project%20%3D%20IMPALA%20AND%20resolution%20%3D%20fixed%20AND%20affectedVersion%20!%3D%20%22Impala%202.7.0%22%20AND%20fixVersion%20%3D%20%22Impala%202.7.0%22%20and%20not%20labels%20%3D%20broken-build%20order%20by%20priority%20desc</a>.\n      </p></div></div><div id=\"fixed_issues_263\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.6.3</div><div><p/></div></div><div id=\"fixed_issues_262\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.6.2</div><div><p/></div></div><div id=\"fixed_issues_260\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.6.0</div><div><p>\n        The following list contains the most critical fixed issues\n        (<span class=\"hue-doc-codeph\">priority='Blocker'</span>) from the JIRA system.\n        For the full list of fixed issues in Impala 2.6.0, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=%20type%20%3D%20bug%20and%20project%20%3D%20IMPALA%20AND%20resolution%20%3D%20fixed%20AND%20affectedVersion%20!%3D%20%22Impala%202.6.0%22%20AND%20fixVersion%20%3D%20%22Impala%202.6.0%22%20and%20not%20labels%20%3D%20broken-build%20order%20by%20priority%20desc\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=%20type%20%3D%20bug%20and%20project%20%3D%20IMPALA%20AND%20resolution%20%3D%20fixed%20AND%20affectedVersion%20!%3D%20%22Impala%202.6.0%22%20AND%20fixVersion%20%3D%20%22Impala%202.6.0%22%20and%20not%20labels%20%3D%20broken-build%20order%20by%20priority%20desc</a>.\n      </p></div><div id=\"IMPALA-3385\"><div class=\"hue-doc-title\">RuntimeState::error_log_ crashes</div><div><p>\n        A crash could occur, with stack trace pointing to <span class=\"hue-doc-codeph\">impala::RuntimeState::ErrorLog</span>.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-3385\" target=\"_blank\">IMPALA-3385</a></p><p><b>Severity:</b> High</p></div></div><div id=\"IMPALA-3378\"><div class=\"hue-doc-title\">HiveUdfCall::Open() produces unsynchronized access to JniUtil::global_refs_ vector</div><div><p>\n        A crash could occur because of contention between multiple calls to Java UDFs.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-3378\" target=\"_blank\">IMPALA-3378</a></p><p><b>Severity:</b> High</p></div></div><div id=\"IMPALA-3379\"><div class=\"hue-doc-title\">HBaseTableWriter::CreatePutList() produces unsynchronized access to JniUtil::global_refs_ vector</div><div><p>\n        A crash could occur because of contention between multiple concurrent statements writing to HBase.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-3379\" target=\"_blank\">IMPALA-3379</a></p><p><b>Severity:</b> High</p></div></div><div id=\"IMPALA-3317\"><div class=\"hue-doc-title\">Stress test failure: sorter.cc:745] Check failed: i == 0 (1 vs. 0) </div><div><p>\n        A crash or wrong results could occur if the spill-to-disk mechanism encountered a zero-length string at\n        the very end of a data block.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-3317\" target=\"_blank\">IMPALA-3317</a></p><p><b>Severity:</b> High</p></div></div><div id=\"IMPALA-3311\"><div class=\"hue-doc-title\">String data coming out of agg can be corrupted by blocking operators</div><div><p>\n        If a query plan contains an aggregation node producing string values anywhere within a subplan\n        (that is,if in the SQL statement, the aggregate function appears within an inline view over a collection column),\n        the results of the aggregation may be incorrect.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-3311\" target=\"_blank\">IMPALA-3311</a></p><p><b>Severity:</b> High</p></div></div><div id=\"IMPALA-3269\"><div class=\"hue-doc-title\">CTAS with subquery throws AuthzException</div><div><p>\n        A <span class=\"hue-doc-codeph\">CREATE TABLE AS SELECT</span> operation could fail with an authorization error,\n        due to a slight difference in the privilege checking for the CTAS operation.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-3269\" target=\"_blank\">IMPALA-3269</a></p><p><b>Severity:</b> High</p></div></div><div id=\"IMPALA-3237\"><div class=\"hue-doc-title\">Crash on inserting into table with binary and parquet</div><div><p>\n        Impala incorrectly allowed <span class=\"hue-doc-codeph\">BINARY</span> to be specified as a column type,\n        resulting in a crash during a write to a Parquet table with a column of that type.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-3237\" target=\"_blank\">IMPALA-3237</a></p><p><b>Severity:</b> High</p></div></div><div id=\"IMPALA-3105\"><div class=\"hue-doc-title\">RowBatch::MaxTupleBufferSize() calculation incorrect, may lead to memory corruption</div><div><p>\n        A crash could occur while querying tables with very large rows, for example wide tables with many\n        columns or very large string values. This problem was identified in Impala 2.3, but had low\n        reproducibility in subsequent releases. The fix ensures the memory allocation size is correct.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-3105\" target=\"_blank\">IMPALA-3105</a></p><p><b>Severity:</b> High</p></div></div><div id=\"IMPALA-3494\"><div class=\"hue-doc-title\">Thrift buffer overflows when serialize more than 3355443200 bytes in impala</div><div><p>\n        A very large memory allocation within the <span class=\"hue-doc-cmdname\">catalogd</span> daemon could exceed an internal Thrift limit,\n        causing a crash.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-3494\" target=\"_blank\">IMPALA-3494</a></p><p><b>Severity:</b> High</p></div></div><div id=\"IMPALA-3314\"><div class=\"hue-doc-title\">Altering table partition's storage format is not working and crashing the daemon</div><div><p>\n        If a partitioned table used a file format other than Avro, and the file format of an individual partition\n        was changed to Avro, subsequent queries could encounter a crash.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-3314\" target=\"_blank\">IMPALA-3314</a></p><p><b>Severity:</b> High</p></div></div><div id=\"IMPALA-3798\"><div class=\"hue-doc-title\">Race condition may cause scanners to spin with runtime filters on Avro or Sequence files</div><div><p>\n        A timing problem during runtime filter processing could cause queries against Avro or SequenceFile tables\n        to hang.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-3798\" target=\"_blank\">IMPALA-3798</a></p><p><b>Severity:</b> High</p></div></div></div><div id=\"fixed_issues_254\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.5.4</div><div><p/></div></div><div id=\"fixed_issues_252\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.5.2</div><div><p/></div></div><div id=\"fixed_issues_251\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.5.1</div><div><p/></div></div><div id=\"fixed_issues_250\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.5.0</div><div><p>\n        The following list contains the most critical issues (<span class=\"hue-doc-codeph\">priority='Blocker'</span>) from the JIRA system.\n        For the full list of fixed issues in Impala 2.5, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=%20type%20%3D%20bug%20and%20project%20%3D%20IMPALA%20AND%20resolution%20%3D%20fixed%20AND%20affectedVersion%20!%3D%20%22Impala%202.5.0%22%20AND%20fixVersion%20%3D%20%22Impala%202.5.0%22%20and%20not%20labels%20%3D%20broken-build%20order%20by%20priority%20desc\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=%20type%20%3D%20bug%20and%20project%20%3D%20IMPALA%20AND%20resolution%20%3D%20fixed%20AND%20affectedVersion%20!%3D%20%22Impala%202.5.0%22%20AND%20fixVersion%20%3D%20%22Impala%202.5.0%22%20and%20not%20labels%20%3D%20broken-build%20order%20by%20priority%20desc</a>.\n      </p></div><div id=\"IMPALA-2683\"><div class=\"hue-doc-title\">Stress test hit assert in LLVM: external function could not be resolved</div><div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2683\" target=\"_blank\">IMPALA-2683</a></p><p>The stress test was running a build with the TPC-H, TPC-DS, and TPC-H nested queries with scale factor 3.</p></div></div><div id=\"IMPALA-2365\"><div class=\"hue-doc-title\">Impalad is crashing if udf jar is not available in hdfs location for first time</div><div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2365\" target=\"_blank\">IMPALA-2365</a></p><p>\n          If a UDF JAR was not available in the HDFS location specified in the <span class=\"hue-doc-codeph\">CREATE FUNCTION</span> statement,\n          the <span class=\"hue-doc-cmdname\">impalad</span> daemon could crash.\n        </p></div></div><div id=\"IMPALA-2535-570\"><div class=\"hue-doc-title\">PAGG hits mem_limit when switching to I/O buffers</div><div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2535\" target=\"_blank\">IMPALA-2535</a></p><p>\n        A join query could fail with an out-of-memory error despite the apparent presence of sufficient memory.\n        The cause was the internal ordering of operations that could cause a later phase of the query to\n        allocate memory required by an earlier phase of the query. The workaround was to either increase\n        or decrease the <span class=\"hue-doc-codeph\">MEM_LIMIT</span> query option, because the issue would only occur for a specific\n        combination of memory limit and data volume.\n      </p></div></div><div id=\"IMPALA-2643-570\"><div class=\"hue-doc-title\">Prevent migrating incorrectly inferred identity predicates into inline views</div><div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2643\" target=\"_blank\">IMPALA-2643</a></p><p>\n        Referring to the same column twice in a view definition could cause the view to omit\n        rows where that column contained a <span class=\"hue-doc-codeph\">NULL</span> value. This could cause\n        incorrect results due to an inaccurate <span class=\"hue-doc-codeph\">COUNT(*)</span> value or rows missing\n        from the result set.\n      </p></div></div><div id=\"IMPALA-1459-570\"><div class=\"hue-doc-title\">Fix migration/assignment of On-clause predicates inside inline views</div><div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1459\" target=\"_blank\">IMPALA-1459</a></p><p>\n        Some combinations of <span class=\"hue-doc-codeph\">ON</span> clauses in join queries could result in comparisons\n        being applied at the wrong stage of query processing, leading to incorrect results.\n        Wrong predicate assignment could happen under the following conditions:\n      </p><ul><li>\n          The query includes an inline view that contains an outer join.\n        </li><li>\n          That inline view is joined with another table in the enclosing query block.\n        </li><li>\n          That join has an <span class=\"hue-doc-codeph\">ON</span> clause containing a predicate that\n          only references columns originating from the outer-joined tables inside the inline view.\n        </li></ul></div></div><div id=\"IMPALA-2093\"><div class=\"hue-doc-title\">Wrong plan of NOT IN aggregate subquery when a constant is used in subquery predicate</div><div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2093\" target=\"_blank\">IMPALA-2093</a></p><p><span class=\"hue-doc-codeph\">IN</span> subqueries might return wrong results if the left-hand side of the <span class=\"hue-doc-codeph\">IN</span> is a constant.\n          For example:\n        </p><div class=\"hue-doc-codeblock\">select * from alltypestiny t1\n  where 10 not in (select sum(int_col) from alltypestiny);\n</div></div></div><div id=\"IMPALA-2940\"><div class=\"hue-doc-title\">Parquet DictDecoders accumulate throughout query</div><div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2940\" target=\"_blank\">IMPALA-2940</a></p><p>\n          Parquet dictionary decoders can accumulate throughout query execution, leading to excessive memory usage. One decoder is created per-column per-split.\n        </p></div></div><div id=\"IMPALA-3056\"><div class=\"hue-doc-title\">Planner doesn't set the has_local_target field correctly</div><div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-3056\" target=\"_blank\">IMPALA-3056</a></p></div></div><div id=\"IMPALA-2742\"><div class=\"hue-doc-title\">MemPool allocation growth behavior</div><div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2742\" target=\"_blank\">IMPALA-2742</a></p><p>\n          Currently, the MemPool would always double the size of the last allocation.\n          This can lead to bad behavior if the MemPool transferred the ownership of all its data\n          except the last chunk. In the next allocation, the next allocated chunk would double\n          the size of this large chunk, which can be undesirable.\n        </p></div></div><div id=\"IMPALA-3035\"><div class=\"hue-doc-title\">Drop partition operations don't follow the catalog's locking protocol</div><div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-3035\" target=\"_blank\">IMPALA-3035</a></p><p>\n          The <span class=\"hue-doc-codeph\">CatalogOpExecutor.alterTableDropPartition()</span> function violates\n          the locking protocol used in the catalog that requires <span class=\"hue-doc-codeph\">catalogLock_</span>\n          to be acquired before any table-level lock. That may cause deadlocks when <span class=\"hue-doc-codeph\">ALTER TABLE DROP PARTITION</span>\n          is executed concurrently with other DDL operations.\n        </p></div></div><div id=\"IMPALA-2215\"><div class=\"hue-doc-title\">HAVING clause without aggregation not applied properly</div><div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2215\" target=\"_blank\">IMPALA-2215</a></p><p>\n          A query with a <span class=\"hue-doc-codeph\">HAVING</span> clause but no <span class=\"hue-doc-codeph\">GROUP BY</span> clause was not being rejected,\n          despite being invalid syntax. For example:\n        </p><div class=\"hue-doc-codeblock\">select case when 1=1 then 'didit' end as c1 from (select 1 as one) a having 1!=1;\n</div></div></div><div id=\"IMPALA-2914\"><div class=\"hue-doc-title\">Hit DCHECK Check failed: HasDateOrTime()</div><div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2914\" target=\"_blank\">IMPALA-2914</a></p><p><span class=\"hue-doc-codeph\">TimestampValue::ToTimestampVal()</span> requires a valid <span class=\"hue-doc-codeph\">TimestampValue</span> as input.\n          This requirement was not enforced in some places, leading to serious errors.\n        </p></div></div><div id=\"IMPALA-2986\"><div class=\"hue-doc-title\">Aggregation spill loop gives up too early leading to mem limit exceeded errors</div><div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2986\" target=\"_blank\">IMPALA-2986</a></p><p>\n          An aggregation query could fail with an out-of-memory error, despite sufficient memory being reported as available.\n        </p></div></div><div id=\"IMPALA-2592\"><div class=\"hue-doc-title\">DataStreamSender::Channel::CloseInternal() does not close the channel on an error.</div><div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2592\" target=\"_blank\">IMPALA-2592</a></p><p>\n          Some queries do not close an internal communication channel on an error.\n          This will cause the node on the other side of the channel to wait indefinitely, causing the query to hang.\n          For example, this issue could happen on a Kerberos-enabled system if the credential cache was outdated.\n          Although the affected query hangs, the <span class=\"hue-doc-cmdname\">impalad</span> daemons continue processing other queries.\n        </p></div></div><div id=\"IMPALA-2184\"><div class=\"hue-doc-title\">Codegen does not catch exceptions in FROM_UNIXTIME()</div><div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2184\" target=\"_blank\">IMPALA-2184</a></p><p>\n          Querying for the min or max value of a timestamp cast from a bigint via <span class=\"hue-doc-codeph\">from_unixtime()</span>\n          fails silently and crashes instances of <span class=\"hue-doc-cmdname\">impalad</span> when the input includes a value outside of the valid range.\n        </p><p><b>Workaround:</b> Disable native code generation with:</p><div class=\"hue-doc-codeblock\">SET disable_codegen=true;\n</div></div></div><div id=\"IMPALA-2788\"><div class=\"hue-doc-title\">Impala returns wrong result for function 'conv(bigint, from_base, to_base)'</div><div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2788\" target=\"_blank\">IMPALA-2788</a></p><p>\n          Impala returns wrong result for function <span class=\"hue-doc-codeph\">conv()</span>.\n          Function <span class=\"hue-doc-codeph\">conv(bigint, from_base, to_base)</span> returns an correct result,\n          while <span class=\"hue-doc-codeph\">conv(string, from_base, to_base)</span> returns the correct value.\n          For example:\n        </p><div class=\"hue-doc-codeblock\">select 2061013007, conv(2061013007, 16, 10), conv('2061013007', 16, 10);\n+------------+--------------------------+----------------------------+\n| 2061013007 | conv(2061013007, 16, 10) | conv('2061013007', 16, 10) |\n+------------+--------------------------+----------------------------+\n| 2061013007 | 1627467783               | 139066421255               |\n+------------+--------------------------+----------------------------+\nFetched 1 row(s) in 0.65s\n\nselect 2061013007, conv(cast(2061013007 as bigint), 16, 10), conv('2061013007', 16, 10);\n+------------+------------------------------------------+----------------------------+\n| 2061013007 | conv(cast(2061013007 as bigint), 16, 10) | conv('2061013007', 16, 10) |\n+------------+------------------------------------------+----------------------------+\n| 2061013007 | 1627467783                               | 139066421255               |\n+------------+------------------------------------------+----------------------------+\n\nselect 2061013007, conv(cast(2061013007 as string), 16, 10), conv('2061013007', 16, 10);\n+------------+------------------------------------------+----------------------------+\n| 2061013007 | conv(cast(2061013007 as string), 16, 10) | conv('2061013007', 16, 10) |\n+------------+------------------------------------------+----------------------------+\n| 2061013007 | 139066421255                             | 139066421255               |\n+------------+------------------------------------------+----------------------------+\n\nselect 2061013007, conv(cast(cast(2061013007 as decimal(20,0)) as bigint), 16, 10), conv('2061013007', 16, 10);\n+------------+-----------------------------------------------------------------+----------------------------+\n| 2061013007 | conv(cast(cast(2061013007 as decimal(20,0)) as bigint), 16, 10) | conv('2061013007', 16, 10) |\n+------------+-----------------------------------------------------------------+----------------------------+\n| 2061013007 | 1627467783                                                      | 139066421255               |\n+------------+-----------------------------------------------------------------+----------------------------+\n</div><p><b>Workaround:</b>\n          Cast the value to string and use <span class=\"hue-doc-codeph\">conv(string, from_base, to_base)</span> for conversion.\n        </p></div></div></div><div id=\"fixed_issues_241\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.4.1</div><div><p/></div></div><div id=\"fixed_issues_240\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.4.0</div><div><p>\n        The set of fixes for Impala in Impala 2.4.0 is the same as\n        in Impala 2.3.2.\n        </p></div></div><div id=\"fixed_issues_234\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.3.4</div><div><p/></div></div><div id=\"fixed_issues_232\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.3.2</div><div><p>\n        This section lists the most serious or frequently encountered customer\n        issues fixed in Impala 2.3.2.\n      </p></div><div id=\"IMPALA-2829\"><div class=\"hue-doc-title\">SEGV in AnalyticEvalNode touching NULL input_stream_</div><div><p>\n        A query involving an analytic function could encounter a serious error.\n        This issue was encountered infrequently, depending upon specific combinations\n        of queries and data.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2829\" target=\"_blank\">IMPALA-2829</a></p></div></div><div id=\"IMPALA-2722\"><div class=\"hue-doc-title\">Free local allocations per row batch in non-partitioned AGG and HJ</div><div><p>\n        An outer join query could fail unexpectedly with an out-of-memory error\n        when the <q>spill to disk</q> mechanism was turned off.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2722\" target=\"_blank\">IMPALA-2722</a></p></div></div><div id=\"IMPALA-2612\"><div class=\"hue-doc-title\">Free local allocations once for every row batch when building hash tables</div><div><p>\n        A join query could encounter a serious error due to an internal failure to allocate memory, which\n        resulted in dereferencing a <span class=\"hue-doc-codeph\">NULL</span> pointer.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2612\" target=\"_blank\">IMPALA-2612</a></p></div></div><div id=\"IMPALA-2643\"><div class=\"hue-doc-title\">Prevent migrating incorrectly inferred identity predicates into inline views</div><div><p>\n        Referring to the same column twice in a view definition could cause the view to omit\n        rows where that column contained a <span class=\"hue-doc-codeph\">NULL</span> value. This could cause\n        incorrect results due to an inaccurate <span class=\"hue-doc-codeph\">COUNT(*)</span> value or rows missing\n        from the result set.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2643\" target=\"_blank\">IMPALA-2643</a></p></div></div><div id=\"IMPALA-2695\"><div class=\"hue-doc-title\">Fix GRANTs on URIs with uppercase letters</div><div><p>\n        A <span class=\"hue-doc-codeph\">GRANT</span> statement for a URI could be ineffective if the URI\n        contained uppercase letters, for example in an uppercase directory name.\n        Subsequent statements, such as <span class=\"hue-doc-codeph\">CREATE EXTERNAL TABLE</span>\n        with a <span class=\"hue-doc-codeph\">LOCATION</span> clause, could fail with an authorization exception.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2695\" target=\"_blank\">IMPALA-2695</a></p></div></div><div id=\"IMPALA-2664-552\"><div class=\"hue-doc-title\" id=\"IMPALA-2648-552\">Avoid sending large partition stats objects over thrift</div><div><p>\n        The <span class=\"hue-doc-cmdname\">catalogd</span> daemon could encounter a serious error\n        when loading the incremental statistics metadata for tables with large\n        numbers of partitions and columns. The problem occurred when the\n        internal representation of metadata for the table exceeded 2\n        GB, for example in a table with 20K partitions and 77 columns. The fix causes a\n        <span class=\"hue-doc-codeph\">COMPUTE INCREMENTAL STATS</span> operation to fail if it\n        would produce metadata that exceeded the maximum size.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2664\" target=\"_blank\">IMPALA-2664</a>,\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2648\" target=\"_blank\">IMPALA-2648</a></p></div></div><div id=\"IMPALA-2226\"><div class=\"hue-doc-title\">Throw AnalysisError if table properties are too large (for the Hive metastore)</div><div><p><span class=\"hue-doc-codeph\">CREATE TABLE</span> or <span class=\"hue-doc-codeph\">ALTER TABLE</span> statements could fail with\n        metastore database errors due to length limits on the <span class=\"hue-doc-codeph\">SERDEPROPERTIES</span> and <span class=\"hue-doc-codeph\">TBLPROPERTIES</span> clauses.\n        (The limit on key size is 256, while the limit on value size is 4000.) The fix makes Impala handle these error conditions\n        more cleanly, by detecting too-long values rather than passing them to the metastore database.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2226\" target=\"_blank\">IMPALA-2226</a></p></div></div><div id=\"IMPALA-2273-552\"><div class=\"hue-doc-title\">Make MAX_PAGE_HEADER_SIZE configurable</div><div><p>\n        Impala could fail to access Parquet data files with page headers larger than 8 MB, which could\n        occur, for example, if the minimum or maximum values for a column were long strings. The\n        fix adds a configuration setting <span class=\"hue-doc-codeph\">--max_page_header_size</span>, which you can use to\n        increase the Impala size limit to a value higher than 8 MB.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2273\" target=\"_blank\">IMPALA-2273</a></p></div></div><div id=\"IMPALA-2473\"><div class=\"hue-doc-title\">reduce scanner memory usage</div><div><p>\n        Queries on Parquet tables could consume excessive memory (potentially multiple gigabytes) due to producing\n        large intermediate data values while evaluating groups of rows. The workaround was to reduce the size of\n        the <span class=\"hue-doc-codeph\">NUM_SCANNER_THREADS</span> query option, the <span class=\"hue-doc-codeph\">BATCH_SIZE</span> query option,\n        or both.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2473\" target=\"_blank\">IMPALA-2473</a></p></div></div><div id=\"IMPALA-2113\"><div class=\"hue-doc-title\">Handle error when distinct and aggregates are used with a having clause</div><div><p>\n        A query that included a <span class=\"hue-doc-codeph\">DISTINCT</span> operator and a <span class=\"hue-doc-codeph\">HAVING</span> clause, but no\n        aggregate functions or <span class=\"hue-doc-codeph\">GROUP BY</span>, would fail with an uninformative error message.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2113\" target=\"_blank\">IMPALA-2113</a></p></div></div><div id=\"IMPALA-2225\"><div class=\"hue-doc-title\">Handle error when star based select item and aggregate are incorrectly used</div><div><p>\n        A query that included <span class=\"hue-doc-codeph\">*</span> in the <span class=\"hue-doc-codeph\">SELECT</span> list, in addition to an\n        aggregate function call, would fail with an uninformative message if the query had no\n        <span class=\"hue-doc-codeph\">GROUP BY</span> clause.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2225\" target=\"_blank\">IMPALA-2225</a></p></div></div><div id=\"IMPALA-2731-552\"><div class=\"hue-doc-title\">Refactor MemPool usage in HBase scan node</div><div><p>\n        Queries involving HBase tables used substantially more memory than in earlier Impala versions.\n        The problem occurred starting in Impala 2.2.8, as a result of the changes for IMPALA-2284.\n        The fix for this issue involves removing a separate memory work area for HBase queries\n        and reusing other memory that was already allocated.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2731\" target=\"_blank\">IMPALA-2731</a></p></div></div><div id=\"IMPALA-1459-552\"><div class=\"hue-doc-title\">Fix migration/assignment of On-clause predicates inside inline views</div><div><p>\n        Some combinations of <span class=\"hue-doc-codeph\">ON</span> clauses in join queries could result in comparisons\n        being applied at the wrong stage of query processing, leading to incorrect results.\n        Wrong predicate assignment could happen under the following conditions:\n      </p><ul><li>\n          The query includes an inline view that contains an outer join.\n        </li><li>\n          That inline view is joined with another table in the enclosing query block.\n        </li><li>\n          That join has an <span class=\"hue-doc-codeph\">ON</span> clause containing a predicate that\n          only references columns originating from the outer-joined tables inside the inline view.\n        </li></ul><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1459\" target=\"_blank\">IMPALA-1459</a></p></div></div><div id=\"IMPALA-2558\"><div class=\"hue-doc-title\">DCHECK in parquet scanner after block read error</div><div><p>\n        A debug build of Impala could encounter a serious error after encountering some kinds of I/O\n        errors for Parquet files. This issue only occurred in debug builds, not release builds.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2558\" target=\"_blank\">IMPALA-2558</a></p></div></div><div id=\"IMPALA-2535\"><div class=\"hue-doc-title\">PAGG hits mem_limit when switching to I/O buffers</div><div><p>\n        A join query could fail with an out-of-memory error despite the apparent presence of sufficient memory.\n        The cause was the internal ordering of operations that could cause a later phase of the query to\n        allocate memory required by an earlier phase of the query. The workaround was to either increase\n        or decrease the <span class=\"hue-doc-codeph\">MEM_LIMIT</span> query option, because the issue would only occur for a specific\n        combination of memory limit and data volume.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2535\" target=\"_blank\">IMPALA-2535</a></p></div></div><div id=\"IMPALA-2559\"><div class=\"hue-doc-title\">Fix check failed: sorter_runs_.back()-&gt;is_pinned_</div><div><p>\n        A query could fail with an internal error while calculating the memory limit.\n        This was an infrequent condition uncovered during stress testing.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2559\" target=\"_blank\">IMPALA-2559</a></p></div></div><div id=\"IMPALA-2614\"><div class=\"hue-doc-title\">Don't ignore Status returned by DataStreamRecvr::CreateMerger()</div><div><p>\n        A query could fail with an internal error while calculating the memory limit.\n        This was an infrequent condition uncovered during stress testing.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2614\" target=\"_blank\">IMPALA-2614</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2559\" target=\"_blank\">IMPALA-2559</a></p></div></div><div id=\"IMPALA-2591\"><div class=\"hue-doc-title\">DataStreamSender::Send() does not return an error status if SendBatch() failed</div><div><p/><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2591\" target=\"_blank\">IMPALA-2591</a></p></div></div><div id=\"IMPALA-2598\"><div class=\"hue-doc-title\">Re-enable SSL and Kerberos on server-server</div><div><p>\n        These fixes lift the restriction on using SSL encryption and Kerberos authentication together\n        for internal communication between Impala components.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2598\" target=\"_blank\">IMPALA-2598</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2747\" target=\"_blank\">IMPALA-2747</a></p></div></div></div><div id=\"fixed_issues_231\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.3.1</div><div><p id=\"impala231_noop\">\n        The version of Impala that is included with Impala 2.3.1 is identical\n        to Impala 2.3.0. There are no new bug fixes, new features, or\n        incompatible changes.\n      </p></div></div><div id=\"fixed_issues_230\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.3.0</div><div><p> This section lists the most serious or frequently encountered customer\n        issues fixed in Impala 2.3. Any issues already fixed in\n        Impala 2.2 maintenance releases (up through Impala 2.2.8) are also included.\n        Those issues are listed under the respective Impala 2.2 sections and are\n        not repeated here.\n      </p></div><div id=\"serious_230\"><div class=\"hue-doc-title\">Fixes for Serious Errors</div><div><p>\n        A number of issues were resolved that could result in serious errors\n        when encountered. The most critical or commonly encountered are\n        listed here.\n      </p><p><b>Bugs:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2168\" target=\"_blank\">IMPALA-2168</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2378\" target=\"_blank\">IMPALA-2378</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2369\" target=\"_blank\">IMPALA-2369</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2357\" target=\"_blank\">IMPALA-2357</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2319\" target=\"_blank\">IMPALA-2319</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2314\" target=\"_blank\">IMPALA-2314</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2016\" target=\"_blank\">IMPALA-2016</a></p></div></div><div id=\"correctness_230\"><div class=\"hue-doc-title\">Fixes for Correctness Errors</div><div><p>\n        A number of issues were resolved that could result in wrong results\n        when encountered. The most critical or commonly encountered are\n        listed here.\n      </p><p><b>Bugs:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2192\" target=\"_blank\">IMPALA-2192</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2440\" target=\"_blank\">IMPALA-2440</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2090\" target=\"_blank\">IMPALA-2090</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2086\" target=\"_blank\">IMPALA-2086</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1947\" target=\"_blank\">IMPALA-1947</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1917\" target=\"_blank\">IMPALA-1917</a></p></div></div></div><div id=\"fixed_issues_2210\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.2.10</div><div><p/></div></div><div id=\"fixed_issues_229\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.2.9</div><div><p>\n        This section lists the most frequently encountered customer issues fixed in Impala 2.2.9.\n      </p></div><div id=\"IMPALA-1917\"><div class=\"hue-doc-title\">Query return empty result if it contains NullLiteral in inlineview</div><div><p>\n        If an inline view in a <span class=\"hue-doc-codeph\">FROM</span> clause contained a <span class=\"hue-doc-codeph\">NULL</span> literal,\n        the result set was empty.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1917\" target=\"_blank\">IMPALA-1917</a></p></div></div><div id=\"IMPALA-2731\"><div class=\"hue-doc-title\">HBase scan node uses 2-4x memory after upgrade to Impala 2.2.8</div><div><p>\n        Queries involving HBase tables used substantially more memory than in earlier Impala versions.\n        The problem occurred starting in Impala 2.2.8, as a result of the changes for IMPALA-2284.\n        The fix for this issue involves removing a separate memory work area for HBase queries\n        and reusing other memory that was already allocated.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2731\" target=\"_blank\">IMPALA-2731</a></p></div></div><div id=\"IMPALA-1459\"><div class=\"hue-doc-title\">Fix migration/assignment of On-clause predicates inside inline views</div><div><p>\n        Some combinations of <span class=\"hue-doc-codeph\">ON</span> clauses in join queries could result in comparisons\n        being applied at the wrong stage of query processing, leading to incorrect results.\n        Wrong predicate assignment could happen under the following conditions:\n      </p><ul><li>\n          The query includes an inline view that contains an outer join.\n        </li><li>\n          That inline view is joined with another table in the enclosing query block.\n        </li><li>\n          That join has an <span class=\"hue-doc-codeph\">ON</span> clause containing a predicate that\n          only references columns originating from the outer-joined tables inside the inline view.\n        </li></ul><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1459\" target=\"_blank\">IMPALA-1459</a></p></div></div><div id=\"IMPALA-2446\"><div class=\"hue-doc-title\">Fix wrong predicate assignment in outer joins</div><div><p>\n        The join predicate for an <span class=\"hue-doc-codeph\">OUTER JOIN</span> clause could be applied at the wrong stage\n        of query processing, leading to incorrect results.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2446\" target=\"_blank\">IMPALA-2446</a></p></div></div><div id=\"IMPALA-2648\"><div class=\"hue-doc-title\">Avoid sending large partition stats objects over thrift</div><div><p> The <span class=\"hue-doc-cmdname\">catalogd</span> daemon could encounter a serious error when loading the\n          incremental statistics metadata for tables with large numbers of partitions and columns.\n          The problem occurred when the internal representation of metadata for the table exceeded 2\n          GB, for example in a table with 20K partitions and 77 columns. The fix causes a\n            <span class=\"hue-doc-codeph\">COMPUTE INCREMENTAL STATS</span> operation to fail if it would produce\n          metadata that exceeded the maximum size. </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2648\" target=\"_blank\">IMPALA-2648</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2664\" target=\"_blank\">IMPALA-2664</a></p></div></div><div id=\"IMPALA-1675\"><div class=\"hue-doc-title\">Avoid overflow when adding large intervals to TIMESTAMPs</div><div><p> Adding or subtracting a large <span class=\"hue-doc-codeph\">INTERVAL</span> value to a\n            <span class=\"hue-doc-codeph\">TIMESTAMP</span> value could produce an incorrect result, with the value\n          wrapping instead of returning an out-of-range error. </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1675\" target=\"_blank\">IMPALA-1675</a></p></div></div><div id=\"IMPALA-1949\"><div class=\"hue-doc-title\">Analysis exception when a binary operator contains an IN operator with values</div><div><p>\n        An <span class=\"hue-doc-codeph\">IN</span> operator with literal values could cause a statement to fail if used\n        as the argument to a binary operator, such as an equality test for a <span class=\"hue-doc-codeph\">BOOLEAN</span> value.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1949\" target=\"_blank\">IMPALA-1949</a></p></div></div><div id=\"IMPALA-2273\"><div class=\"hue-doc-title\">Make MAX_PAGE_HEADER_SIZE configurable</div><div><p> Impala could fail to access Parquet data files with page headers larger than 8 MB, which\n          could occur, for example, if the minimum or maximum values for a column were long strings.\n          The fix adds a configuration setting <span class=\"hue-doc-codeph\">--max_page_header_size</span>, which you\n          can use to increase the Impala size limit to a value higher than 8 MB. </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2273\" target=\"_blank\">IMPALA-2273</a></p></div></div><div id=\"IMPALA-2357\"><div class=\"hue-doc-title\">Fix spilling sorts with var-len slots that are NULL or empty.</div><div><p>\n        A query that activated the spill-to-disk mechanism could fail if it contained a sort expression\n        involving certain combinations of fixed-length or variable-length types.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2357\" target=\"_blank\">IMPALA-2357</a></p></div></div><div id=\"block_pin_oom\"><div class=\"hue-doc-title\">Work-around IMPALA-2344: Fail query with OOM in case block-&gt;Pin() fails</div><div><p>\n        Some queries that activated the spill-to-disk mechanism could produce a serious error\n        if there was insufficient memory to set up internal work areas. Now those queries\n        produce normal out-of-memory errors instead.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2344\" target=\"_blank\">IMPALA-2344</a></p></div></div><div id=\"IMPALA-2252\"><div class=\"hue-doc-title\">Crash (likely race) tearing down BufferedBlockMgr on query failure</div><div><p>\n        A serious error could occur under rare circumstances, due to a race condition while freeing memory during heavily concurrent workloads.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2252\" target=\"_blank\">IMPALA-2252</a></p></div></div><div id=\"IMPALA-1746\"><div class=\"hue-doc-title\">QueryExecState doesn't check for query cancellation or errors</div><div><p>\n        A call to <span class=\"hue-doc-codeph\">SetError()</span> in a user-defined function (UDF) would not cause the query to fail as expected.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1746\" target=\"_blank\">IMPALA-1746</a></p></div></div><div id=\"IMPALA-2533\"><div class=\"hue-doc-title\">Impala throws IllegalStateException when inserting data into a partition while select\n        subquery group by partition columns</div><div><p>\n        An <span class=\"hue-doc-codeph\">INSERT ... SELECT</span> operation into a partitioned table could fail if the <span class=\"hue-doc-codeph\">SELECT</span> query\n        included a <span class=\"hue-doc-codeph\">GROUP BY</span> clause referring to the partition key columns.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2533\" target=\"_blank\">IMPALA-2533</a></p></div></div></div><div id=\"fixed_issues_228\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.2.8</div><div><p>\n        This section lists the most frequently encountered customer issues fixed in Impala 2.2.8.\n      </p></div><div id=\"IMPALA-1136\"><div class=\"hue-doc-title\">Impala is unable to read hive tables created with the \"STORED AS AVRO\" clause</div><div><p>Impala could not read Avro tables created in Hive with the <span class=\"hue-doc-codeph\">STORED AS AVRO</span> clause.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1136\" target=\"_blank\">IMPALA-1136</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2161\" target=\"_blank\">IMPALA-2161</a></p></div></div><div id=\"IMPALA-2213\"><div class=\"hue-doc-title\">make Parquet scanner fail query if the file size metadata is stale</div><div><p>If a Parquet file in HDFS was overwritten by a smaller file, Impala could encounter a serious error.\n      Issuing a <span class=\"hue-doc-codeph\">INVALIDATE METADATA</span> statement before a subsequent query would avoid the error.\n      The fix allows Impala to handle such inconsistencies in Parquet file length cleanly regardless of whether the\n      table metadata is up-to-date.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2213\" target=\"_blank\">IMPALA-2213</a></p></div></div><div id=\"IMPALA-2249\"><div class=\"hue-doc-title\">Avoid allocating StringBuffer &gt; 1GB in ScannerContext::Stream::GetBytesInternal()</div><div><p>Impala could encounter a serious error when reading compressed text files larger than 1 GB. The fix causes Impala\n      to issue an error message instead in this case.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2249\" target=\"_blank\">IMPALA-2249</a></p></div></div><div id=\"IMPALA-2284\"><div class=\"hue-doc-title\">Disallow long (1&lt;&lt;30) strings in group_concat()</div><div><p>A query using the <span class=\"hue-doc-codeph\">group_concat()</span> function could encounter a serious error if the returned string value was larger than 1 GB.\n      Now the query fails with an error message in this case.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2284\" target=\"_blank\">IMPALA-2284</a></p></div></div><div id=\"IMPALA-2270\"><div class=\"hue-doc-title\">avoid FnvHash64to32 with empty inputs</div><div><p>An edge case in the algorithm used to distribute data among nodes could result in uneven distribution of work for some queries,\n      with all data sent to the same node.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2270\" target=\"_blank\">IMPALA-2270</a></p></div></div><div id=\"IMPALA-2348\"><div class=\"hue-doc-title\">The catalog does not close the connection to HMS during table invalidation</div><div><p>A communication error could occur between Impala and the Hive metastore database, causing Impala operations that update\n      table metadata to fail.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2348\" target=\"_blank\">IMPALA-2348</a></p></div></div><div id=\"IMPALA-2364-548\"><div class=\"hue-doc-title\">Wrong DCHECK in PHJ::ProcessProbeBatch</div><div><p>Certain queries could encounter a serious error if the spill-to-disk mechanism was activated.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2364\" target=\"_blank\">IMPALA-2364</a></p></div></div><div id=\"IMPALA-2165-548\"><div class=\"hue-doc-title\">Avoid cardinality 0 in scan nodes of small tables and low selectivity</div><div><p>Impala could generate a suboptimal query plan for some queries involving small tables.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2165\" target=\"_blank\">IMPALA-2165</a></p></div></div></div><div id=\"fixed_issues_227\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.2.7</div><div><p>\n        This section lists the most frequently encountered customer issues fixed in Impala 2.2.7.\n      </p></div><div id=\"IMPALA-1983\"><div class=\"hue-doc-title\">Warn if table stats are potentially corrupt.</div><div><p>\n        Impala warns if it detects a discrepancy in table statistics: a table considered to have zero rows even though there are data files present.\n        In this case, Impala also skips query optimizations that are normally applied to very small tables.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1983\" target=\"_blank\">IMPALA-1983:</a></p></div></div><div id=\"IMPALA-2266\"><div class=\"hue-doc-title\">Pass correct child node in 2nd phase merge aggregation.</div><div><p>A query could encounter a serious error if it included a particular combination of aggregate functions and inline views.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2266\" target=\"_blank\">IMPALA-2266</a></p></div></div><div id=\"IMPALA-2216\"><div class=\"hue-doc-title\">Set the output smap of an EmptySetNode produced from an empty inline view.</div><div><p>A query could encounter a serious error if it included an inline view whose subquery had no <span class=\"hue-doc-codeph\">FROM</span> clause.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2216\" target=\"_blank\">IMPALA-2216</a></p></div></div><div id=\"IMPALA-2203\"><div class=\"hue-doc-title\">Set an InsertStmt's result exprs from the source statement's result exprs.</div><div><p>\n      A <span class=\"hue-doc-codeph\">CREATE TABLE AS SELECT</span> or <span class=\"hue-doc-codeph\">INSERT ... SELECT</span> statement could produce\n      different results than a <span class=\"hue-doc-codeph\">SELECT</span> statement, for queries including a <span class=\"hue-doc-codeph\">FULL JOIN</span> clause\n      and including literal values in the select list.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2203\" target=\"_blank\">IMPALA-2203</a></p></div></div><div id=\"IMPALA-2088\"><div class=\"hue-doc-title\">Fix planning of empty union operands with analytics.</div><div><p>\n        A query could return incorrect results if it contained a <span class=\"hue-doc-codeph\">UNION</span> clause,\n        calls to analytic functions, and a constant expression that evaluated to <span class=\"hue-doc-codeph\">FALSE</span>.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2088\" target=\"_blank\">IMPALA-2088</a></p></div></div><div id=\"IMPALA-2089\"><div class=\"hue-doc-title\">Retain eq predicates bound by grouping slots with complex grouping exprs.</div><div><p>\n        A query containing an <span class=\"hue-doc-codeph\">INNER JOIN</span> clause could return undesired rows.\n        Some predicate specified in the <span class=\"hue-doc-codeph\">ON</span> clause could be omitted from the filtering operation.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2089\" target=\"_blank\">IMPALA-2089</a></p></div></div><div id=\"IMPALA-2199\"><div class=\"hue-doc-title\">Row count not set for empty partition when spec is used with compute incremental stats</div><div><p>\n        A <span class=\"hue-doc-codeph\">COMPUTE INCREMENTAL STATS</span> statement could leave the row count for an emptyp partition as -1,\n        rather than initializing the row count to 0. The missing statistic value could result in reduced query performance.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2199\" target=\"_blank\">IMPALA-2199</a></p></div></div><div id=\"IMPALA-1898\"><div class=\"hue-doc-title\">Explicit aliases + ordinals analysis bug</div><div><p>\n        A query could encounter a serious error if it included column aliases with the same names as table columns, and used\n        ordinal numbers in an <span class=\"hue-doc-codeph\">ORDER BY</span> or <span class=\"hue-doc-codeph\">GROUP BY</span> clause.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1898\" target=\"_blank\">IMPALA-1898</a></p></div></div><div id=\"IMPALA-1987\"><div class=\"hue-doc-title\">Fix TupleIsNullPredicate to return false if no tuples are nullable.</div><div><p>\n        A query could return incorrect results if it included an outer join clause, inline views, and calls to functions such as <span class=\"hue-doc-codeph\">coalesce()</span>\n        that can generate <span class=\"hue-doc-codeph\">NULL</span> values.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1987\" target=\"_blank\">IMPALA-1987</a></p></div></div><div id=\"IMPALA-2178\"><div class=\"hue-doc-title\">fix Expr::ComputeResultsLayout() logic</div><div><p>\n        A query could return incorrect results if the table contained multiple <span class=\"hue-doc-codeph\">CHAR</span> columns with length of 2 or less,\n        and the query included a <span class=\"hue-doc-codeph\">GROUP BY</span> clause that referred to multiple such columns.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2178\" target=\"_blank\">IMPALA-2178</a></p></div></div><div id=\"IMPALA-1737\"><div class=\"hue-doc-title\">Substitute an InsertStmt's partition key exprs with the root node's smap.</div><div><p>\n        An <span class=\"hue-doc-codeph\">INSERT</span> statement could encounter a serious error if the <span class=\"hue-doc-codeph\">SELECT</span>\n        portion called an analytic function.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1737\" target=\"_blank\">IMPALA-1737</a></p></div></div></div><div id=\"fixed_issues_225\"><div class=\"hue-doc-title\">Issues Fixed in Impala Impala 2.2.5</div><div><p>\n        This section lists the most frequently encountered customer issues fixed in Impala 2.2.5.\n      </p></div><div id=\"IMPALA-2048\"><div class=\"hue-doc-title\">Impala DML/DDL operations corrupt table metadata leading to Hive query failures</div><div><p>\n        When the Impala <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement was run on a partitioned Parquet table that was created in Hive, the table subsequently became inaccessible in Hive.\n        The table was still accessible to Impala. Regaining access in Hive required a workaround of creating a new table. The error displayed in Hive was:\n      </p><div class=\"hue-doc-codeblock\">Error: Error while compiling statement: FAILED: SemanticException Class not found: org.apache.impala.hive.serde.ParquetInputFormat (state=42000,code=40000)</div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2048\" target=\"_blank\">IMPALA-2048</a></p></div></div><div id=\"IMPALA-1929\"><div class=\"hue-doc-title\">Avoiding a DCHECK of NULL hash table in spilled right joins</div><div><p>\n        A query could encounter a serious error if it contained a <span class=\"hue-doc-codeph\">RIGHT OUTER</span>, <span class=\"hue-doc-codeph\">RIGHT ANTI</span>, or <span class=\"hue-doc-codeph\">FULL OUTER</span> join clause\n        and approached the memory limit on a host so that the <q>spill to disk</q> mechanism was activated.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1929\" target=\"_blank\">IMPALA-1929</a></p></div></div><div id=\"IMPALA-2136\"><div class=\"hue-doc-title\">Bug in PrintTColumnValue caused wrong stats for TINYINT partition cols</div><div><p>\n        Declaring a partition key column as a <span class=\"hue-doc-codeph\">TINYINT</span> caused problems with the <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement.\n        The associated partitions would always have zero estimated rows, leading to potential inefficient query plans.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2136\" target=\"_blank\">IMPALA-2136</a></p></div></div><div id=\"IMPALA-2018\"><div class=\"hue-doc-title\">Where clause does not propagate to joins inside nested views</div><div><p>\n        A query that referred to a view whose query referred to another view containing a join, could return incorrect results.\n        <span class=\"hue-doc-codeph\">WHERE</span> clauses for the outermost query were not always applied, causing the result\n        set to include additional rows that should have been filtered out.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2018\" target=\"_blank\">IMPALA-2018</a></p></div></div><div id=\"IMPALA-2064\"><div class=\"hue-doc-title\">Add effective_user() builtin</div><div><p>\n        The <span class=\"hue-doc-codeph\">user()</span> function returned the name of the logged-in user, which might not be the\n        same as the user name being checked for authorization if, for example, delegation was enabled.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2064\" target=\"_blank\">IMPALA-2064</a></p><p><b>Resolution:</b> Rather than change the behavior of the <span class=\"hue-doc-codeph\">user()</span> function,\n      the fix introduces an additional function <span class=\"hue-doc-codeph\">effective_user()</span> that returns the user name that is checked during authorization.</p></div></div><div id=\"IMPALA-2125\"><div class=\"hue-doc-title\">Make UTC to local TimestampValue conversion faster.</div><div><p>\n        Query performance was improved substantially for Parquet files containing <span class=\"hue-doc-codeph\">TIMESTAMP</span>\n        data written by Hive, when the <span class=\"hue-doc-codeph\">-convert_legacy_hive_parquet_utc_timestamps=true</span> setting\n        is in effect.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2125\" target=\"_blank\">IMPALA-2125</a></p></div></div><div id=\"IMPALA-2065\"><div class=\"hue-doc-title\">Workaround IMPALA-1619 in BufferedBlockMgr::ConsumeMemory()</div><div><p>\n        A join query could encounter a serious error if the query\n        approached the memory limit on a host so that the <q>spill to disk</q> mechanism was activated,\n        and data volume in the join was large enough that an internal memory buffer exceeded 1 GB in size on a particular host.\n        (Exceeding this limit would only happen for huge join queries, because Impala could split this intermediate data\n        into 16 parts during the join query, and the buffer only contains compact bookkeeping data rather than the actual\n        join column data.)\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2065\" target=\"_blank\">IMPALA-2065</a></p></div></div></div><div id=\"fixed_issues_223\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.2.3</div><div><p>\n        This section lists the most frequently encountered customer issues fixed in Impala 2.2.3.\n      </p></div><div id=\"isilon_support\"><div class=\"hue-doc-title\">Enable using Isilon as the underlying filesystem.</div><div><p>\n        Enabling Impala to work with the Isilon filesystem involves a number of\n        fixes to performance and flexibility for dealing with I/O using remote reads.\n        See <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_isilon.xml\" data-doc-anchor-id=\"impala_isilon\">Using Impala with Isilon Storage</a> for details on using Impala and Isilon together.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1968\" target=\"_blank\">IMPALA-1968</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1730\" target=\"_blank\">IMPALA-1730</a></p></div></div><div id=\"IMPALA-1381\"><div class=\"hue-doc-title\">Expand set of supported timezones.</div><div><p>\n        The set of timezones recognized by Impala was expanded.\n        You can always find the latest list of supported timezones in the\n        Impala source code, in the file\n        <a class=\"hue-doc-external-link\" href=\"https://github.com/apache/impala/blob/master/be/src/exprs/timezone_db.cc\" target=\"_blank\">timezone_db.cc</a>.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1381\" target=\"_blank\">IMPALA-1381</a></p></div></div><div id=\"IMPALA-1963\"><div class=\"hue-doc-title\">Impala Timestamp ISO-8601 Support.</div><div><p>\n        Impala can now process <span class=\"hue-doc-codeph\">TIMESTAMP</span> literals including a trailing <span class=\"hue-doc-codeph\">z</span>,\n        signifying <q>Zulu</q> time, a synonym for UTC.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1963\" target=\"_blank\">IMPALA-1963</a></p></div></div><div id=\"IMPALA-2008\"><div class=\"hue-doc-title\">Fix wrong warning when insert overwrite to empty table</div><div><p>\n        An <span class=\"hue-doc-codeph\">INSERT OVERWRITE</span> operation would encounter an error\n        if the <span class=\"hue-doc-codeph\">SELECT</span> portion of the statement returned zero\n        rows, such as with a <span class=\"hue-doc-codeph\">LIMIT 0</span> clause.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2008\" target=\"_blank\">IMPALA-2008</a></p></div></div><div id=\"IMPALA-1952\"><div class=\"hue-doc-title\">Expand parsing of decimals to include scientific notation</div><div><p><span class=\"hue-doc-codeph\">DECIMAL</span> literals can now include <span class=\"hue-doc-codeph\">e</span> scientific notation.\n        For example, now <span class=\"hue-doc-codeph\">CAST(1e3 AS DECIMAL(5,3))</span> is a valid expression.\n        Formerly it returned <span class=\"hue-doc-codeph\">NULL</span>.\n        Some scientific expressions might have worked before in <span class=\"hue-doc-codeph\">DECIMAL</span> context, but only when the scale was 0.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1952\" target=\"_blank\">IMPALA-1952</a></p></div></div></div><div id=\"fixed_issues_221\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.2.1</div><div><p>\n        This section lists the most frequently encountered customer issues fixed in Impala 2.2.1.\n      </p></div></div><div id=\"fixed_issues_220\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.2.0</div><div><p>\n        This section lists the most frequently encountered customer issues fixed in Impala 2.2.0.\n      </p><p>\n        For the full list of fixed issues in Impala 2.2.0, including over 40 critical issues, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.2%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.2%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"IMPALA-1607\"><div class=\"hue-doc-title\">Altering a column's type causes column stats to stop sticking for that column</div><div><p>\n      When the type of a column was changed in either Hive or Impala through <span class=\"hue-doc-codeph\">ALTER TABLE CHANGE COLUMN</span>, the metastore database did not correctly propagate\n      that change to the table that contains the column statistics. The statistics (particularly the <span class=\"hue-doc-codeph\">NDV</span>) for that column were permanently reset\n      and could not be changed by Impala's <span class=\"hue-doc-codeph\">COMPUTE STATS</span> command. The underlying cause is a Hive bug (HIVE-9866).\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1607\" target=\"_blank\">IMPALA-1607</a></p><p><b>Resolution:</b> Resolved by incorporating the fix for <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/HIVE-9866\" target=\"_blank\">HIVE-9866</a>.</p><p><b>Workaround:</b> On systems without the corresponding Hive fix, change the column back to its original type. The stats reappear and you can recompute or drop them.</p></div></div><div id=\"IMPALA-1854\"><div class=\"hue-doc-title\">Impala may leak or use too many file descriptors</div><div><p>If a file was truncated in HDFS without a corresponding <span class=\"hue-doc-codeph\">REFRESH</span> in Impala, Impala could allocate memory for file descriptors and not free that memory.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1854\" target=\"_blank\">IMPALA-1854</a></p></div></div><div id=\"IMPALA-1712\"><div class=\"hue-doc-title\">Spurious stale block locality messages</div><div><p>\n        Impala could issue messages stating the block locality metadata was stale,\n        when the metadata was actually fine.\n        The internal <q>remote bytes read</q> counter was not being reset properly.\n        This issue did not cause an actual slowdown in query execution,\n        but the spurious error could result in unnecessary debugging work\n        and unnecessary use of the <span class=\"hue-doc-codeph\">INVALIDATE METADATA</span> statement.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1712\" target=\"_blank\">IMPALA-1712</a></p></div></div><div id=\"IMPALA-1711\"><div class=\"hue-doc-title\">DROP TABLE fails after COMPUTE STATS and ALTER TABLE RENAME to a different database.</div><div><p>\n        When a table was moved from one database to another, the column statistics were not pointed to the new database.i\n        This could result in lower performance for queries due to unavailable statistics, and also an inability\n        to drop the table.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1711\" target=\"_blank\">IMPALA-1711</a></p></div></div><div id=\"IMPALA-1674\"><div class=\"hue-doc-title\">IMPALA-1556 causes memory leak with secure connections</div><div><p><span class=\"hue-doc-cmdname\">impalad</span> daemons could experience a memory leak on clusters using Kerberos\n          authentication, with memory usage growing as more data is transferred across the secure channel, either\n          to the client program or between Impala nodes. The same issue affected LDAP-secured clusters to a lesser\n          degree, because the LDAP security only covers data transferred back to client programs.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1674\" target=\"_blank\">IMPALA-1674</a></p></div></div><div id=\"IMPALA-1623\"><div class=\"hue-doc-title\">unix_timestamp() does not return correct time</div><div><p>\n        The <span class=\"hue-doc-codeph\">unix_timestamp()</span> function could return an incorrect value (a constant value of 1).\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1623\" target=\"_blank\">IMPALA-1623</a></p></div></div><div id=\"IMPALA-1476\"><div class=\"hue-doc-title\">Impala incorrectly handles text data missing a newline on the last line</div><div><p>\n        Some queries did not recognize the final line of a text data file if the line did not end with a newline character.\n        This could lead to inconsistent results, such as a different number of rows for <span class=\"hue-doc-codeph\">SELECT COUNT(*)</span>\n        as opposed to <span class=\"hue-doc-codeph\">SELECT *</span>.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1476\" target=\"_blank\">IMPALA-1476</a></p></div></div><div id=\"IMPALA-1805\"><div class=\"hue-doc-title\">Impala's ACLs check do not consider all group ACLs, only checked first one.</div><div><p>\n        If the HDFS user ID associated with the <span class=\"hue-doc-cmdname\">impalad</span> process had read or write access in HDFS based on group membership,\n        Impala statements could still fail with HDFS permission errors if that group was not the first listed group for that user ID.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1805\" target=\"_blank\">IMPALA-1805</a></p></div></div><div id=\"IMPALA-1794\"><div class=\"hue-doc-title\">Fix infinite loop opening or closing file with invalid metadata</div><div><p>\n        Truncating a file in HDFS, after Impala had cached the file metadata, could produce a hang when Impala\n        queried a table containing that file.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1794\" target=\"_blank\">IMPALA-1794</a></p></div></div><div id=\"IMPALA-1705\"><div class=\"hue-doc-title\">Cannot write Parquet files when values are larger than 64KB</div><div><p>\n        Impala could sometimes fail to <span class=\"hue-doc-codeph\">INSERT</span> into a Parquet table if a column value such as a <span class=\"hue-doc-codeph\">STRING</span>\n        was larger than 64 KB.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1705\" target=\"_blank\">IMPALA-1705</a></p></div></div><div id=\"IMPALA-1646\"><div class=\"hue-doc-title\">Impala Will Not Run on Certain Intel CPUs</div><div><p>\n        This fix relaxes the CPU requirement for Impala. Now only the SSSE3 instruction set is required. Formerly, SSE4.1\n        instructions were generated, making Impala refuse to start on some older CPUs.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1646\" target=\"_blank\">IMPALA-1646</a></p></div></div></div><div id=\"fixed_issues_2110\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.1.10</div><div><p/></div></div><div id=\"fixed_issues_217\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.1.7</div><div><p>\n        This section lists the most significant Impala issues fixed in Impala 2.1.7.\n      </p></div><div id=\"IMPALA-1917-539\"><div class=\"hue-doc-title\">Query return empty result if it contains NullLiteral in inlineview</div><div><p>\n        If an inline view in a <span class=\"hue-doc-codeph\">FROM</span> clause contained a <span class=\"hue-doc-codeph\">NULL</span> literal,\n        the result set was empty.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1917\" target=\"_blank\">IMPALA-1917</a></p></div></div><div id=\"IMPALA-2264\"><div class=\"hue-doc-title\">Fix edge cases for decimal/integer cast</div><div><p>\n        A value of type <span class=\"hue-doc-codeph\">DECIMAL(3,0)</span> could be incorrectly cast to <span class=\"hue-doc-codeph\">TINYINT</span>.\n        The resulting out-of-range value could be incorrect. After the fix, the smallest type that is allowed\n        for this cast is <span class=\"hue-doc-codeph\">INT</span>, and attempting to use <span class=\"hue-doc-codeph\">DECIMAL(3,0)</span> in a\n        <span class=\"hue-doc-codeph\">TINYINT</span> context produces a <q>loss of precision</q> error.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2264\" target=\"_blank\">IMPALA-2264</a></p></div></div><div id=\"IMPALA-1756\"><div class=\"hue-doc-title\">Constant filter expressions are not checked for errors and state cleanup on exception / DCHECK on destroying an ExprContext</div><div><p>\n        An invalid constant expression in a <span class=\"hue-doc-codeph\">WHERE</span> clause (for example, an invalid\n        regular expression pattern) could fail to clean up internal state after raising a query error.\n        Therefore, certain combinations of invalid expressions in a query could cause a crash, or cause a query to continue\n        when it should halt with an error.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1756\" target=\"_blank\">IMPALA-1756</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2514\" target=\"_blank\">IMPALA-2514</a></p></div></div><div id=\"IMPALA-1746-539\"><div class=\"hue-doc-title\">QueryExecState does not check for query cancellation or\n        errors</div><div><p>\n        A call to <span class=\"hue-doc-codeph\">SetError()</span> in a user-defined function (UDF) would not cause the query to fail as expected.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1746\" target=\"_blank\">IMPALA-1746</a>,\n      <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2141\" target=\"_blank\">IMPALA-2141</a></p></div></div></div><div id=\"fixed_issues_216\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.1.6</div><div><p>\n        This section lists the most significant Impala issues fixed in Impala 2.1.6.\n      </p></div><div id=\"IMPALA-2364\"><div class=\"hue-doc-title\">Wrong DCHECK in PHJ::ProcessProbeBatch</div><div><p>Certain queries could encounter a serious error if the spill-to-disk mechanism was activated.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2364\" target=\"_blank\">IMPALA-2364</a></p></div></div><div id=\"IMPALA-2314\"><div class=\"hue-doc-title\">LargestSpilledPartition was not checking if partition is closed</div><div><p>Certain queries could encounter a serious error if the spill-to-disk mechanism was activated.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2314\" target=\"_blank\">IMPALA-2314</a></p></div></div><div id=\"IMPALA-2165\"><div class=\"hue-doc-title\">Avoid cardinality 0 in scan nodes of small tables and low selectivity</div><div><p>Impala could generate a suboptimal query plan for some queries involving small tables.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2165\" target=\"_blank\">IMPALA-2165</a></p></div></div><div id=\"IMPALA-2178-238\"><div class=\"hue-doc-title\">fix Expr::ComputeResultsLayout() logic</div><div><p>Queries using the <span class=\"hue-doc-codeph\">GROUP BY</span> operator on multiple <span class=\"hue-doc-codeph\">CHAR</span> columns with length less than or equal to 2 characters\n      could return incorrect results for some columns.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2178\" target=\"_blank\">IMPALA-2178</a></p></div></div><div id=\"IMPALA-2133\"><div class=\"hue-doc-title\">Properly unescape string value for HBase filters</div><div><p>Queries against HBase tables could return incomplete results if the <span class=\"hue-doc-codeph\">WHERE</span> clause included string comparisons using literals\n      containing escaped quotation marks.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-2133\" target=\"_blank\">IMPALA-2133</a></p></div></div><div id=\"IMPALA-1929-238\"><div class=\"hue-doc-title\">Avoiding a DCHECK of NULL hash table in spilled right joins</div><div><p>\n        A query could encounter a serious error if it contained a <span class=\"hue-doc-codeph\">RIGHT OUTER</span>, <span class=\"hue-doc-codeph\">RIGHT ANTI</span>, or <span class=\"hue-doc-codeph\">FULL OUTER</span> join clause\n        and approached the memory limit on a host so that the <q>spill to disk</q> mechanism was activated.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1929\" target=\"_blank\">IMPALA-1929</a></p></div></div></div><div id=\"fixed_issues_215\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.1.5</div><div><p>\n        This section lists the most significant Impala issues fixed in Impala 2.1.5.\n      </p></div><div id=\"IMPALA-1919\"><div class=\"hue-doc-title\">Avoid calling ProcessBatch with out_batch-&gt;AtCapacity in right joins</div><div><p>\n        Queries including <span class=\"hue-doc-codeph\">RIGHT OUTER JOIN</span>, <span class=\"hue-doc-codeph\">RIGHT ANTI JOIN</span>, or <span class=\"hue-doc-codeph\">FULL OUTER JOIN</span>\n        clauses and involving a high volume of data could encounter a serious error.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1919\" target=\"_blank\">IMPALA-1919</a></p></div></div></div><div id=\"fixed_issues_214\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.1.4</div><div><p>\n        This section lists the most significant Impala issues fixed in Impala 2.1.4.\n      </p><p/></div><div id=\"IMPALA-1519\"><div class=\"hue-doc-title\">Crash: impala::TupleIsNullPredicate::Prepare</div><div><p>\n        When expressions that tested for <span class=\"hue-doc-codeph\">NULL</span> were used in combination with analytic functions, an error could occur.\n        (The original crash issue was fixed by an earlier patch.)\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1519\" target=\"_blank\">IMPALA-1519</a></p></div></div><div id=\"IMPALA-1952-214\"><div class=\"hue-doc-title\">Expand parsing of decimals to include scientific notation</div><div><p><span class=\"hue-doc-codeph\">DECIMAL</span> literals could include <span class=\"hue-doc-codeph\">e</span> scientific notation.\n        For example, now <span class=\"hue-doc-codeph\">CAST(1e3 AS DECIMAL(5,3))</span> is a valid expression.\n        Formerly it returned <span class=\"hue-doc-codeph\">NULL</span>.\n        Some scientific expressions might have worked before in <span class=\"hue-doc-codeph\">DECIMAL</span> context, but only when the scale was 0.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1952\" target=\"_blank\">IMPALA-1952</a></p></div></div><div id=\"IMPALA-1860\"><div class=\"hue-doc-title\">INSERT/CTAS evaluates and applies constant predicates.</div><div><p>\n        An <span class=\"hue-doc-codeph\">INSERT OVERWRITE</span> statement would write new data, even if\n        a constant clause such as <span class=\"hue-doc-codeph\">WHERE 1 = 0</span> should have\n        prevented it from writing any rows.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1860\" target=\"_blank\">IMPALA-1860</a></p></div></div><div id=\"IMPALA-1900\"><div class=\"hue-doc-title\">Assign predicates below analytic functions with a compatible partition by clause</div><div><p>\n        If the <span class=\"hue-doc-codeph\">PARTITION BY</span> clause in an analytic function refers to partition key columns in a partitioned table,\n        now Impala can perform partition pruning during the analytic query.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1900\" target=\"_blank\">IMPALA-1900</a></p></div></div><div id=\"IMPALA-1888\"><div class=\"hue-doc-title\">FIRST_VALUE may produce incorrect results with preceding windows</div><div><p>\n        A query using the <span class=\"hue-doc-codeph\">FIRST_VALUE</span> analytic function\n        and a window defined with the <span class=\"hue-doc-codeph\">PRECEDING</span> keyword\n        could produce wrong results.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1888\" target=\"_blank\">IMPALA-1888</a></p></div></div><div id=\"IMPALA-1559\"><div class=\"hue-doc-title\">FIRST_VALUE rewrite fn type might not match slot type</div><div><p>\n        A query referencing a <span class=\"hue-doc-codeph\">DECIMAL</span> column with the <span class=\"hue-doc-codeph\">FIRST_VALUE</span> analytic function\n        could encounter an error.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1559\" target=\"_blank\">IMPALA-1559</a></p></div></div><div id=\"IMPALA-1808\"><div class=\"hue-doc-title\">AnalyticEvalNode cannot handle partition/order by exprs with NaN</div><div><p>\n        A query using an analytic function\n        could encounter an error if the\n        evaluation of an analytic <span class=\"hue-doc-codeph\">ORDER BY</span> or <span class=\"hue-doc-codeph\">PARTITION</span> expression\n        resulted in a NaN value, for example if the <span class=\"hue-doc-codeph\">ORDER BY</span> or <span class=\"hue-doc-codeph\">PARTITION</span>\n        contained a division operation where both operands were zero.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1808\" target=\"_blank\">IMPALA-1808</a></p></div></div><div id=\"IMPALA-1562\"><div class=\"hue-doc-title\">AnalyticEvalNode not properly handling nullable tuples</div><div><p>\n        An analytic function containing only an <span class=\"hue-doc-codeph\">OVER</span> clause could\n        encounter an error if another part of the query (specifically an outer join)\n        produced all-<span class=\"hue-doc-codeph\">NULL</span> tuples.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1562\" target=\"_blank\">IMPALA-1562</a></p></div></div></div><div id=\"fixed_issues_213\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.1.3</div><div><p>\n        This section lists the most significant issues fixed in Impala 2.1.3.\n      </p><p/></div><div id=\"IMPALA-1658\"><div class=\"hue-doc-title\">Add compatibility flag for Hive-Parquet-Timestamps</div><div><p>\n      When Hive writes <span class=\"hue-doc-codeph\">TIMESTAMP</span> values, it represents them\n      in the local time zone of the server. Impala expects <span class=\"hue-doc-codeph\">TIMESTAMP</span>\n      values to always be in the UTC time zone, possibly leading to inconsistent\n      results depending on which component created the data files.\n      This patch introduces a new startup flag,\n      <span class=\"hue-doc-codeph\">-convert_legacy_hive_parquet_utc_timestamps</span>\n      for the <span class=\"hue-doc-cmdname\">impalad</span> daemon.\n      Specify <span class=\"hue-doc-codeph\">-convert_legacy_hive_parquet_utc_timestamps=true</span>\n      to make Impala recognize Parquet data files written by Hive\n      and automatically adjust <span class=\"hue-doc-codeph\">TIMESTAMP</span>\n      values read from those files into the UTC time zone for\n      compatibility with other Impala <span class=\"hue-doc-codeph\">TIMESTAMP</span> processing.\n      Although this setting is currently turned off by default,\n      consider enabling it if practical in your environment,\n      for maximum interoperability with Hive-created Parquet files.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1658\" target=\"_blank\">IMPALA-1658</a></p></div></div><div id=\"IMPALA-1738\"><div class=\"hue-doc-title\">Use snprintf() instead of lexical_cast() in float-to-string casts</div><div><p>\n        Converting a floating-point value to a <span class=\"hue-doc-codeph\">STRING</span> could be slower than necessary.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1738\" target=\"_blank\">IMPALA-1738</a></p></div></div><div id=\"IMPALA-1865\"><div class=\"hue-doc-title\">Fix partition spilling cleanup when new stream OOMs</div><div><p>\n        Certain calls to aggregate functions with <span class=\"hue-doc-codeph\">STRING</span> arguments could encounter a serious error\n        when the system ran low on memory and attempted to activate the spill-to-disk mechanism.\n        The error message referenced the function <span class=\"hue-doc-codeph\">impala::AggregateFunctions::StringValGetValue</span>.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1865\" target=\"_blank\">IMPALA-1865</a></p></div></div><div id=\"IMPALA-1805-213\"><div class=\"hue-doc-title\">Impala's ACLs check do not consider all group ACLs, only checked first one.</div><div><p>\n        If the HDFS user ID associated with the <span class=\"hue-doc-cmdname\">impalad</span> process had read or write access in HDFS based on group membership,\n        Impala statements could still fail with HDFS permission errors if that group was not the first listed group for that user ID.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1805\" target=\"_blank\">IMPALA-1805</a></p></div></div><div id=\"IMPALA-1794-213\"><div class=\"hue-doc-title\">Fix infinite loop opening or closing file with invalid metadata</div><div><p>\n        Truncating a file in HDFS, after Impala had cached the file metadata, could produce a hang when Impala\n        queried a table containing that file.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1794\" target=\"_blank\">IMPALA-1794</a></p></div></div><div id=\"IMPALA-1801\"><div class=\"hue-doc-title\">external-data-source-executor leaking global jni refs</div><div><p>\n        Successive calls to the data source API could result in excessive memory consumption,\n        with memory allocated but never freed.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1801\" target=\"_blank\">IMPALA-1801</a></p></div></div><div id=\"IMPALA-1712-213\"><div class=\"hue-doc-title\">Spurious stale block locality messages</div><div><p>\n        Impala could issue messages stating the block locality metadata was stale,\n        when the metadata was actually fine.\n        The internal <q>remote bytes read</q> counter was not being reset properly.\n        This issue did not cause an actual slowdown in query execution,\n        but the spurious error could result in unnecessary debugging work\n        and unnecessary use of the <span class=\"hue-doc-codeph\">INVALIDATE METADATA</span> statement.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1712\" target=\"_blank\">IMPALA-1712</a></p></div></div></div><div id=\"fixed_issues_212\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.1.2</div><div><p>\n        This section lists the most significant issues fixed in Impala 2.1.2.\n      </p><p>\n        For the full list of fixed issues in Impala 2.1.2, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.1.2%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.1.2%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"IMPALA-1622\"><div class=\"hue-doc-title\">Impala incorrectly handles double numbers with more than 19 significant decimal digits</div><div><p>\n        When a floating-point value was read from a text file and interpreted as a <span class=\"hue-doc-codeph\">FLOAT</span>\n        or <span class=\"hue-doc-codeph\">DOUBLE</span> value, it could be incorrectly interpreted if it included more than\n        19 significant digits.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1622\" target=\"_blank\">IMPALA-1622</a></p></div></div><div id=\"IMPALA-1623-213\"><div class=\"hue-doc-title\">unix_timestamp() does not return correct time</div><div><p>\n        The <span class=\"hue-doc-codeph\">unix_timestamp()</span> function could return an incorrect value (a constant value of 1).\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1623\" target=\"_blank\">IMPALA-1623</a></p></div></div><div id=\"IMPALA-1535\"><div class=\"hue-doc-title\">Row Count Mismatch: Partition pruning with NULL</div><div><p>\n        A query against a partitioned table could return incorrect results if the <span class=\"hue-doc-codeph\">WHERE</span> clause\n        compared the partition key to <span class=\"hue-doc-codeph\">NULL</span> using operators such as <span class=\"hue-doc-codeph\">=</span> or <span class=\"hue-doc-codeph\">!=</span>.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1535\" target=\"_blank\">IMPALA-1535</a></p></div></div><div id=\"IMPALA-1120\"><div class=\"hue-doc-title\">Fetch column stats in bulk using new (Hive .13) HMS APIs</div><div><p>The performance of the <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement and queries was improved, particularly for wide tables.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1120\" target=\"_blank\">IMPALA-1120</a></p></div></div></div><div id=\"fixed_issues_211\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.1.1</div><div><p>\n        This section lists the most significant issues fixed in Impala 2.1.1.\n      </p><p>\n        For the full list of fixed issues in Impala 2.1.1, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.1.1%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.1.1%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"IMPALA-1674-211\"><div class=\"hue-doc-title\">IMPALA-1556 causes memory leak with secure connections</div><div><p><span class=\"hue-doc-cmdname\">impalad</span> daemons could experience a memory leak on clusters using Kerberos\n          authentication, with memory usage growing as more data is transferred across the secure channel, either\n          to the client program or between Impala nodes. The same issue affected LDAP-secured clusters to a lesser\n          degree, because the LDAP security only covers data transferred back to client programs.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1674\" target=\"_blank\">https://issues.apache.org/jira/browse/IMPALA-1674</a> IMPALA-1674\n        </p></div></div><div id=\"IMPALA-1668\"><div class=\"hue-doc-title\">TSaslServerTransport::Factory::getTransport() leaks transport map entries</div><div><p><span class=\"hue-doc-cmdname\">impalad</span> daemons in clusters secured by Kerberos or LDAP could experience a slight\n          memory leak on each connection. The accumulation of unreleased memory could cause problems on\n          long-running clusters.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1668\" target=\"_blank\">IMPALA-1668</a></p></div></div></div><div id=\"fixed_issues_210\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.1.0</div><div><p>\n        This section lists the most significant issues fixed in Impala 2.1.0.\n      </p><p>\n        For the full list of fixed issues in Impala 2.1.0, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.1%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.1%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"IMPALA-1455\"><div class=\"hue-doc-title\">Kerberos fetches 3x slower</div><div><p>\n          Transferring large result sets back to the client application on Kerberos\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1455\" target=\"_blank\">IMPALA-1455</a></p></div></div><div id=\"IMPALA-1556\"><div class=\"hue-doc-title\">Compressed file needs to be hold on entirely in Memory</div><div><p>\n          Queries on gzipped text files required holding the entire data file and its uncompressed representation\n          in memory at the same time. <span class=\"hue-doc-codeph\">SELECT</span> and <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statements could\n          fail or perform inefficiently as a result. The fix enables streaming reads for gzipped text, so that the\n          data is uncompressed as it is read.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1556\" target=\"_blank\">IMPALA-1556</a></p></div></div><div id=\"IMPALA-1611\"><div class=\"hue-doc-title\">Cannot read hbase metadata with NullPointerException: null</div><div><p>\n          Impala might not be able to access HBase tables, depending on the associated levels of Impala and HBase\n          on the system.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1611\" target=\"_blank\">IMPALA-1611</a></p></div></div><div id=\"IMPALA-serious-201\"><div class=\"hue-doc-title\">Serious errors / crashes</div><div><p>\n          Improved code coverage in Impala testing uncovered a number of potentially serious errors that could\n          occur with specific query syntax. These errors are resolved in Impala 2.1.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1553\" target=\"_blank\">IMPALA-1553</a>,\n          <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1528\" target=\"_blank\">IMPALA-1528</a>,\n          <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1526\" target=\"_blank\">IMPALA-1526</a>,\n          <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1524\" target=\"_blank\">IMPALA-1524</a>,\n          <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1508\" target=\"_blank\">IMPALA-1508</a>,\n          <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1493\" target=\"_blank\">IMPALA-1493</a>,\n          <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1501\" target=\"_blank\">IMPALA-1501</a>,\n          <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1483\" target=\"_blank\">IMPALA-1483</a></p></div></div></div><div id=\"fixed_issues_205\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.0.5</div><div><p>\n        For the full list of fixed issues in Impala 2.0.5, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0.5%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0.5%22+and+resolution%3D%22Fixed%22</a>.\n      </p></div></div><div id=\"fixed_issues_204\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.0.4</div><div><p>\n        This section lists the most significant issues fixed in Impala 2.0.4.\n      </p><p>\n        For the full list of fixed issues in Impala 2.0.4, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0.4%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0.4%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"IMPALA-1658-526\"><div class=\"hue-doc-title\">Add compatibility flag for Hive-Parquet-Timestamps</div><div><p>\n      When Hive writes <span class=\"hue-doc-codeph\">TIMESTAMP</span> values, it represents them\n      in the local time zone of the server. Impala expects <span class=\"hue-doc-codeph\">TIMESTAMP</span>\n      values to always be in the UTC time zone, possibly leading to inconsistent\n      results depending on which component created the data files.\n      This patch introduces a new startup flag,\n      <span class=\"hue-doc-codeph\">-convert_legacy_hive_parquet_utc_timestamps</span>\n      for the <span class=\"hue-doc-cmdname\">impalad</span> daemon.\n      Specify <span class=\"hue-doc-codeph\">-convert_legacy_hive_parquet_utc_timestamps=true</span>\n      to make Impala recognize Parquet data files written by Hive\n      and automatically adjust <span class=\"hue-doc-codeph\">TIMESTAMP</span>\n      values read from those files into the UTC time zone for\n      compatibility with other Impala <span class=\"hue-doc-codeph\">TIMESTAMP</span> processing.\n      Although this setting is currently turned off by default,\n      consider enabling it if practical in your environment,\n      for maximum interoperability with Hive-created Parquet files.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1658\" target=\"_blank\">IMPALA-1658</a></p></div></div><div id=\"IMPALA-1794-526\"><div class=\"hue-doc-title\">IoMgr infinite loop opening/closing file when shorter than cached metadata size</div><div><p>\n        If a table data file was replaced by a shorter file outside of Impala,\n        such as with <span class=\"hue-doc-codeph\">INSERT OVERWRITE</span> in Hive producing an empty\n        output file, subsequent Impala queries could hang.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1794\" target=\"_blank\">IMPALA-1794</a></p></div></div></div><div id=\"fixed_issues_203\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.0.3</div><div><p>\n        This section lists the most significant issues fixed in Impala 2.0.3.\n      </p><p>\n        For the full list of fixed issues in Impala 2.0.3, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0.3%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0.3%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"IMPALA-1471\"><div class=\"hue-doc-title\">Anti join could produce incorrect results when spilling</div><div><p>\n        An anti-join query (or a <span class=\"hue-doc-codeph\">NOT EXISTS</span> operation that was rewritten internally into an anti-join) could produce incorrect results\n        if Impala reached its memory limit, causing the query to write temporary results to disk.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1471\" target=\"_blank\">IMPALA-1471</a></p></div></div><div id=\"IMPALA-1535-52x\"><div class=\"hue-doc-title\">Row Count Mismatch: Partition pruning with NULL</div><div><p>\n        A query against a partitioned table could return incorrect results if the <span class=\"hue-doc-codeph\">WHERE</span> clause\n        compared the partition key to <span class=\"hue-doc-codeph\">NULL</span> using operators such as <span class=\"hue-doc-codeph\">=</span> or <span class=\"hue-doc-codeph\">!=</span>.\n      </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1535\" target=\"_blank\">IMPALA-1535</a></p></div></div><div id=\"IMPALA-1120-52x\"><div class=\"hue-doc-title\">Fetch column stats in bulk using new (Hive .13) HMS APIs</div><div><p>The performance of the <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement and queries was improved, particularly for wide tables.</p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1120\" target=\"_blank\">IMPALA-1120</a></p></div></div></div><div id=\"fixed_issues_202\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.0.2</div><div><p>\n        This section lists the most significant issues fixed in Impala 2.0.2.\n      </p><p>\n        For the full list of fixed issues in Impala 2.0.2, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0.2%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0.2%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"IMPALA-1453\"><div class=\"hue-doc-title\">GROUP BY on STRING column produces inconsistent results</div><div><p>\n          Some operations in queries submitted through Hue or other HiveServer2 clients could produce inconsistent\n          results.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1453\" target=\"_blank\">IMPALA-1453</a></p></div></div><div id=\"IoMgr_522\"><div class=\"hue-doc-title\">Fix leaked file descriptor and excessive file descriptor use</div><div><p>\n          Impala could encounter an error from running out of file descriptors. The fix reduces the amount of time\n          file descriptors are kept open, and avoids leaking file descriptors when read operations encounter\n          errors.\n        </p></div></div><div id=\"IMPALA-1623-52x\"><div class=\"hue-doc-title\">unix_timestamp() does not return correct time</div><div><p>\n          The <span class=\"hue-doc-codeph\">unix_timestamp()</span> function could return a constant value <span class=\"hue-doc-codeph\">1</span> instead\n          of a representation of the time.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1623\" target=\"_blank\">IMPALA-1623</a></p></div></div><div id=\"IMPALA-1586\"><div class=\"hue-doc-title\">Impala should randomly select cached replica</div><div><p>\n          To avoid putting too heavy a load on any one node, Impala now randomizes which scan node processes each\n          HDFS data block rather than choosing the first cached block replica.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1586\" target=\"_blank\">IMPALA-1586</a></p></div></div><div id=\"IMPALA-1606\"><div class=\"hue-doc-title\">Impala does not always give short name to Llama.</div><div><p>\n          In clusters secured by Kerberos or LDAP, a discrepancy in internal transmission of user names could cause\n          a communication error with Llama.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1606\" target=\"_blank\">IMPALA-1606</a></p></div></div><div id=\"IMPALA-1475\"><div class=\"hue-doc-title\">accept unmangled native UDF symbols</div><div><p>\n          The <span class=\"hue-doc-codeph\">CREATE FUNCTION</span> statement could report that it could not find a function entry point\n          within the <span class=\"hue-doc-codeph\">.so</span> file for a UDF written in C++, even if the corresponding function was\n          present.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1475\" target=\"_blank\">IMPALA-1475</a></p></div></div></div><div id=\"fixed_issues_201\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.0.1</div><div><p>\n        This section lists the most significant issues fixed in Impala 2.0.1.\n      </p><p>\n        For the full list of fixed issues in Impala 2.0.1, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0.1%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0.1%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"IMPALA-1416\"><div class=\"hue-doc-title\">Queries fail with metastore exception after upgrade and compute stats</div><div><p>\n          After running the <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement on an Impala table, subsequent queries on that\n          table could fail with the exception message <span class=\"hue-doc-codeph\">Failed to load metadata for table:\n          default.stats_test</span>.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1416\" target=\"_blank\">https://issues.apache.org/jira/browse/IMPALA-1416</a> IMPALA-1416\n        </p><p><b>Workaround:</b> Upgrading to a level of CDH that includes the fix for HIVE-8627,\n          prevents the problem from affecting future <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statements. On affected levels\n          of CDH, or for Impala tables that have become inaccessible, the workaround is to disable the\n          <span class=\"hue-doc-codeph\">hive.metastore.try.direct.sql</span> setting in the Hive metastore\n          <span class=\"hue-doc-filepath\">hive-site.xml</span> file and issue the <span class=\"hue-doc-codeph\">INVALIDATE METADATA</span> statement for\n          the affected table. You do not need to rerun the <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement for the table.\n        </p></div></div></div><div id=\"fixed_issues_200\"><div class=\"hue-doc-title\">Issues Fixed in Impala 2.0.0</div><div><p>\n        This section lists the most significant issues fixed in Impala 2.0.0.\n      </p><p>\n        For the full list of fixed issues in Impala 2.0.0, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"IMPALA-995\"><div class=\"hue-doc-title\">Join Hint is dropped when used inside a view</div><div><p>\n          Hints specified within a view query did not take effect when the view was queried, leading to slow\n          performance. As part of this fix, Impala now supports hints embedded within comments.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-995\" target=\"_blank\">IMPALA-995\"</a></p></div></div><div id=\"IMPALA-1101\"><div class=\"hue-doc-title\">WHERE condition ignored in simple query with RIGHT JOIN</div><div><p>\n          Potential wrong results for some types of queries.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1101\" target=\"_blank\">IMPALA-1101\"</a></p></div></div><div id=\"IMPALA-1102\"><div class=\"hue-doc-title\">Query with self joined table may produce incorrect results</div><div><p>\n          Potential wrong results for some types of queries.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1102\" target=\"_blank\">IMPALA-1102\"</a></p></div></div><div id=\"IMPALA-1118\"><div class=\"hue-doc-title\">Incorrect plan after reordering predicates (inner join following outer join)</div><div><p>\n          Potential wrong results for some types of queries.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1118\" target=\"_blank\">IMPALA-1118\"</a></p></div></div><div id=\"IMPALA-1123\"><div class=\"hue-doc-title\">Combining fragments with compatible data partitions can lead to incorrect results due to type incompatibilities (missing casts).</div><div><p>\n          Potential wrong results for some types of queries.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1123\" target=\"_blank\">IMPALA-1123\"</a></p></div></div><div id=\"IMPALA-1165\"><div class=\"hue-doc-title\">Predicate dropped: Inline view + DISTINCT aggregate in outer query</div><div><p>\n          Potential wrong results for some types of queries.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1165\" target=\"_blank\">IMPALA-1165\"</a></p></div></div><div id=\"IMPALA-1353\"><div class=\"hue-doc-title\">Reuse of a column in JOIN predicate may lead to incorrect results</div><div><p>\n          Potential wrong results for some types of queries.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1353\" target=\"_blank\">IMPALA-1353\"</a></p></div></div><div id=\"IMPALA-1105\"><div class=\"hue-doc-title\">Usage of TRUNC with string timestamp reliably crashes node</div><div><p>\n          Serious error for certain combinations of function calls and data types.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1105\" target=\"_blank\">IMPALA-1105\"</a></p></div></div><div id=\"IMPALA-1109\"><div class=\"hue-doc-title\">Timestamp Cast Returns invalid TIMESTAMP</div><div><p>\n          Serious error for certain combinations of function calls and data types.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1109\" target=\"_blank\">IMPALA-1109\"</a></p></div></div><div id=\"IMPALA-1121\"><div class=\"hue-doc-title\">IllegalStateException upon JOIN of DECIMAL columns with different precision</div><div><p><span class=\"hue-doc-codeph\">DECIMAL</span> columns with different precision could not be compared in join predicates.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1121\" target=\"_blank\">IMPALA-1121\"</a></p></div></div><div id=\"IMPALA-1104\"><div class=\"hue-doc-title\">Allow creating Avro tables without column definitions. Allow COMPUTE STATS to always work on Impala-created Avro tables.</div><div><p>\n          Hive-created Avro tables with columns specified by a JSON file or literal could produce errors when\n          queried in Impala, and could not be used with the <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement. Now you can\n          create such tables in Impala to avoid such errors.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1104\" target=\"_blank\">IMPALA-1104\"</a></p></div></div><div id=\"IMPALA-1133\"><div class=\"hue-doc-title\">Ensure all webserver output is escaped</div><div><p>\n          The Impala debug web UI did not properly encode all output.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1133\" target=\"_blank\">IMPALA-1133\"</a></p></div></div><div id=\"IMPALA-1236\"><div class=\"hue-doc-title\">Queries with union in inline view have empty resource requests</div><div><p>\n          Certain queries could run without obeying the limits imposed by resource management.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1236\" target=\"_blank\">IMPALA-1236\"</a></p></div></div><div id=\"IMPALA-1279\"><div class=\"hue-doc-title\">Impala does not employ ACLs when checking path permissions for LOAD and INSERT</div><div><p>\n          Certain <span class=\"hue-doc-codeph\">INSERT</span> and <span class=\"hue-doc-codeph\">LOAD DATA</span> statements could fail unnecessarily, if\n          the target directories in HDFS had restrictive HDFS permissions, but those permissions were overridden by\n          HDFS extended ACLs.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1279\" target=\"_blank\">IMPALA-1279\"</a></p></div></div><div id=\"IMPALA-1334\"><div class=\"hue-doc-title\">Impala does not map principals to lowercase, affecting Sentry authorisation</div><div><p>\n          In a Kerberos environment, the principal name was not mapped to lowercase, causing issues when a user\n          logged in with an uppercase principal name and Sentry authorization was enabled.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1334\" target=\"_blank\">IMPALA-1334\"</a></p></div></div></div><div id=\"fixed_issues_144\"><div class=\"hue-doc-title\">Issues Fixed in Impala 1.4.4</div><div><p/></div></div><div id=\"fixed_issues_143\"><div class=\"hue-doc-title\">Issues Fixed in Impala 1.4.3</div><div><p>\n        Impala 1.4.3 includes fixes to address what is known as the POODLE vulnerability in SSLv3. SSLv3 access is\n        disabled in the Impala debug web UI.\n      </p></div></div><div id=\"fixed_issues_142\"><div class=\"hue-doc-title\">Issues Fixed in Impala 1.4.2</div><div><p>\n        This section lists the most significant issues fixed in Impala 1.4.2.\n      </p><p>\n        For the full list of fixed issues in Impala 1.4.2, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.4.2%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.4.2%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div></div><div id=\"fixed_issues_141\"><div class=\"hue-doc-title\">Issues Fixed in Impala 1.4.1</div><div><p>\n        This section lists the most significant issues fixed in Impala 1.4.1.\n      </p><p>\n        For the full list of fixed issues in Impala 1.4.1, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.4.1%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.4.1%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"impalad_boost_exception\"><div class=\"hue-doc-title\">impalad terminating with Boost exception</div><div><p>\n          Occasionally, a non-trivial query run through Llama could encounter a serious error. The detailed error\n          in the log was:\n        </p><div class=\"hue-doc-codeblock\">boost::exception_detail::clone_impl\n  &lt;boost::exception_detail::error_info_injector&lt;boost::lock_error&gt; &gt;\n</div><p><b>Severity:</b> High\n        </p></div></div><div id=\"string_format_logs\"><div class=\"hue-doc-title\">Impalad uses wrong string format when writing logs</div><div><p>\n          Impala log files could contain internal error messages due to a problem formatting certain strings. The\n          messages consisted of a Java call stack starting with:\n        </p><div class=\"hue-doc-codeblock\">jni-util.cc:177] java.util.MissingFormatArgumentException: Format specifier 's'\n</div></div></div><div id=\"IMPALA-1107\"><div class=\"hue-doc-title\">Update HS2 client API.</div><div><p>\n          A downlevel version of the HiveServer2 API could cause difficulty retrieving the precision and scale of a\n          <span class=\"hue-doc-codeph\">DECIMAL</span> value.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1107\" target=\"_blank\">IMPALA-1107</a></p></div></div><div id=\"IMPALA-1093\"><div class=\"hue-doc-title\">Impalad catalog updates can fail with error: \"IllegalArgumentException: fromKey out of range\"</div><div><p>\n          The error in the title could occur following a DDL statement. This issue was discovered during internal\n          testing and has not been reported in customer environments.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1093\" target=\"_blank\">IMPALA-1093</a></p></div></div><div id=\"IMPALA-1131\"><div class=\"hue-doc-title\">\"Total\" time counter does not capture all the network transmit time</div><div><p>\n          The time for some network operations was not counted in the report of total time for a query, making it\n          difficult to diagnose network-related performance issues.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1131\" target=\"_blank\">IMPALA-1131</a></p></div></div><div id=\"IMPALA-1149\"><div class=\"hue-doc-title\">Impala will crash when reading certain Avro files containing bytes data</div><div><p>\n          Certain Avro fields for byte data could cause Impala to be unable to read an Avro data file, even if the\n          field was not part of the Impala table definition. With this fix, Impala can now read these Avro data\n          files, although Impala queries cannot refer to the <q>bytes</q> fields.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1149\" target=\"_blank\">IMPALA-1149</a></p></div></div><div id=\"IMPALA-1142\"><div class=\"hue-doc-title\">Support specifying a custom AuthorizationProvider in Impala</div><div><p>\n          The <span class=\"hue-doc-codeph\">--authorization_policy_provider_class</span> option for <span class=\"hue-doc-cmdname\">impalad</span> was\n          added back. This option specifies a custom <span class=\"hue-doc-codeph\">AuthorizationProvider</span> class rather than the\n          default <span class=\"hue-doc-codeph\">HadoopGroupAuthorizationProvider</span>. It had been used for internal testing, then\n          removed in Impala 1.4.0, but it was considered useful by some customers.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1142\" target=\"_blank\">IMPALA-1142</a></p></div></div></div><div id=\"fixed_issues_140\"><div class=\"hue-doc-title\">Issues Fixed in Impala 1.4.0</div><div><p>\n        This section lists the most significant issues fixed in Impala 1.4.0.\n      </p><p>\n        For the full list of fixed issues in Impala 1.4.0, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.4%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.4%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"IMPALA-1019\"><div class=\"hue-doc-title\">Failed DCHECK in disk-io-mgr-reader-context.cc:174</div><div><p>\n          The serious error in the title could occur, with the supplemental message:\n        </p><div class=\"hue-doc-codeblock\">num_used_buffers_ &lt; 0: #used=-1 during cancellation HDFS cached data</div><p>\n          The issue was due to the use of HDFS caching with data files accessed by Impala. Support for HDFS caching\n          in Impala was introduced in Impala 1.4.0. The fix for this issue was backported to Impala\n          1.3.x, and is the only change in Impala 1.3.2.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1019\" target=\"_blank\">IMPALA-1019</a></p><p><b>Resolution:</b> This issue is fixed in Impala 1.3.2. The addition of HDFS caching\n          support in Impala 1.4 means that this issue does not apply to any new level of Impala.\n        </p></div></div><div id=\"IMPALA-489\"><div class=\"hue-doc-title\">impala-shell only works with ASCII characters</div><div><p>\n          The <span class=\"hue-doc-cmdname\">impala-shell</span> interpreter could encounter errors processing SQL statements\n          containing non-ASCII characters.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-489\" target=\"_blank\">IMPALA-489</a></p></div></div><div id=\"IMPALA-962\"><div class=\"hue-doc-title\">The extended view definition SQL text in Views created by Impala should always have fully-qualified table names</div><div><p>\n          When a view was accessed while inside a different database, references to tables were not resolved unless\n          the names were fully qualified when the view was created.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-962\" target=\"_blank\">IMPALA-962</a></p></div></div><div id=\"IMPALA-741\"><div class=\"hue-doc-title\">Impala forgets about partitions with non-existant locations</div><div><p>\n          If an <span class=\"hue-doc-codeph\">ALTER TABLE</span> specified a non-existent HDFS location for a partition, afterwards\n          Impala would not be able to access the partition at all.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-741\" target=\"_blank\">IMPALA-741</a></p></div></div><div id=\"IMPALA-834\"><div class=\"hue-doc-title\">CREATE TABLE LIKE fails if source is a view</div><div><p>\n          The <span class=\"hue-doc-codeph\">CREATE TABLE LIKE</span> clause was enhanced to be able to create a table with the same\n          column definitions as a view. The resulting table is a text table unless the <span class=\"hue-doc-codeph\">STORED AS</span>\n          clause is specified, because a view does not have an associated file format to inherit.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-834\" target=\"_blank\">IMPALA-834</a></p></div></div><div id=\"IMPALA-887\"><div class=\"hue-doc-title\">Improve partition pruning time</div><div><p>\n          Operations on tables with many partitions could be slow due to the time to evaluate which partitions were\n          affected. The partition pruning code was speeded up substantially.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-887\" target=\"_blank\">IMPALA-887</a></p></div></div><div id=\"IMPALA-1003\"><div class=\"hue-doc-title\">Improve compute stats performance</div><div><p>\n          The performance of the <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement was improved substantially. The\n          efficiency of its internal operations was improved, and some statistics are no longer gathered because\n          they are not currently used for planning Impala queries.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1003\" target=\"_blank\">IMPALA-1003</a></p></div></div><div id=\"IMPALA-185\"><div class=\"hue-doc-title\">When I run CREATE TABLE new_table LIKE avro_table, the schema does not get mapped properly from an avro schema to a hive schema</div><div><p>\n          After a <span class=\"hue-doc-codeph\">CREATE TABLE LIKE</span> statement using an Avro table as the source, the new table\n          could have incorrect metadata and be inaccessible, depending on how the original Avro table was created.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-185\" target=\"_blank\">IMPALA-185</a></p></div></div><div id=\"IMPALA-1046\"><div class=\"hue-doc-title\">Race condition in IoMgr. Blocked ranges enqueued after cancel.</div><div><p>\n          Impala could encounter a serious error after a query was cancelled.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1046\" target=\"_blank\">IMPALA-1046</a></p></div></div><div id=\"IMPALA-1083\"><div class=\"hue-doc-title\">Deadlock in scan node</div><div><p>\n          A deadlock condition could make all <span class=\"hue-doc-cmdname\">impalad</span> daemons hang, making the cluster\n          unresponsive for Impala queries.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1083\" target=\"_blank\">IMPALA-1083</a></p></div></div></div><div id=\"fixed_issues_133\"><div class=\"hue-doc-title\">Issues Fixed in Impala 1.3.3</div><div><p>\n        Impala 1.3.3 includes fixes to address what is known as the POODLE vulnerability in SSLv3. SSLv3 access is\n        disabled in the Impala debug web UI.\n      </p><p/></div></div><div id=\"fixed_issues_132\"><div class=\"hue-doc-title\">Issues Fixed in Impala 1.3.2</div><div><p>\n        This backported bug fix is the only change between Impala 1.3.1 and Impala 1.3.2.\n      </p></div><div id=\"IMPALA-1019-132\"><div class=\"hue-doc-title\">Failed DCHECK in disk-io-mgr-reader-context.cc:174</div><div><p>\n          The serious error in the title could occur, with the supplemental message:\n        </p><div class=\"hue-doc-codeblock\">num_used_buffers_ &lt; 0: #used=-1 during cancellation HDFS cached data</div><p>\n          The issue was due to the use of HDFS caching with data files accessed by Impala. Support for HDFS caching\n          in Impala was introduced in Impala 1.4.0. The fix for this issue was backported to Impala\n          1.3.x, and is the only change in Impala 1.3.2.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-1019\" target=\"_blank\">IMPALA-1019</a></p><p><b>Resolution:</b> This issue is fixed in Impala 1.3.2. The addition of HDFS caching\n          support in Impala 1.4 means that this issue does not apply to any new level of Impala.\n        </p></div></div></div><div id=\"fixed_issues_131\"><div class=\"hue-doc-title\">Issues Fixed in Impala 1.3.1</div><div><p>\n        This section lists the most significant issues fixed in Impala 1.3.1.\n      </p><p>\n        For the full list of fixed issues in Impala 1.3.1, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.3.1%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.3.1%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"IMPALA-904\"><div class=\"hue-doc-title\">Impalad crashes when left joining inline view that has aggregate using distinct</div><div><p>\n          Impala could encounter a severe error in a query combining a left outer join with an inline view\n          containing a <span class=\"hue-doc-codeph\">COUNT(DISTINCT)</span> operation.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-904\" target=\"_blank\">IMPALA-904</a></p></div></div><div id=\"IMPALA-901\"><div class=\"hue-doc-title\">Incorrect result with group by query with null value in group by data</div><div><p>\n          If the result of a <span class=\"hue-doc-codeph\">GROUP BY</span> operation is <span class=\"hue-doc-codeph\">NULL</span>, the resulting row might\n          be omitted from the result set. This issue depends on the data values and data types in the table.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-901\" target=\"_blank\">IMPALA-901</a></p></div></div><div id=\"IMPALA-786\"><div class=\"hue-doc-title\">Drop Function does not clear local library cache</div><div><p>\n          When a UDF is dropped through the <span class=\"hue-doc-codeph\">DROP FUNCTION</span> statement, and then the UDF is\n          re-created with a new <span class=\"hue-doc-codeph\">.so</span> library or JAR file, the original version of the UDF is still\n          used when the UDF is called from queries.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-786\" target=\"_blank\">IMPALA-786</a></p><p><b>Workaround:</b> Restart the <span class=\"hue-doc-cmdname\">impalad</span> daemon on all nodes.\n        </p></div></div><div id=\"IMPALA-762\"><div class=\"hue-doc-title\">Compute stats doesn't propagate underlying error correctly</div><div><p>\n          If a <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement encountered an error, the error message is <q>Query\n          aborted</q> with no further detail. Common reasons why a <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement might\n          fail include network errors causing the coordinator node to lose contact with other\n          <span class=\"hue-doc-cmdname\">impalad</span> instances, and column names that match Impala\n          <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_reserved_words.xml\" data-doc-anchor-id=\"reserved_words\">reserved words</a>. (Currently, if a column name\n          is an Impala reserved word, <span class=\"hue-doc-codeph\">COMPUTE STATS</span> always returns an error.)\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-762\" target=\"_blank\">IMPALA-762</a></p></div></div><div id=\"IMPALA-624\"><div class=\"hue-doc-title\">Inserts should respect changes in partition location</div><div><p>\n          After an <span class=\"hue-doc-codeph\">ALTER TABLE</span> statement that changes the <span class=\"hue-doc-codeph\">LOCATION</span> property of a\n          partition, a subsequent <span class=\"hue-doc-codeph\">INSERT</span> statement would always use a path derived from the base\n          data directory for the table.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-624\" target=\"_blank\">IMPALA-624</a></p></div></div><div id=\"IMPALA-13\"><div class=\"hue-doc-title\">Text data with carriage returns generates wrong results for count(*)</div><div><p>\n          A <span class=\"hue-doc-codeph\">COUNT(*)</span> operation could return the wrong result for text tables using nul characters\n          (ASCII value 0) as delimiters.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-13\" target=\"_blank\">IMPALA-13</a></p><p><b>Workaround:</b> Impala adds support for ASCII 0 characters as delimiters through the clause\n          <span class=\"hue-doc-codeph\">FIELDS TERMINATED BY '\\0'</span>.\n        </p></div></div><div id=\"IMPALA-488\"><div class=\"hue-doc-title\">IO Mgr should take instance memory limit into account when creating io buffers</div><div><p>\n          Impala could allocate more memory than necessary during certain operations.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-488\" target=\"_blank\">IMPALA-488</a></p><p><b>Workaround:</b> Before issuing a <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement for a Parquet table, reduce\n          the number of threads used in that operation by issuing <span class=\"hue-doc-codeph\">SET NUM_SCANNER_THREADS=2</span> in\n          <span class=\"hue-doc-cmdname\">impala-shell</span>. Then issue <span class=\"hue-doc-codeph\">UNSET NUM_SCANNER_THREADS</span> before continuing\n          with queries.\n        </p></div></div><div id=\"IMPALA-827\"><div class=\"hue-doc-title\">Impala should provide an option for new sub directories to automatically inherit the permissions of the parent directory</div><div><p>\n          When new subdirectories are created underneath a partitioned table by an <span class=\"hue-doc-codeph\">INSERT</span>\n          statement, previously the new subdirectories always used the default HDFS permissions for the\n          <span class=\"hue-doc-codeph\">impala</span> user, which might not be suitable for directories intended to be read and written\n          by other components also.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-827\" target=\"_blank\">IMPALA-827</a></p><p><b>Resolution:</b> In Impala 1.3.1 and higher, you can specify the\n          <span class=\"hue-doc-codeph\">--insert_inherit_permissions</span> configuration when starting the <span class=\"hue-doc-cmdname\">impalad</span>\n          daemon.\n        </p></div></div><div id=\"IMPALA-888\"><div class=\"hue-doc-title\">Illegal state exception (or crash) in query with UNION in inline view</div><div><p>\n          Impala could encounter a severe error in a query where the <span class=\"hue-doc-codeph\">FROM</span> list contains an inline\n          view that includes a <span class=\"hue-doc-codeph\">UNION</span>. The exact type of the error varies.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-888\" target=\"_blank\">IMPALA-888</a></p></div></div><div id=\"IMPALA-945\"><div class=\"hue-doc-title\">INSERT column reordering doesn't work with SELECT clause</div><div><p>\n          The ability to specify a subset of columns in an <span class=\"hue-doc-codeph\">INSERT</span> statement, with order different\n          than in the target table, was not working as intended.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-945\" target=\"_blank\">IMPALA-945</a></p></div></div></div><div id=\"fixed_issues_130\"><div class=\"hue-doc-title\">Issues Fixed in Impala 1.3.0</div><div><p>\n        This section lists the most significant issues fixed in Impala 1.3.0, primarily issues that could cause\n        wrong results, or cause problems running the <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement, which is very\n        important for performance and scalability.\n      </p><p>\n        For the full list of fixed issues, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.3%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.3%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"IMPALA-860\"><div class=\"hue-doc-title\">Inner join after right join may produce wrong results</div><div><p>\n          The automatic join reordering optimization could incorrectly reorder queries with an outer join or semi\n          join followed by an inner join, producing incorrect results.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-860\" target=\"_blank\">IMPALA-860</a></p><p><b>Workaround:</b> Including the <span class=\"hue-doc-codeph\">STRAIGHT_JOIN</span> keyword in the query prevented the issue\n          from occurring.\n        </p></div></div><div id=\"IMPALA-850\"><div class=\"hue-doc-title\">Incorrect results with codegen on multi-column group by with NULLs.</div><div><p>\n          A query with a <span class=\"hue-doc-codeph\">GROUP BY</span> clause referencing multiple columns could introduce incorrect\n          <span class=\"hue-doc-codeph\">NULL</span> values in some columns of the result set. The incorrect <span class=\"hue-doc-codeph\">NULL</span>\n          values could appear in rows where a different <span class=\"hue-doc-codeph\">GROUP BY</span> column actually did return\n          <span class=\"hue-doc-codeph\">NULL</span>.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-850\" target=\"_blank\">IMPALA-850</a></p></div></div><div id=\"IMPALA-845\"><div class=\"hue-doc-title\">Using distinct inside aggregate function may cause incorrect result when using having clause</div><div><p>\n          A query could return incorrect results if it combined an aggregate function call, a\n          <span class=\"hue-doc-codeph\">DISTINCT</span> operator, and a <span class=\"hue-doc-codeph\">HAVING</span> clause, without a <span class=\"hue-doc-codeph\">GROUP\n          BY</span> clause.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-845\" target=\"_blank\">IMPALA-845</a></p></div></div><div id=\"IMPALA-831\"><div class=\"hue-doc-title\">Aggregation on union inside (inline) view not distributed properly.</div><div><p>\n          An aggregation query or a query with <span class=\"hue-doc-codeph\">ORDER BY</span> and <span class=\"hue-doc-codeph\">LIMIT</span> could be\n          executed on a single node in some cases, rather than distributed across the cluster. This issue affected\n          queries whose <span class=\"hue-doc-codeph\">FROM</span> clause referenced an inline view containing a <span class=\"hue-doc-codeph\">UNION</span>.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-831\" target=\"_blank\">IMPALA-831</a></p></div></div><div id=\"IMPALA-817\"><div class=\"hue-doc-title\">Wrong expression may be used in aggregate query if there are multiple similar expressions</div><div><p>\n          If a <span class=\"hue-doc-codeph\">GROUP BY</span> query referenced the same columns multiple times using different\n          operators, result rows could contain multiple copies of the same expression.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-817\" target=\"_blank\">IMPALA-817</a></p></div></div><div id=\"IMPALA-765\"><div class=\"hue-doc-title\">Incorrect results when changing the order of aggregates in the select list with codegen enabled</div><div><p>\n          Referencing the same columns in both a <span class=\"hue-doc-codeph\">COUNT()</span> and a <span class=\"hue-doc-codeph\">SUM()</span> call in the\n          same query, or some other combinations of aggregate function calls, could incorrectly return a result of\n          0 from one of the aggregate functions. This issue affected references to <span class=\"hue-doc-codeph\">TINYINT</span> and\n          <span class=\"hue-doc-codeph\">SMALLINT</span> columns, but not <span class=\"hue-doc-codeph\">INT</span> or <span class=\"hue-doc-codeph\">BIGINT</span> columns.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-765\" target=\"_blank\">IMPALA-765</a></p><p><b>Workaround:</b> Setting the query option <span class=\"hue-doc-codeph\">DISABLE_CODEGEN=TRUE</span> prevented the incorrect\n          results. Switching the order of the function calls could also prevent the issue from occurring.\n        </p></div></div><div id=\"IMPALA-723\"><div class=\"hue-doc-title\">Union queries give Wrong result in a UNION followed by SIGSEGV in another union</div><div><p>\n          A <span class=\"hue-doc-codeph\">UNION</span> query could produce a wrong result, followed by a serious error for a subsequent\n          <span class=\"hue-doc-codeph\">UNION</span> query.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-723\" target=\"_blank\">IMPALA-723</a></p></div></div><div id=\"IMPALA-729\"><div class=\"hue-doc-title\">String data in MR-produced parquet files may be read incorrectly</div><div><p>\n          Impala could return incorrect string results when reading uncompressed Parquet data files containing\n          multiple row groups. This issue only affected Parquet data files produced by MapReduce jobs.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-729\" target=\"_blank\">IMPALA-729</a></p></div></div><div id=\"IMPALA-777\"><div class=\"hue-doc-title\">Compute stats need to use quotes with identifiers that are Impala keywords</div><div><p>\n          Using a column or table name that conflicted with Impala keywords could prevent running the\n          <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement for the table.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-777\" target=\"_blank\">IMPALA-777</a></p></div></div><div id=\"IMPALA-903\"><div class=\"hue-doc-title\">COMPUTE STATS child queries do not inherit parent query options.</div><div><p>\n          The <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement did not use the setting of the <span class=\"hue-doc-codeph\">MEM_LIMIT</span>\n          query option in <span class=\"hue-doc-cmdname\">impala-shell</span>, potentially causing problems gathering statistics for\n          wide Parquet tables.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-903\" target=\"_blank\">IMPALA-903</a></p></div></div><div id=\"IMPALA-880\"><div class=\"hue-doc-title\">COMPUTE STATS should update partitions in batches</div><div><p>\n          The <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement could be slow or encounter a timeout while analyzing a table\n          with many partitions.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-880\" target=\"_blank\">IMPALA-880</a></p></div></div><div id=\"IMPALA-867\"><div class=\"hue-doc-title\">Fail early (in analysis) when COMPUTE STATS is run against Avro table with no columns</div><div><p>\n          If the columns for an Avro table were all defined in the <span class=\"hue-doc-codeph\">TBLPROPERTIES</span> or\n          <span class=\"hue-doc-codeph\">SERDEPROPERTIES</span> clauses, the <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement would fail after\n          completely analyzing the table, potentially causing a long delay. Although the <span class=\"hue-doc-codeph\">COMPUTE\n          STATS</span> statement still does not work for such tables, now the problem is detected and reported\n          immediately.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-867\" target=\"_blank\">IMPALA-867</a></p><p><b>Workaround:</b> Re-create the Avro table with columns defined in SQL style, using the output of\n          <span class=\"hue-doc-codeph\">SHOW CREATE TABLE</span>. (See the JIRA page for detailed steps.)\n        </p></div></div></div><div id=\"fixed_issues_124\"><div class=\"hue-doc-title\">Issues Fixed in the 1.2.4 Release</div><div><p>\n        This section lists the most significant issues fixed in Impala 1.2.4. For the full list of fixed issues,\n        see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.2.4%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.2.4%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"IMPALA-818\"><div class=\"hue-doc-title\">The Catalog Server exits with an OOM error after a certain number of CREATE statements</div><div><p>\n          A large number of concurrent <span class=\"hue-doc-codeph\">CREATE TABLE</span> statements can cause the\n          <span class=\"hue-doc-cmdname\">catalogd</span> process to consume excessive memory, and potentially be killed due to an\n          out-of-memory condition.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-818\" target=\"_blank\">IMPALA-818</a></p><p><b>Workaround:</b> Restart the <span class=\"hue-doc-cmdname\">catalogd</span> service and re-try the DDL operations that\n          failed.\n        </p></div></div><div id=\"IMPALA-821\"><div class=\"hue-doc-title\">Catalog Server consumes excessive cpu cycle</div><div><p>\n          A large number of tables and partitions could result in unnecessary CPU overhead during Impala idle time\n          and background operations.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-821\" target=\"_blank\">IMPALA-821</a></p><p><b>Resolution:</b> Catalog server processing was optimized in several ways.\n        </p></div></div><div id=\"IMPALA-828\"><div class=\"hue-doc-title\">Query against Avro table crashes Impala with codegen enabled</div><div><p>\n          A query against a <span class=\"hue-doc-codeph\">TIMESTAMP</span> column in an Avro table could encounter a serious issue.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-828\" target=\"_blank\">IMPALA-828</a></p><p><b>Workaround:</b> Set the query option <span class=\"hue-doc-codeph\">DISABLE_CODEGEN=TRUE</span></p></div></div><div id=\"IMPALA-809\"><div class=\"hue-doc-title\">Statestore seems to send concurrent heartbeats to the same subscriber leading to repeated \"Subscriber '<span class=\"hue-doc-varname\">hostname</span>' is registering with statestore, ignoring update\" messages</div><div><p>\n          Impala nodes could produce repeated error messages after recovering from a communication error with the\n          statestore service.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-809\" target=\"_blank\">IMPALA-809</a></p></div></div><div id=\"IMPALA-805\"><div class=\"hue-doc-title\">Join predicate incorrectly ignored</div><div><p>\n          A join query could produce wrong results if multiple equality comparisons between the same tables\n          referred to the same column.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-805\" target=\"_blank\">IMPALA-805</a></p></div></div><div id=\"IMP-1258\"><div class=\"hue-doc-title\">Query result differing between Impala and Hive</div><div><p>\n          Certain outer join queries could return wrong results. If one of the tables involved in the join was an\n          inline view, some tests from the <span class=\"hue-doc-codeph\">WHERE</span> clauses could be applied to the wrong phase of\n          the query.\n        </p></div></div><div id=\"IMPALA-715\"><div class=\"hue-doc-title\">ArrayIndexOutOfBoundsException / Invalid query handle when reading large HBase cell</div><div><p>\n          An HBase cell could contain a value larger than 32 KB, leading to a serious error when Impala queries\n          that table. The error could occur even if the applicable row is not part of the result set.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-715\" target=\"_blank\">IMPALA-715</a></p><p><b>Workaround:</b> Use smaller values in the HBase table, or exclude the column containing the large\n          value from the result set.\n        </p></div></div><div id=\"IMPALA-735\"><div class=\"hue-doc-title\">select with distinct and full outer join, impalad coredump</div><div><p>\n          A query involving a <span class=\"hue-doc-codeph\">DISTINCT</span> operator combined with a <span class=\"hue-doc-codeph\">FULL OUTER JOIN</span>\n          could encounter a serious error.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-735\" target=\"_blank\">IMPALA-735</a></p><p><b>Workaround:</b> Set the query option <span class=\"hue-doc-codeph\">DISABLE_CODEGEN=TRUE</span></p></div></div><div id=\"IMPALA-749\"><div class=\"hue-doc-title\">Impala cannot load tables with more than Short.MAX_VALUE number of partitions</div><div><p>\n          If a table had more than 32,767 partitions, Impala would not recognize the partitions above the 32K limit\n          and query results could be incomplete.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-749\" target=\"_blank\">IMPALA-749</a></p></div></div><div id=\"IMP-1188\"><div class=\"hue-doc-title\">Various issues with HBase row key specification</div><div><p>\n          Queries against HBase tables could fail with an error if the row key was compared to a function return\n          value rather than a string constant. Also, queries against HBase tables could fail if the\n          <span class=\"hue-doc-codeph\">WHERE</span> clause contained combinations of comparisons that could not possibly match any row\n          key.\n        </p><p><b>Resolution:</b> Queries now return appropriate results when function calls are used in the row key\n          comparison. For queries involving non-existent row keys, such as <span class=\"hue-doc-codeph\">WHERE <span class=\"hue-doc-varname\">row_key</span>\n          IS NULL</span> or where the lower bound is greater than the upper bound, the query succeeds and returns\n          an empty result set.\n        </p></div></div></div><div id=\"fixed_issues_123\"><div class=\"hue-doc-title\">Issues Fixed in the 1.2.3 Release</div><div><p>\n        This release is a fix release that supercedes Impala 1.2.2, with the same features and fixes as 1.2.2 plus\n        one additional fix for compatibility with Parquet files generated outside of Impala by components such as\n        Hive, Pig, or MapReduce.\n      </p><p/></div><div id=\"IMPALA-720\"><div class=\"hue-doc-title\">Impala cannot read Parquet files with multiple row groups</div><div><p>\n          An early version of the <span class=\"hue-doc-codeph\">parquet-mr</span> library writes files that are not readable by\n          Impala, due to the presence of multiple row groups. Queries involving these data files might result in a\n          crash or a failure with an error such as <q>Column chunk should not contain two dictionary pages</q>.\n        </p><p>\n          This issue does not occur for Parquet files produced by Impala <span class=\"hue-doc-codeph\">INSERT</span> statements,\n          because Impala only produces files with a single row group.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-720\" target=\"_blank\">IMPALA-720</a></p></div></div></div><div id=\"fixed_issues_122\"><div class=\"hue-doc-title\">Issues Fixed in the 1.2.2 Release</div><div><p>\n        This section lists the most significant issues fixed in Impala 1.2.2. For the full list of fixed issues,\n        see <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.2.2%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.2.2%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"join_order\"><div class=\"hue-doc-title\">Order of table references in FROM clause is critical for optimal performance</div><div><p>\n          Impala does not currently optimize the join order of queries; instead, it joins tables in the order in\n          which they are listed in the FROM clause. Queries that contain one or more large tables on the right hand\n          side of joins (either an explicit join expressed as a JOIN statement or a join implicit in the list of\n          table references in the FROM clause) may run slowly or crash Impala due to out-of-memory errors. For\n          example:\n        </p><div class=\"hue-doc-codeblock\">SELECT ... FROM small_table JOIN large_table</div><p><b>Anticipated Resolution</b>: Fixed in Impala 1.2.2.\n        </p><p><b>Workaround</b>: In Impala 1.2.2 and higher, use the <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement to gather\n          statistics for each table involved in the join query, after data is loaded. Prior to Impala 1.2.2, modify\n          the query, if possible, to join the largest table first. For example:\n        </p><div class=\"hue-doc-codeblock\">SELECT ... FROM small_table JOIN large_table</div><p>\n          should be modified to:\n        </p><div class=\"hue-doc-codeblock\">SELECT ... FROM large_table JOIN small_table</div></div></div><div id=\"IMPALA-694\"><div class=\"hue-doc-title\">Parquet in CDH4.5 writes data files that are sometimes unreadable by Impala</div><div><p>\n          Some Parquet files could be generated by other components that Impala could not read.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-694\" target=\"_blank\">IMPALA-694</a></p><p><b>Resolution:</b> The underlying issue is being addressed by a fix in the Parquet libraries. Impala\n          1.2.2 works around the problem and reads the existing data files.\n        </p></div></div><div id=\"IMPALA-699\"><div class=\"hue-doc-title\">Deadlock in statestore when unregistering a subscriber and building a topic update</div><div><p>\n          The statestore service cound experience an internal error leading to a hang.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-699\" target=\"_blank\">IMPALA-699</a></p></div></div><div id=\"IMPALA-687\"><div class=\"hue-doc-title\">IllegalStateException when doing a union involving a group by</div><div><p>\n          A <span class=\"hue-doc-codeph\">UNION</span> query where one side involved a <span class=\"hue-doc-codeph\">GROUP BY</span> operation could cause\n          a serious error.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-687\" target=\"_blank\">IMPALA-687</a></p></div></div><div id=\"IMPALA-689\"><div class=\"hue-doc-title\">Impala Parquet Writer hit DCHECK in RleEncoder</div><div><p>\n          A serious error could occur when doing an <span class=\"hue-doc-codeph\">INSERT</span> into a Parquet table.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-689\" target=\"_blank\">IMPALA-689</a></p></div></div><div id=\"IMPALA-695\"><div class=\"hue-doc-title\">Hive UDF jars cannot be loaded by the FE</div><div><p>\n          If the JAR file for a Java-based Hive UDF was not in the <span class=\"hue-doc-codeph\">CLASSPATH</span>, the UDF could not be\n          called during a query.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-695\" target=\"_blank\">IMPALA-695</a></p></div></div></div><div id=\"fixed_issues_121\"><div class=\"hue-doc-title\">Issues Fixed in the 1.2.1 Release</div><div><p>\n        This section lists the most significant issues fixed in Impala 1.2.1. For the full list of fixed issues,\n        see <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.2.1%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.2.1%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"IMPALA-525\"><div class=\"hue-doc-title\">Scanners use too much memory when reading past scan range</div><div><p>\n          While querying a table with long column values, Impala could over-allocate memory leading to an\n          out-of-memory error. This problem was observed most frequently with tables using uncompressed RCFile or\n          text data files.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-525\" target=\"_blank\">IMPALA-525</a></p><p><b>Resolution:</b> Fixed in 1.2.1\n        </p></div></div><div id=\"IMPALA-657\"><div class=\"hue-doc-title\">Join node consumes memory way beyond mem-limit</div><div><p>\n          A join query could allocate a temporary work area that was larger than needed, leading to an\n          out-of-memory error. The fix makes Impala return unused memory to the system when the memory limit is\n          reached, avoiding unnecessary memory errors.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-657\" target=\"_blank\">IMPALA-657</a></p><p><b>Resolution:</b> Fixed in 1.2.1\n        </p></div></div><div id=\"IMPALA-652\"><div class=\"hue-doc-title\">Excessive memory consumption when query tables with 1k columns (Parquet file)</div><div><p>\n          Impala could encounter an out-of-memory condition setting up work areas for Parquet tables with many\n          columns. The fix reduces the size of the allocated memory when not actually needed to hold table data.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-652\" target=\"_blank\">IMPALA-652</a></p><p><b>Resolution:</b> Fixed in 1.2.1\n        </p></div></div></div><div id=\"fixed_issues_120\"><div class=\"hue-doc-title\">Issues Fixed in the 1.2.0 Beta Release</div><div><p>\n        This section lists the most significant issues fixed in Impala 1.2 (beta). For the full list of fixed\n        issues, see <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.2%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.2%22+and+resolution%3D%22Fixed%22</a>.\n      </p></div></div><div id=\"fixed_issues_111\"><div class=\"hue-doc-title\">Issues Fixed in the 1.1.1 Release</div><div><p>\n        This section lists the most significant issues fixed in Impala 1.1.1. For the full list of fixed issues,\n        see <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.1.1%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.1.1%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"IMPALA-477\"><div class=\"hue-doc-title\">Unexpected LLVM Crash When Querying Doubles on CentOS 5.x</div><div><p>\n          Certain queries involving <span class=\"hue-doc-codeph\">DOUBLE</span> columns could fail with a serious error. The fix\n          improves the generation of native machine instructions for certain chipsets.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-477\" target=\"_blank\">IMPALA-477</a></p></div></div><div id=\"IMPALA-482\"><div class=\"hue-doc-title\">\"block size is too big\" error with Snappy-compressed RCFile containing null</div><div><p>\n          Queries could fail with a <q>block size is too big</q> error, due to <span class=\"hue-doc-codeph\">NULL</span> values in\n          RCFile tables using Snappy compression.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-482\" target=\"_blank\">IMPALA-482</a></p></div></div><div id=\"IMPALA-510\"><div class=\"hue-doc-title\">Cannot query RC file for table that has more columns than the data file</div><div><p>\n          Queries could fail if an Impala RCFile table was defined with more columns than in the corresponding\n          RCFile data files.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-510\" target=\"_blank\">IMPALA-510</a></p></div></div><div id=\"IMPALA-495\"><div class=\"hue-doc-title\">Views Sometimes Not Utilizing Partition Pruning</div><div><p>\n          Certain combinations of clauses in a view definition for a partitioned table could result in inefficient\n          performance and incorrect results.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-495\" target=\"_blank\">IMPALA-495</a></p></div></div><div id=\"IMPALA-485\"><div class=\"hue-doc-title\">Update the serde name we write into the metastore for Parquet tables</div><div><p>\n          The SerDes class string written into Parquet data files created by Impala was updated for compatibility\n          with Parquet support in Hive. See <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_incompatible_changes.xml\" data-doc-anchor-id=\"incompatible_changes_111\">Incompatible Changes Introduced in Impala 1.1.1</a>\n          for the steps to update older Parquet data files for Hive compatibility.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-485\" target=\"_blank\">IMPALA-485</a></p></div></div><div id=\"IMPALA-534\"><div class=\"hue-doc-title\">Selective queries over large tables produce unnecessary memory consumption</div><div><p>\n          A query returning a small result sets from a large table could tie up memory unnecessarily for the\n          duration of the query.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-534\" target=\"_blank\">IMPALA-534</a></p></div></div><div id=\"IMPALA-538\"><div class=\"hue-doc-title\">Impala stopped to query AVRO tables</div><div><p>\n          Queries against Avro tables could fail depending on whether the Avro schema URL was specified in the\n          <span class=\"hue-doc-codeph\">TBLPROPERTIES</span> or <span class=\"hue-doc-codeph\">SERDEPROPERTIES</span> field. The fix causes Impala to check\n          both fields for the schema URL.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-538\" target=\"_blank\">IMPALA-538</a></p></div></div><div id=\"IMPALA-520\"><div class=\"hue-doc-title\">Impala continues to allocate more memory even though it has exceed its mem-limit</div><div><p>\n          Queries could allocate substantially more memory than specified in the <span class=\"hue-doc-cmdname\">impalad</span><span class=\"hue-doc-codeph\">-mem_limit</span> startup option. The fix causes more frequent checking of the limit during\n          query execution.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-520\" target=\"_blank\">IMPALA-520</a></p></div></div></div><div id=\"fixed_issues_110\"><div class=\"hue-doc-title\">Issues Fixed in the 1.1.0 Release</div><div><p>\n        This section lists the most significant issues fixed in Impala 1.1. For the full list of fixed issues, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.1%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.1%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"IMPALA-335\"><div class=\"hue-doc-title\">10-20% perf regression for most queries across all table formats</div><div><p>\n          This issue is due to a performance tradeoff between systems running many queries concurrently, and\n          systems running a single query. Systems running only a single query could experience lower performance\n          than in early beta releases. Systems running many queries simultaneously should experience higher\n          performance than in the beta releases.\n        </p></div></div><div id=\"IMPALA-85\"><div class=\"hue-doc-title\">planner fails with \"Join requires at least one equality predicate between the two tables\" when \"from\" table order does not match \"where\" join order</div><div><p>\n          A query could fail if it involved 3 or more tables and the last join table was specified as a subquery.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-85\" target=\"_blank\">IMPALA-85</a></p></div></div><div id=\"IMPALA-257\"><div class=\"hue-doc-title\">Parquet writer uses excessive memory with partitions</div><div><p><span class=\"hue-doc-codeph\">INSERT</span> statements against partitioned tables using the Parquet format could use\n          excessive amounts of memory as the number of partitions grew large.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-257\" target=\"_blank\">IMPALA-257</a></p></div></div><div id=\"IMPALA-192\"><div class=\"hue-doc-title\">Comments in impala-shell in interactive mode are not handled properly causing syntax errors or wrong results</div><div><p>\n          The <span class=\"hue-doc-cmdname\">impala-shell</span> interpreter did not accept comment entered at the command line,\n          making it problematic to copy and paste from scripts or other code examples.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-192\" target=\"_blank\">IMPALA-192</a></p></div></div><div id=\"IMPALA-364\"><div class=\"hue-doc-title\">Cancelled queries sometimes aren't removed from the inflight query list</div><div><p>\n          The Impala web UI would sometimes display a query as if it were still running, after the query was\n          cancelled.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-364\" target=\"_blank\">IMPALA-364</a></p></div></div><div id=\"IMPALA-396\"><div class=\"hue-doc-title\">Impala's 1.0.1 Shell Broke Python 2.4 Compatibility (AttributeError: 'module' object has no attribute 'field_size_limit)</div><div><p>\n          The <span class=\"hue-doc-codeph\">impala-shell</span> command in Impala 1.0.1 does not work with Python 2.4, which is the\n          default on Red Hat 5.\n        </p><p>\n          For the <span class=\"hue-doc-codeph\">impala-shell</span> command in Impala 1.0, the <span class=\"hue-doc-codeph\">-o</span> option (pipe output\n          to a file) does not work with Python 2.4.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-396\" target=\"_blank\">IMPALA-396</a></p></div></div></div><div id=\"fixed_issues_101\"><div class=\"hue-doc-title\">Issues Fixed in the 1.0.1 Release</div><div><p>\n        This section lists the most significant issues fixed in Impala 1.0.1. For the full list of fixed issues,\n        see <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.0.1%22+and+resolution%3D%22Fixed%22\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.0.1%22+and+resolution%3D%22Fixed%22</a>.\n      </p><p/></div><div id=\"IMPALA-333\"><div class=\"hue-doc-title\">Impala parquet scanner cannot read all data files generated by\n        other frameworks</div><div><p>\n          Impala might issue an erroneous error message when processing a Parquet data file produced by a\n          non-Impala Hadoop component.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-333\" target=\"_blank\">IMPALA-333</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-293\"><div class=\"hue-doc-title\">Impala is unable to query RCFile tables which describe fewer columns than the file's header.</div><div><p>\n          If an RCFile table definition had fewer columns than the fields actually in the data files, queries would\n          fail.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-293\" target=\"_blank\">IMPALA-293</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-351\"><div class=\"hue-doc-title\">Impala does not correctly substitute _HOST with hostname in --principal</div><div><p>\n          The <span class=\"hue-doc-codeph\">_HOST</span> placeholder in the <span class=\"hue-doc-codeph\">--principal</span> startup option was not\n          substituted with the correct hostname, potentially leading to a startup error in setups using Kerberos\n          authentication.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-351\" target=\"_blank\">IMPALA-351</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-356\"><div class=\"hue-doc-title\">HBase query missed the last region</div><div><p>\n          A query for an HBase table could omit data from the last region.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-356\" target=\"_blank\">IMPALA-356</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-300\"><div class=\"hue-doc-title\">Hbase region changes are not handled correctly</div><div><p>\n          After a region in an HBase table was split or moved, an Impala query might return incomplete or\n          out-of-date results.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-300\" target=\"_blank\">IMPALA-300</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-349\"><div class=\"hue-doc-title\">Query state for successful create table is EXCEPTION</div><div><p>\n          After a successful <span class=\"hue-doc-codeph\">CREATE TABLE</span> statement, the corresponding query state would be\n          incorrectly reported as <span class=\"hue-doc-codeph\">EXCEPTION</span>.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-349\" target=\"_blank\">IMPALA-349</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-358\"><div class=\"hue-doc-title\">Double check release of JNI-allocated byte-strings</div><div><p>\n          Operations involving calls to the Java JNI subsystem (for example, queries on HBase tables) could\n          allocate memory but not release it.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-358\" target=\"_blank\">IMPALA-358</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"unix_timestamp\"><div class=\"hue-doc-title\">Impala returns 0 for bad time values in UNIX_TIMESTAMP, Hive returns NULL</div><div><p>\n          Impala returns 0 for bad time values in UNIX_TIMESTAMP, Hive returns NULL.\n        </p><p><b>Impala:</b></p><div class=\"hue-doc-codeblock\">impala&gt; select UNIX_TIMESTAMP('10:02:01') ;\nimpala&gt; 0</div><p><b>Hive:</b></p><div class=\"hue-doc-codeblock\">hive&gt; select UNIX_TIMESTAMP('10:02:01') FROM tmp;\nhive&gt; NULL</div><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-16\" target=\"_blank\">IMPALA-16</a></p><p><b>Anticipated Resolution:</b> Fixed\n        </p></div></div><div id=\"IMP-231\"><div class=\"hue-doc-title\">INSERT INTO TABLE SELECT &lt;constant&gt; does not work.</div><div><p>\n          Insert INTO TABLE SELECT &lt;constant&gt; will not insert any data and may return an error.\n        </p><p><b>Anticipated Resolution</b>: Fixed\n        </p></div></div></div><div id=\"fixed_issues_10\"><div class=\"hue-doc-title\">Issues Fixed in the 1.0 GA Release</div><div><p>\n        Here are the major user-visible issues fixed in Impala 1.0. For a full list of fixed issues, see\n        <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/issues/?jql=project+%3D+impala+AND+resolution+%3D+Fixed+AND+fixVersion+%3D+%22Impala+1.0%22+ORDER+BY+key+ASC%2C+assignee+ASC%2C+priority+DESC\" target=\"_blank\">https://issues.apache.org/jira/issues/?jql=project+%3D+impala+AND+resolution+%3D+Fixed+AND+fixVersion+%3D+%22Impala+1.0%22+ORDER+BY+key+ASC%2C+assignee+ASC%2C+priority+DESC</a>.\n      </p><p/></div><div id=\"IMPALA-183\"><div class=\"hue-doc-title\">Undeterministically receive \"ERROR: unknown row bach destination...\" and \"ERROR: Invalid query handle\" from impala shell when running union query</div><div><p>\n          A query containing both <span class=\"hue-doc-codeph\">UNION</span> and <span class=\"hue-doc-codeph\">LIMIT</span> clauses could intermittently\n          cause the <span class=\"hue-doc-codeph\">impalad</span> process to halt with a segmentation fault.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-183\" target=\"_blank\">IMPALA-183</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-190\"><div class=\"hue-doc-title\">Insert with NULL partition keys results in SIGSEGV.</div><div><p>\n          An <span class=\"hue-doc-codeph\">INSERT</span> statement specifying a <span class=\"hue-doc-codeph\">NULL</span> value for one of the partitioning\n          columns could cause the <span class=\"hue-doc-codeph\">impalad</span> process to halt with a segmentation fault.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-190\" target=\"_blank\">IMPALA-190</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-217\"><div class=\"hue-doc-title\">INSERT queries don't show completed profiles on the debug webpage</div><div><p>\n          In the Impala web user interface, the profile page for an <span class=\"hue-doc-codeph\">INSERT</span> statement showed\n          obsolete information for the statement once it was complete.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-217\" target=\"_blank\">IMPALA-217</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-231\"><div class=\"hue-doc-title\">Impala HBase scan is very slow</div><div><p>\n          Queries involving an HBase table could be slower than expected, due to excessive memory usage on the\n          Impala nodes.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-231\" target=\"_blank\">IMPALA-231</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-234\"><div class=\"hue-doc-title\">Add some library version validation logic to impalad when loading impala-lzo shared library</div><div><p>\n          No validation was done to check that the <span class=\"hue-doc-codeph\">impala-lzo</span> shared library was compatible with\n          the version of Impala, possibly leading to a crash when using LZO-compressed text files.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-234\" target=\"_blank\">IMPALA-234</a></p><p><b>Resolution:</b> Fixed\n        </p><p><b>Workaround:</b> Always upgrade the <span class=\"hue-doc-codeph\">impala-lzo</span> library at the same time as you upgrade\n          Impala itself.\n        </p></div></div><div id=\"IMPALA-238\"><div class=\"hue-doc-title\">Problems inserting into tables with TIMESTAMP partition columns leading table metadata loading failures and failed dchecks</div><div><p><span class=\"hue-doc-codeph\">INSERT</span> statements for tables partitioned on columns involving datetime types could\n          appear to succeed, but cause errors for subsequent queries on those tables. The problem was especially\n          serious if an improperly formatted timestamp value was specified for the partition key.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-238\" target=\"_blank\">IMPALA-238</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-243\"><div class=\"hue-doc-title\">Ctrl-C sometimes interrupts shell in system call, rather than cancelling query</div><div><p>\n          Pressing Ctrl-C in the <span class=\"hue-doc-codeph\">impala-shell</span> interpreter could sometimes display an error and\n          return control to the shell, making it impossible to cancel the query.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-243\" target=\"_blank\">IMPALA-243</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-252\"><div class=\"hue-doc-title\">Empty string partition value causes metastore update failure</div><div><p>\n          Specifying an empty string or <span class=\"hue-doc-codeph\">NULL</span> for a partition key in an <span class=\"hue-doc-codeph\">INSERT</span>\n          statement would fail.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-252\" target=\"_blank\">IMPALA-252</a></p><p><b>Resolution:</b> Fixed. The behavior for empty partition keys was made more compatible with the\n          corresponding Hive behavior.\n        </p></div></div><div id=\"IMPALA-266\"><div class=\"hue-doc-title\">Round() does not output the right precision</div><div><p>\n          The <span class=\"hue-doc-codeph\">round()</span> function did not always return the correct number of significant digits.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-266\" target=\"_blank\">IMPALA-266</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-267\"><div class=\"hue-doc-title\">Cannot cast string literal to string</div><div><p>\n          Casting from a string literal back to the same type would cause an <q>invalid type cast</q> error rather\n          than leaving the original value unchanged.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-267\" target=\"_blank\">IMPALA-267</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-288\"><div class=\"hue-doc-title\">Excessive mem usage for certain queries which are very selective</div><div><p>\n          Some queries that returned very few rows experienced unnecessary memory usage.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-288\" target=\"_blank\">IMPALA-288</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-289\"><div class=\"hue-doc-title\">HdfsScanNode crashes in UpdateCounters</div><div><p>\n          A serious error could occur for relatively small and inexpensive queries.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-289\" target=\"_blank\">IMPALA-289</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-292\"><div class=\"hue-doc-title\">Parquet performance issues on large dataset</div><div><p>\n          Certain aggregation queries against Parquet tables were inefficient due to lower than required thread\n          utilization.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-292\" target=\"_blank\">IMPALA-292</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-295\"><div class=\"hue-doc-title\">impala not populating hive metadata correctly for create table</div><div><p>\n          The Impala <span class=\"hue-doc-codeph\">CREATE TABLE</span> command did not fill in the <span class=\"hue-doc-codeph\">owner</span> and\n          <span class=\"hue-doc-codeph\">tbl_type</span> columns in the Hive metastore database.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-295\" target=\"_blank\">IMPALA-295</a></p><p><b>Resolution:</b> Fixed. The metadata was made more Hive-compatible.\n        </p></div></div><div id=\"IMPALA-312\"><div class=\"hue-doc-title\">impala daemons die if statestore goes down</div><div><p>\n          The <span class=\"hue-doc-codeph\">impalad</span> instances in a cluster could halt when the <span class=\"hue-doc-codeph\">statestored</span>\n          process became unavailable.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-312\" target=\"_blank\">IMPALA-312</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-67\"><div class=\"hue-doc-title\">Constant SELECT clauses do not work in subqueries</div><div><p>\n          A subquery would fail if the <span class=\"hue-doc-codeph\">SELECT</span> statement inside it returned a constant value rather\n          than querying a table.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-67\" target=\"_blank\">IMPALA-67</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-90\"><div class=\"hue-doc-title\">Right outer Join includes NULLs as well and hence wrong result count</div><div><p>\n          The result set from a right outer join query could include erroneous rows containing\n          <span class=\"hue-doc-codeph\">NULL</span> values.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-90\" target=\"_blank\">IMPALA-90</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div><div id=\"IMPALA-204\"><div class=\"hue-doc-title\">Parquet scanner hangs for some queries</div><div><p>\n          The Parquet scanner non-deterministically hangs when executing some queries.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-204\" target=\"_blank\">IMPALA-204</a></p><p><b>Resolution:</b> Fixed\n        </p></div></div></div><div id=\"fixed_issues_07\"><div class=\"hue-doc-title\">Issues Fixed in Version 0.7 of the Beta Release</div><div/><div id=\"IMPALA-167\"><div class=\"hue-doc-title\">Impala does not gracefully handle unsupported Hive table types (INDEX and VIEW tables)</div><div><p>\n          When attempting to load metadata from an unsupported Hive table type (INDEX and VIEW tables), Impala\n          fails with an unclear error message.\n        </p><p>\n          Bug:\n          <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-167\" target=\"_blank\">IMPALA-167</a></p><p><b>Resolution:</b> Fixed in 0.7\n        </p></div></div><div id=\"IMP-474\"><div class=\"hue-doc-title\">DDL statements (CREATE/ALTER/DROP TABLE) are not supported in the Impala Beta Release</div><div><p><b>Resolution:</b> Fixed in 0.7\n        </p></div></div><div id=\"avro_support\"><div class=\"hue-doc-title\">Avro is not supported in the Impala Beta Release</div><div><p><b>Resolution:</b> Fixed in 0.7\n        </p><p><b>Workaround:</b> None\n        </p></div></div><div id=\"mem_limit_query\"><div class=\"hue-doc-title\">Impala does not currently allow limiting the memory consumption of a single query</div><div><p>\n          It is currently not possible to limit the memory consumption of a single query. All tables on the right\n          hand side of JOIN statements need to be able to fit in memory. If they do not, Impala may crash due to\n          out of memory errors.\n        </p><p><b>Resolution:</b> Fixed in 0.7\n        </p></div></div><div id=\"IMPALA-20\"><div class=\"hue-doc-title\">Aggregate of a subquery result set returns wrong results if the subquery contains a 'limit' and data is distributed across multiple nodes</div><div><p>\n          Aggregate of a subquery result set returns wrong results if the subquery contains a 'limit' clause and\n          data is distributed across multiple nodes. From the query plan, it looks like we are just summing the\n          results from each worker node.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-20\" target=\"_blank\">IMPALA-20</a></p><p><b>Resolution:</b> Fixed in 0.7\n        </p></div></div><div id=\"IMPALA-144\"><div class=\"hue-doc-title\">Partition pruning for arbitrary predicates that are fully bound by a particular partition column</div><div><p> We currently cannot utilize a predicate like \"country_code in ('DE',\n          'FR', 'US')\" to do partitioning pruning, because that requires an\n          equality predicate or a binary comparison. </p><p>\n          We should create a superclass of planner.ValueRange, ValueSet, that can be constructed with an arbitrary\n          predicate, and whose isInRange(analyzer, valueExpr) constructs a literal predicate by substitution of the\n          valueExpr into the predicate.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-144\" target=\"_blank\">IMPALA-144</a></p><p><b>Resolution:</b> Fixed in 0.7\n        </p></div></div></div><div id=\"fixed_issues_06\"><div class=\"hue-doc-title\">Issues Fixed in Version 0.6 of the Beta Release</div><div/><div id=\"IMP-56\"><div class=\"hue-doc-title\">Impala reads the NameNode address and port as command line parameters</div><div><p>\n          Impala reads the NameNode address and port as command line parameters rather than reading them from\n          <span class=\"hue-doc-codeph\">core-site.xml</span>. Updating the NameNode address in the <span class=\"hue-doc-codeph\">core-site.xml</span> file\n          does not propagate to Impala.\n        </p><p><b>Severity:</b> Low\n        </p><p><b>Resolution:</b> Fixed in 0.6 - Impala reads the namenode location and port from the Hadoop\n          configuration files, though setting <span class=\"hue-doc-codeph\">-nn</span> and <span class=\"hue-doc-codeph\">-nn_port</span> overrides this.\n          Users are advised not to set <span class=\"hue-doc-codeph\">-nn</span> or <span class=\"hue-doc-codeph\">-nn_port</span>.\n        </p></div></div><div id=\"IMPALA-64\"><div class=\"hue-doc-title\">Queries may fail on secure environment due to impalad Kerberos ticket expiration</div><div><p>\n          Queries may fail on secure environment due to <span class=\"hue-doc-codeph\">impalad</span> Kerberos tickets expiring. This\n          can happen if the Impala <span class=\"hue-doc-codeph\">-kerberos_reinit_interval</span> flag is set to a value ten minutes or\n          less. This may lead to an <span class=\"hue-doc-codeph\">impalad</span> requesting a ticket with a lifetime that is less than\n          the time to the next ticket renewal.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-64\" target=\"_blank\">IMPALA-64</a></p><p><b>Resolution</b>: Fixed in 0.6\n        </p></div></div><div id=\"IMPALA-48\"><div class=\"hue-doc-title\">Concurrent queries may fail when Impala uses Thrift to communicate with the Hive Metastore</div><div><p>\n          Concurrent queries may fail when Impala is using Thrift to communicate with part of the Hive Metastore\n          such as the Hive Metastore Service. In such a case, the error <span class=\"hue-doc-codeph\">get_fields failed: out of sequence\n          response\"</span> may occur because Impala shared a single Hive Metastore Client connection across\n          threads. With Impala 0.6, a separate connection is used for each metadata request.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-48\" target=\"_blank\">IMPALA-48</a></p><p><b>Resolution</b>: Fixed in 0.6\n        </p></div></div><div id=\"IMPALA-58\"><div class=\"hue-doc-title\">impalad fails to start if unable to connect to the Hive Metastore</div><div><p>\n          Impala fails to start if it is unable to establish a connection with the Hive Metastore. This behavior\n          was fixed, allowing Impala to start, even when no Metastore is available.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-58\" target=\"_blank\">IMPALA-58</a></p><p><b>Resolution</b>: Fixed in 0.6\n        </p></div></div><div id=\"IMPALA-44\"><div class=\"hue-doc-title\">Impala treats database names as case-sensitive in some contexts</div><div><p>\n          In some queries (including \"USE database\" statements), database names are treated as case-sensitive. This\n          may lead queries to fail with an IllegalStateException.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-44\" target=\"_blank\">IMPALA-44</a></p><p><b>Resolution</b>: Fixed in 0.6\n        </p></div></div><div id=\"IMPALA-18\"><div class=\"hue-doc-title\">Impala does not ignore hidden HDFS files</div><div><p>\n          Impala does not ignore hidden HDFS files, meaning those files prefixed with a period '.' or underscore\n          '_'. This diverges from Hive/MapReduce, which skips these files.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-18\" target=\"_blank\">IMPALA-18</a></p><p id=\"p_7\"><b>Resolution</b>: Fixed in 0.6\n        </p></div></div></div><div id=\"fixed_issues_05\"><div class=\"hue-doc-title\">Issues Fixed in Version 0.5 of the Beta Release</div><div/><div id=\"many_partitions\"><div class=\"hue-doc-title\">Impala may have reduced performance on tables that contain a large number of partitions</div><div><p>\n          Impala may have reduced performance on tables that contain a large number of partitions. This is due to\n          extra overhead reading/parsing the partition metadata.\n        </p><p><b>Resolution</b>: Fixed in 0.5\n        </p></div></div><div id=\"IMPALA-38\"><div class=\"hue-doc-title\">Backend client connections not getting cached causes an observable latency in secure clusters</div><div><p>\n          Backend impalads do not cache connections to the coordinator. On a secure cluster, this introduces a\n          latency proportional to the number of backend clients involved in query execution, as the cost of\n          establishing a secure connection is much higher than in the non-secure case.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-38\" target=\"_blank\">IMPALA-38</a></p><p><b>Resolution</b>: Fixed in 0.5\n        </p></div></div><div id=\"IMPALA-30\"><div class=\"hue-doc-title\">Concurrent queries may fail with error: \"Table object has not been been initialised : `PARTITIONS`\"</div><div><p>\n          Concurrent queries may fail with error: <span class=\"hue-doc-codeph\">\"Table object has not been been initialised :\n          `PARTITIONS`\"</span>. This was due to a lack of locking in the Impala table/database metadata cache.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-30\" target=\"_blank\">IMPALA-30</a></p><p><b>Resolution</b>: Fixed in 0.5\n        </p></div></div><div id=\"IMPALA-15\"><div class=\"hue-doc-title\">UNIX_TIMESTAMP format behaviour deviates from Hive when format matches a prefix of the time value</div><div><p>\n          The Impala UNIX_TIMESTAMP(val, format) operation compares the length of format and val and returns NULL\n          if they do not match. Hive instead effectively truncates val to the length of the format parameter.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-15\" target=\"_blank\">IMPALA-15</a></p><p id=\"p_10\"><b>Resolution:</b> Fixed in 0.5\n        </p></div></div></div><div id=\"fixed_issues_04\"><div class=\"hue-doc-title\">Issues Fixed in Version 0.4 of the Beta Release</div><div/><div id=\"HIVE-3596\"><div class=\"hue-doc-title\">Impala fails to refresh the Hive metastore if a Hive temporary configuration file is removed</div><div><p>\n          Impala is impacted by Hive bug\n          <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/HIVE-3596\" target=\"_blank\">HIVE-3596</a>\n          which may cause metastore refreshes to fail if a Hive temporary configuration file is deleted (normally\n          located at <span class=\"hue-doc-codeph\">/tmp/hive-&lt;user&gt;-&lt;tmp_number&gt;.xml</span>). Additionally, the\n          impala-shell will incorrectly report that the failed metadata refresh completed successfully.\n        </p><p><b>Anticipated Resolution:</b> To be fixed in a future release\n        </p><p><b>Workaround:</b> Restart the <span class=\"hue-doc-codeph\">impalad</span> service. Use the <span class=\"hue-doc-codeph\">impalad</span> log to\n          check for metadata refresh errors.\n        </p></div></div><div id=\"lpad_rpad\"><div class=\"hue-doc-title\">lpad/rpad builtin functions is not correct.</div><div><p>\n          The lpad/rpad builtin functions generate the wrong results.\n        </p><p><b>Resolution:</b> Fixed in 0.4\n        </p></div></div><div id=\"IMPALA-14\"><div class=\"hue-doc-title\">Files with .gz extension reported as 'not supported'</div><div><p>\n          Compressed files with extensions incorrectly generate an exception.\n        </p><p><b>Bug:</b><a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/IMPALA-14\" target=\"_blank\">IMPALA-14</a></p><p><b>Resolution:</b> Fixed in 0.4\n        </p></div></div><div id=\"large_limit_hang\"><div class=\"hue-doc-title\">Queries with large limits would hang.</div><div><p>\n          Some queries with large limits were hanging.\n        </p><p><b>Resolution:</b> Fixed in 0.4\n        </p></div></div><div id=\"IMP-601\"><div class=\"hue-doc-title\">Order by on a string column produces incorrect results if there are empty strings</div><div><p><b>Resolution:</b> Fixed in 0.4\n        </p></div></div></div><div id=\"fixed_issues_03\"><div class=\"hue-doc-title\">Issues Fixed in Version 0.3 of the Beta Release</div><div/><div id=\"IMP-298\"><div class=\"hue-doc-title\">All table loading errors show as unknown table</div><div><p>\n          If Impala is unable to load the metadata for a table for any reason, a subsequent query referring to that\n          table will return an <span class=\"hue-doc-codeph\">unknown table</span> error message, even if the table is known.\n        </p><p><b>Resolution:</b> Fixed in 0.3\n        </p></div></div><div id=\"IMP-298-2\"><div class=\"hue-doc-title\">A table that cannot be loaded will disappear from SHOW TABLES</div><div><p>\n          After failing to load metadata for a table, Impala removes that table from the list of known tables\n          returned in <span class=\"hue-doc-codeph\">SHOW TABLES</span>. Subsequent attempts to query the table returns 'unknown table',\n          even if the metadata for that table is fixed.\n        </p><p><b>Resolution:</b> Fixed in 0.3\n        </p></div></div><div id=\"IMP-581\"><div class=\"hue-doc-title\">Impala cannot read from HBase tables that are not created as external tables in the hive metastore.</div><div><p>\n          Attempting to select from these tables fails.\n        </p><p><b>Resolution:</b> Fixed in 0.3\n        </p></div></div><div id=\"IMP-137\"><div class=\"hue-doc-title\">Certain queries that contain OUTER JOINs may return incorrect results</div><div><p>\n          Queries that contain OUTER JOINs may not return the correct results if there are predicates referencing\n          any of the joined tables in the WHERE clause.\n        </p><p><b>Resolution:</b> Fixed in 0.3.\n        </p></div></div></div><div id=\"fixed_issues_02\"><div class=\"hue-doc-title\">Issues Fixed in Version 0.2 of the Beta Release</div><div/><div id=\"IMP-491\"><div class=\"hue-doc-title\">Subqueries which contain aggregates cannot be joined with other tables or Impala may crash</div><div><p>\n          Subqueries that contain an aggregate cannot be joined with another table or Impala may crash. For\n          example:\n        </p><div class=\"hue-doc-codeblock\">SELECT * FROM (SELECT sum(col1) FROM some_table GROUP BY col1) t1 JOIN other_table ON (...);</div><p><b>Resolution:</b> Fixed in 0.2\n        </p></div></div><div id=\"IMP-497\"><div class=\"hue-doc-title\">An insert with a limit that runs as more than one query fragment inserts more rows than the limit.</div><div><p>\n          For example:\n        </p><div class=\"hue-doc-codeblock\">INSERT OVERWRITE TABLE test SELECT * FROM test2 LIMIT 1;</div><p><b>Resolution:</b> Fixed in 0.2\n        </p></div></div><div id=\"IMP-535\"><div class=\"hue-doc-title\">Query with limit clause might fail.</div><div><p>\n          For example:\n        </p><div class=\"hue-doc-codeblock\">SELECT * FROM test2 LIMIT 1;</div><p><b>Resolution:</b> Fixed in 0.2\n        </p></div></div><div id=\"IMP-270\"><div class=\"hue-doc-title\">Files in unsupported compression formats are read as plain text.</div><div><p>\n          Attempting to read such files does not generate a diagnostic.\n        </p><p><b>Resolution:</b> Fixed in 0.2\n        </p></div></div><div id=\"IMP-522\"><div class=\"hue-doc-title\">Impala server raises a null pointer exception when running an HBase query.</div><div><p>\n          When querying an HBase table whose row-key is string type, the Impala server may raise a null pointer\n          exception.\n        </p><p><b>Resolution:</b> Fixed in 0.2\n        </p></div></div></div></div></div>","title":"Fixed Issues in Apache ImpalaFixed Issues in Apache Impala"}