{"body":"<div><div id=\"truncate_table\"><div class=\"hue-doc-title\">TRUNCATE TABLE Statement (Impala 2.3 or higher only)</div><div><p> Removes\n      the data from an Impala table while leaving the table itself. </p><p id=\"syntax_blurb\"><b>Syntax:</b></p><div class=\"hue-doc-codeblock\">TRUNCATE [TABLE] <span class=\"hue-doc-ph\">[IF EXISTS]</span> [<span class=\"hue-doc-varname\">db_name</span>.]<span class=\"hue-doc-varname\">table_name</span></div><p id=\"ddl_blurb\"><b>Statement type:</b> DDL\n      </p><p id=\"usage_notes_blurb\"><b>Usage notes:</b></p><p> Often used to empty tables that are used during ETL cycles, after the\n      data has been copied to another table for the next stage of processing.\n      This statement is a low-overhead alternative to dropping and recreating\n      the table, or using <span class=\"hue-doc-codeph\">INSERT OVERWRITE</span> to replace the data\n      during the next ETL cycle. </p><p> This statement removes all the data and associated data files in the\n      table. It can remove data files from internal tables, external tables,\n      partitioned tables, and tables mapped to HBase or the Amazon Simple\n      Storage Service (S3). The data removal applies to the entire table,\n      including all partitions of a partitioned table. </p><p> Any statistics produced by the <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement\n      are reset when the data is removed. </p><p> Make sure that you are in the correct database before truncating a\n      table, either by issuing a <span class=\"hue-doc-codeph\">USE</span> statement first or by\n      using a fully qualified name\n          <span class=\"hue-doc-codeph\"><span class=\"hue-doc-varname\">db_name</span>.<span class=\"hue-doc-varname\">table_name</span></span>. </p><p>The optional <span class=\"hue-doc-codeph\">TABLE</span> keyword does not affect the behavior\n      of the statement.</p><p> The optional <span class=\"hue-doc-codeph\">IF EXISTS</span> clause\n      makes the statement succeed whether or not the table exists. If the table\n      does exist, it is truncated; if it does not exist, the statement has no\n      effect. This capability is useful in standardized setup scripts that are\n      might be run both before and after some of the tables exist. This clause\n      is available in Impala 2.5 and higher. </p><p id=\"disk_space_blurb\">\n        For other tips about managing and reclaiming Impala disk space, see\n        <a class=\"hue-doc-external-link\" href=\"https://www.cloudera.com/documentation/enterprise/latest/topics/impala_disk_space.html#disk_space\" target=\"_blank\">Managing Disk Space for Impala Data</a>.\n      </p><p id=\"s3_blurb\"><b>Amazon S3 considerations:</b></p><p> Although Impala cannot write new data to a table stored in\n      the Amazon S3 filesystem, the <span class=\"hue-doc-codeph\">TRUNCATE TABLE</span> statement\n      can remove data files from S3. See <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_s3.xml\" data-doc-anchor-id=\"s3\">Using Impala with Amazon S3 Object Store</a> for\n      details about working with S3 tables. </p><p id=\"cancel_blurb_no\"><b>Cancellation:</b> Cannot be cancelled.\n      </p><p id=\"permissions_blurb\"><b>HDFS permissions:</b></p><p> The user ID that the <span class=\"hue-doc-cmdname\">impalad</span> daemon runs\n      under, typically the <span class=\"hue-doc-codeph\">impala</span> user, must have write\n      permission for all the files and directories that make up the table. </p><p id=\"kudu_blurb\"><b>Kudu considerations:</b></p><p id=\"kudu_no_truncate_table\">\n        Currently, the <span class=\"hue-doc-codeph\">TRUNCATE TABLE</span> statement cannot be used with Kudu\n        tables.\n      </p><p id=\"example_blurb\"><b>Examples:</b></p><p> The following example shows a table containing some data and with table\n      and column statistics. After the <span class=\"hue-doc-codeph\">TRUNCATE TABLE</span>\n      statement, the data is removed and the statistics are reset. </p><div class=\"hue-doc-codeblock\">CREATE TABLE truncate_demo (x INT);\nINSERT INTO truncate_demo VALUES (1), (2), (4), (8);\nSELECT COUNT(*) FROM truncate_demo;\n+----------+\n| count(*) |\n+----------+\n| 4        |\n+----------+\nCOMPUTE STATS truncate_demo;\n+-----------------------------------------+\n| summary                                 |\n+-----------------------------------------+\n| Updated 1 partition(s) and 1 column(s). |\n+-----------------------------------------+\nSHOW TABLE STATS truncate_demo;\n+-------+--------+------+--------------+-------------------+--------+-------------------+\n| #Rows | #Files | Size | Bytes Cached | Cache Replication | Format | Incremental stats |\n+-------+--------+------+--------------+-------------------+--------+-------------------+\n| 4     | 1      | 8B   | NOT CACHED   | NOT CACHED        | TEXT   | false             |\n+-------+--------+------+--------------+-------------------+--------+-------------------+\nSHOW COLUMN STATS truncate_demo;\n+--------+------+------------------+--------+----------+----------+\n| Column | Type | #Distinct Values | #Nulls | Max Size | Avg Size |\n+--------+------+------------------+--------+----------+----------+\n| x      | INT  | 4                | -1     | 4        | 4        |\n+--------+------+------------------+--------+----------+----------+\n\n-- After this statement, the data and the table/column stats will be gone.\nTRUNCATE TABLE truncate_demo;\n\nSELECT COUNT(*) FROM truncate_demo;\n+----------+\n| count(*) |\n+----------+\n| 0        |\n+----------+\nSHOW TABLE STATS truncate_demo;\n+-------+--------+------+--------------+-------------------+--------+-------------------+\n| #Rows | #Files | Size | Bytes Cached | Cache Replication | Format | Incremental stats |\n+-------+--------+------+--------------+-------------------+--------+-------------------+\n| -1    | 0      | 0B   | NOT CACHED   | NOT CACHED        | TEXT   | false             |\n+-------+--------+------+--------------+-------------------+--------+-------------------+\nSHOW COLUMN STATS truncate_demo;\n+--------+------+------------------+--------+----------+----------+\n| Column | Type | #Distinct Values | #Nulls | Max Size | Avg Size |\n+--------+------+------------------+--------+----------+----------+\n| x      | INT  | -1               | -1     | 4        | 4        |\n+--------+------+------------------+--------+----------+----------+\n</div><p> The following example shows how the <span class=\"hue-doc-codeph\">IF EXISTS</span> clause\n      allows the <span class=\"hue-doc-codeph\">TRUNCATE TABLE</span> statement to be run without\n      error whether or not the table exists: </p><div class=\"hue-doc-codeblock\">CREATE TABLE staging_table1 (x INT, s STRING);\nFetched 0 row(s) in 0.33s\n\nSHOW TABLES LIKE 'staging*';\n+----------------+\n| name           |\n+----------------+\n| staging_table1 |\n+----------------+\nFetched 1 row(s) in 0.25s\n\n-- Our ETL process involves removing all data from several staging tables\n-- even though some might be already dropped, or not created yet.\n\nTRUNCATE TABLE IF EXISTS staging_table1;\nFetched 0 row(s) in 5.04s\n\nTRUNCATE TABLE IF EXISTS staging_table2;\nFetched 0 row(s) in 0.25s\n\nTRUNCATE TABLE IF EXISTS staging_table3;\nFetched 0 row(s) in 0.25s\n</div><p id=\"related_info\"><b>Related information:</b></p><p><a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_tables.xml\" data-doc-anchor-id=\"tables\">Overview of Impala Tables</a>, <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_alter_table.xml\" data-doc-anchor-id=\"alter_table\">ALTER TABLE Statement</a>, <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_create_table.xml\" data-doc-anchor-id=\"create_table\">CREATE TABLE Statement</a>, <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_partitioning.xml\" data-doc-anchor-id=\"partitioning\">Partitioning for Impala Tables</a>, <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_tables.xml\" data-doc-anchor-id=\"internal_tables\">Internal Tables</a>, <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_tables.xml\" data-doc-anchor-id=\"external_tables\">External Tables</a></p></div></div></div>","title":"TRUNCATE TABLE Statement (Impala 2.3 or higher only)"}