{"body":"<div><div id=\"performance_testing\"><div class=\"hue-doc-title\">Testing Impala Performance</div><div><p>\n      Test to ensure that Impala is configured for optimal performance. If you have installed Impala with cluster\n      management software, complete the processes described in this topic to help ensure a proper\n      configuration. These procedures can be used to verify that Impala is set up correctly.\n    </p><div class=\"hue-doc-section\" id=\"checking_config_performance\"><div class=\"hue-doc-title\">Checking Impala Configuration Values</div><p>\n        You can inspect Impala configuration values by connecting to your Impala server using a browser.\n      </p><p><b>To check Impala configuration values:</b></p><ol><li>\n          Use a browser to connect to one of the hosts running <span class=\"hue-doc-codeph\">impalad</span> in your environment.\n          Connect using an address of the form\n          <span class=\"hue-doc-codeph\">http://<span class=\"hue-doc-varname\">hostname</span>:<span class=\"hue-doc-varname\">port</span>/varz</span>.\n          <div class=\"hue-doc-note\">            In the preceding example, replace <span class=\"hue-doc-codeph\">hostname</span> and <span class=\"hue-doc-codeph\">port</span> with the name and\n            port of your Impala server. The default port is 25000.\n          </div></li><li>\n          Review the configured values.\n          <p>\n            For example, to check that your system is configured to use block locality tracking information, you\n            would check that the value for <span class=\"hue-doc-codeph\">dfs.datanode.hdfs-blocks-metadata.enabled</span> is\n            <span class=\"hue-doc-codeph\">true</span>.\n          </p></li></ol><p id=\"p_31\"><b>To check data locality:</b></p><ol><li>\n          Execute a query on a dataset that is available across multiple nodes. For example, for a table named\n          <span class=\"hue-doc-codeph\">MyTable</span> that has a reasonable chance of being spread across multiple DataNodes:\n<div class=\"hue-doc-codeblock\">[impalad-host:21000] &gt; SELECT COUNT (*) FROM MyTable</div></li><li>\n          After the query completes, review the contents of the Impala logs. You should find a recent message\n          similar to the following:\n<div class=\"hue-doc-codeblock\">Total remote scan volume = 0</div></li></ol><p>\n        The presence of remote scans may indicate <span class=\"hue-doc-codeph\">impalad</span> is not running on the correct nodes.\n        This can be because some DataNodes do not have <span class=\"hue-doc-codeph\">impalad</span> running or it can be because the\n        <span class=\"hue-doc-codeph\">impalad</span> instance that is starting the query is unable to contact one or more of the\n        <span class=\"hue-doc-codeph\">impalad</span> instances.\n      </p><p><b>To understand the causes of this issue:</b></p><ol><li>\n          Connect to the debugging web server. By default, this server runs on port 25000. This page lists all\n          <span class=\"hue-doc-codeph\">impalad</span> instances running in your cluster. If there are fewer instances than you expect,\n          this often indicates some DataNodes are not running <span class=\"hue-doc-codeph\">impalad</span>. Ensure\n          <span class=\"hue-doc-codeph\">impalad</span> is started on all DataNodes.\n        </li><li>\n          If you are using multi-homed hosts, ensure that the Impala daemon's hostname resolves to the interface on\n          which <span class=\"hue-doc-codeph\">impalad</span> is running. The hostname Impala is using is displayed when\n          <span class=\"hue-doc-codeph\">impalad</span> starts. To explicitly set the hostname, use the <span class=\"hue-doc-codeph\">--hostname</span>Â flag.\n        </li><li>\n          Check that <span class=\"hue-doc-codeph\">statestored</span> is running as expected. Review the contents of the state store\n          log to ensure all instances of <span class=\"hue-doc-codeph\">impalad</span> are listed as having connected to the state\n          store.\n        </li></ol></div><div class=\"hue-doc-section\" id=\"checking_config_logs\"><div class=\"hue-doc-title\">Reviewing Impala Logs</div><p>\n        You can review the contents of the Impala logs for signs that short-circuit reads or block location\n        tracking are not functioning. Before checking logs, execute a simple query against a small HDFS dataset.\n        Completing a query task generates log messages using current settings. Information on starting Impala and\n        executing queries can be found in <a class=\"hue-doc-external-link\" href=\"https://www.cloudera.com/documentation/enterprise/latest/topics/impala_processes.html#processes\" target=\"_blank\">Starting Impala</a> and\n        <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_impala_shell.xml\" data-doc-anchor-id=\"impala_shell\">Using the Impala Shell (impala-shell Command)</a>. Information on logging can be found in\n        <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_logging.xml\" data-doc-anchor-id=\"logging\">Using Impala Logging</a>. Log messages and their interpretations are as follows:\n      </p><table><thead><tr><td>\n                Log Message\n              </td><td>\n                Interpretation\n              </td></tr></thead><tbody><tr><td><p><span class=\"hue-doc-pre\">Unknown disk id. This will negatively affect performance. Check your hdfs settings to enable block location metadata\n</span></p></td><td><p>\n                  Tracking block locality is not enabled.\n                </p></td></tr><tr><td><p><span class=\"hue-doc-pre\">Unable to load native-hadoop library for your platform... using builtin-java classes where applicable</span></p></td><td><p>\n                  Native checksumming is not enabled.\n                </p></td></tr></tbody></table></div></div></div></div>","title":"Testing Impala Performance"}