{"body":"<div><div id=\"custom_timezone\"><div class=\"hue-doc-title\">Customizing Time Zones</div><div><p>\n      Starting in Impala 3.1, you can customize the time\n      zone definitions used in Impala.\n      <ul><li><p>\n            By default, Impala uses the OS’s time zone database located in\n            <span class=\"hue-doc-codeph\">/usr/share/zoneinfo</span>. This directory contains the IANA timezone\n            database in a compiled binary format. The contents of the <span class=\"hue-doc-codeph\">zoneinfo</span>\n            directory is controlled by the OS’s package manager.\n          </p></li><li><p>\n            Use the following start-up flags to customize the time zone definitions.\n          </p><ul><li><span class=\"hue-doc-codeph\">--hdfs_zone_info_zip</span>: This flag allows Impala administrators to\n              specify a custom timezone database. The flag should be set to a shared (not\n              necessarily HDFS) path that points to a zip archive of a custom IANA timezone\n              database. The timezone database is expected to be in a compiled binary format. If\n              the startup flag is set, Impala will use the specified timezone database instead\n              of the default <span class=\"hue-doc-codeph\">/usr/share/zoneinfo </span>database. The timezone db\n              upgrade process is described in detail below.\n            </li><li><p><span class=\"hue-doc-codeph\">--hdfs_zone_alias_conf</span>: This flag allows Impala administrators\n                to specify definitions for custom timezone aliases. The flag should be set to a\n                shared (not necessarily HDFS) path that specifies a config file containing\n                custom timezone alias definitions. This config file can be used as a workaround\n                for users who want to keep using their legacy timezone names. Configuring custom\n                aliases is described in detail below.\n              </p></li></ul></li></ul></p><p><b>Upgrading custom IANA time zone database:</b><ol><li>\n          Download latest IANA time zone database distribution:\n<div class=\"hue-doc-codeblock\">git clone https://github.com/eggert/tz</div><p>\n            Alternatively, download a specific tzdb version from:\n<div class=\"hue-doc-codeblock\"> https://www.iana.org/time-zones/repository</div></p></li><li>\n          Build timezone tools:\n<div class=\"hue-doc-codeblock\">cd tz\nmake TOPDIR=tzdata install</div></li><li>\n          Generate the compiled binary time zone database:\n<div class=\"hue-doc-codeblock\">./zic -d ./tzdata/etc/zoneinfo africa antarctica asia australasia backward backzone etcetera europe factory northamerica pacificnew southamerica systemv</div></li><li>\n          Create zip archive:\n<div class=\"hue-doc-codeblock\">pushd ./tzdata/etc\nzip -r zoneinfo.zip zoneinfo\npopd</div></li><li>\n          Copy the time zone database to HDFS:\n<div class=\"hue-doc-codeblock\">hdfs dfs -mkdir -p /tzdb/latest\nhdfs dfs -copyFromLocal ./tzdata/etc/zoneinfo.zip /tzdb/latest</div></li><li>\n          Set the <span class=\"hue-doc-codeph\">--hdfs_zone_info_zip</span> startup flag to\n          <span class=\"hue-doc-codeph\">/tzdb/latest/zoneinfo.zip</span> as an <span class=\"hue-doc-codeph\">impalad </span>safety\n          valve.\n        </li><li>\n          Perform a full restart of Impala service.\n        </li></ol></p><p><b>Configuring custom time zone aliases:</b></p><p><ol><li>\n          Create a <span class=\"hue-doc-codeph\">tzalias.conf</span> config file that contains time zone alias\n          definitions formatted as <span class=\"hue-doc-codeph\"><i>ALIAS</i></span><span class=\"hue-doc-codeph\"> =\n          </span><span class=\"hue-doc-codeph\"><i>DEFINITION</i></span>. For example:\n<div class=\"hue-doc-codeblock\">#\n# Define aliases for existing timezone names:\n#\nUniversal Coordinated Time = UTC\nMideast/Riyadh89 = Asia/Riyadh\nPDT = America/Los_Angeles\n#\n# Define aliases as UTC offsets in seconds:\n#\nGMT-01:00 = 3600\nGMT+01:00 = -3600</div></li><li>\n          Copy the config file to HDFS:\n<div class=\"hue-doc-codeblock\">hdfs dfs -mkdir -p /tzdb\nhdfs dfs -copyFromLocal tzalias.conf /tzdb</div></li><li>\n          Set the <span class=\"hue-doc-codeph\">--hdfs_zone_alias_conf</span> startup flag to\n          <span class=\"hue-doc-codeph\">/tzdb/tzalias.conf</span> as an <span class=\"hue-doc-codeph\">impalad </span>safety valve.\n        </li><li>\n          Perform a full restart of Impala service.\n        </li></ol></p><p><b>Added in:</b>Impala 3.1</p></div></div></div>","title":"Customizing Time Zones"}