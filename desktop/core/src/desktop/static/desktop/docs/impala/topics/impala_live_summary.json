{"body":"<div><div><div class=\"hue-doc-title\">LIVE_SUMMARY Query Option (Impala 2.3 or higher only)</div><div><p>\n      For queries submitted through the <span class=\"hue-doc-cmdname\">impala-shell</span> command,\n      displays the same output as the <span class=\"hue-doc-codeph\">SUMMARY</span> command,\n      with the measurements updated in real time as the query progresses.\n      When the query finishes, the final <span class=\"hue-doc-codeph\">SUMMARY</span> output remains\n      visible in the <span class=\"hue-doc-cmdname\">impala-shell</span> console output.\n    </p><p/><p><b>Type:</b> Boolean; recognized values are 1 and 0, or <span class=\"hue-doc-codeph\">true</span> and <span class=\"hue-doc-codeph\">false</span>;\n        any other value interpreted as <span class=\"hue-doc-codeph\">false</span></p><p><b>Default:</b><span class=\"hue-doc-codeph\">false</span> (shown as 0 in output of <span class=\"hue-doc-codeph\">SET</span> statement)\n      </p><p><b>Command-line equivalent:</b></p><p>\n      You can enable this query option within <span class=\"hue-doc-cmdname\">impala-shell</span>\n      by starting the shell with the <span class=\"hue-doc-codeph\">--live_summary</span>\n      command-line option.\n      You can still turn this setting off and on again within the shell through the\n      <span class=\"hue-doc-codeph\">SET</span> command.\n    </p><p><b>Usage notes:</b></p><p>\n      The live summary output can be useful for evaluating long-running queries,\n      to evaluate which phase of execution takes up the most time, or if some hosts\n      take much longer than others for certain operations, dragging overall performance down.\n      By making the information available in real time, this feature lets you decide what\n      action to take even before you cancel a query that is taking much longer than normal.\n    </p><p>\n      For example, you might see the HDFS scan phase taking a long time, and therefore revisit\n      performance-related aspects of your schema design such as constructing a partitioned table,\n      switching to the Parquet file format, running the <span class=\"hue-doc-codeph\">COMPUTE STATS</span> statement\n      for the table, and so on.\n      Or you might see a wide variation between the average and maximum times for all hosts to\n      perform some phase of the query, and therefore investigate if one particular host\n      needed more memory or was experiencing a network problem.\n    </p><p>\n        The output from this query option is printed to standard error. The output is only displayed in interactive mode,\n        that is, not when the <span class=\"hue-doc-codeph\">-q</span> or <span class=\"hue-doc-codeph\">-f</span> options are used.\n      </p><p>\n      For a simple and concise way of tracking the progress of an interactive query, see\n      <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"topics/impala_live_progress.xml\" data-doc-anchor-id=\"live_progress\">LIVE_PROGRESS Query Option (Impala 2.3 or higher only)</a>.\n    </p><p><b>Restrictions:</b></p><p>\n        The <span class=\"hue-doc-codeph\">LIVE_PROGRESS</span> and <span class=\"hue-doc-codeph\">LIVE_SUMMARY</span> query options\n        currently do not produce any output during <span class=\"hue-doc-codeph\">COMPUTE STATS</span> operations.\n      </p><p>\n        Because the <span class=\"hue-doc-codeph\">LIVE_PROGRESS</span> and <span class=\"hue-doc-codeph\">LIVE_SUMMARY</span> query options\n        are available only within the <span class=\"hue-doc-cmdname\">impala-shell</span> interpreter:\n        <ul><li><p>\n              You cannot change these query options through the SQL <span class=\"hue-doc-codeph\">SET</span>\n              statement using the JDBC or ODBC interfaces. The <span class=\"hue-doc-codeph\">SET</span>\n              command in <span class=\"hue-doc-cmdname\">impala-shell</span> recognizes these names as\n              shell-only options.\n            </p></li><li><p>\n              Be careful when using <span class=\"hue-doc-cmdname\">impala-shell</span> on a pre-Impala 2.3\n              system to connect to a system running Impala 2.3 or higher.\n              The older <span class=\"hue-doc-cmdname\">impala-shell</span> does not recognize these\n              query option names. Upgrade <span class=\"hue-doc-cmdname\">impala-shell</span> on the\n              systems where you intend to use these query options.\n            </p></li><li><p>\n              Likewise, the <span class=\"hue-doc-cmdname\">impala-shell</span> command relies on\n              some information only available in Impala 2.3 and higher\n              to prepare live progress reports and query summaries. The\n              <span class=\"hue-doc-codeph\">LIVE_PROGRESS</span> and <span class=\"hue-doc-codeph\">LIVE_SUMMARY</span>\n              query options have no effect when <span class=\"hue-doc-cmdname\">impala-shell</span> connects\n              to a cluster running an older version of Impala.\n            </p></li></ul></p><p><b>Added in:</b>Impala 2.3.0</p><p><b>Examples:</b></p><p>\n      The following example shows a series of <span class=\"hue-doc-codeph\">LIVE_SUMMARY</span> reports that\n      are displayed during the course of a query, showing how the numbers increase to\n      show the progress of different phases of the distributed query. When you do the same\n      in <span class=\"hue-doc-cmdname\">impala-shell</span>, only a single report is displayed at any one time,\n      with each update overwriting the previous numbers.\n    </p><div class=\"hue-doc-codeblock\">[localhost:21000] &gt; set live_summary=true;\nLIVE_SUMMARY set to true\n[localhost:21000] &gt; select count(*) from customer t1 cross join customer t2;\n+---------------------+--------+----------+----------+---------+------------+----------+---------------+-----------------------+\n| Operator            | #Hosts | Avg Time | Max Time | #Rows   | Est. #Rows | Peak Mem | Est. Peak Mem | Detail                |\n+---------------------+--------+----------+----------+---------+------------+----------+---------------+-----------------------+\n| 06:AGGREGATE        | 0      | 0ns      | 0ns      | 0       | 1          | 0 B      | -1 B          | FINALIZE              |\n| 05:EXCHANGE         | 0      | 0ns      | 0ns      | 0       | 1          | 0 B      | -1 B          | UNPARTITIONED         |\n| 03:AGGREGATE        | 0      | 0ns      | 0ns      | 0       | 1          | 0 B      | 10.00 MB      |                       |\n| 02:NESTED LOOP JOIN | 0      | 0ns      | 0ns      | 0       | 22.50B     | 0 B      | 0 B           | CROSS JOIN, BROADCAST |\n| |--04:EXCHANGE      | 0      | 0ns      | 0ns      | 0       | 150.00K    | 0 B      | 0 B           | BROADCAST             |\n| |  01:SCAN HDFS     | 1      | 503.57ms | 503.57ms | 150.00K | 150.00K    | 24.09 MB | 64.00 MB      | tpch.customer t2      |\n| 00:SCAN HDFS        | 0      | 0ns      | 0ns      | 0       | 150.00K    | 0 B      | 64.00 MB      | tpch.customer t1      |\n+---------------------+--------+----------+----------+---------+------------+----------+---------------+-----------------------+\n\n+---------------------+--------+----------+----------+---------+------------+----------+---------------+-----------------------+\n| Operator            | #Hosts | Avg Time | Max Time | #Rows   | Est. #Rows | Peak Mem | Est. Peak Mem | Detail                |\n+---------------------+--------+----------+----------+---------+------------+----------+---------------+-----------------------+\n| 06:AGGREGATE        | 0      | 0ns      | 0ns      | 0       | 1          | 0 B      | -1 B          | FINALIZE              |\n| 05:EXCHANGE         | 0      | 0ns      | 0ns      | 0       | 1          | 0 B      | -1 B          | UNPARTITIONED         |\n| 03:AGGREGATE        | 1      | 0ns      | 0ns      | 0       | 1          | 20.00 KB | 10.00 MB      |                       |\n| 02:NESTED LOOP JOIN | 1      | 17.62s   | 17.62s   | 81.14M  | 22.50B     | 3.23 MB  | 0 B           | CROSS JOIN, BROADCAST |\n| |--04:EXCHANGE      | 1      | 26.29ms  | 26.29ms  | 150.00K | 150.00K    | 0 B      | 0 B           | BROADCAST             |\n| |  01:SCAN HDFS     | 1      | 503.57ms | 503.57ms | 150.00K | 150.00K    | 24.09 MB | 64.00 MB      | tpch.customer t2      |\n| 00:SCAN HDFS        | 1      | 247.53ms | 247.53ms | 1.02K   | 150.00K    | 24.39 MB | 64.00 MB      | tpch.customer t1      |\n+---------------------+--------+----------+----------+---------+------------+----------+---------------+-----------------------+\n\n+---------------------+--------+----------+----------+---------+------------+----------+---------------+-----------------------+\n| Operator            | #Hosts | Avg Time | Max Time | #Rows   | Est. #Rows | Peak Mem | Est. Peak Mem | Detail                |\n+---------------------+--------+----------+----------+---------+------------+----------+---------------+-----------------------+\n| 06:AGGREGATE        | 0      | 0ns      | 0ns      | 0       | 1          | 0 B      | -1 B          | FINALIZE              |\n| 05:EXCHANGE         | 0      | 0ns      | 0ns      | 0       | 1          | 0 B      | -1 B          | UNPARTITIONED         |\n| 03:AGGREGATE        | 1      | 0ns      | 0ns      | 0       | 1          | 20.00 KB | 10.00 MB      |                       |\n| 02:NESTED LOOP JOIN | 1      | 61.85s   | 61.85s   | 283.43M | 22.50B     | 3.23 MB  | 0 B           | CROSS JOIN, BROADCAST |\n| |--04:EXCHANGE      | 1      | 26.29ms  | 26.29ms  | 150.00K | 150.00K    | 0 B      | 0 B           | BROADCAST             |\n| |  01:SCAN HDFS     | 1      | 503.57ms | 503.57ms | 150.00K | 150.00K    | 24.09 MB | 64.00 MB      | tpch.customer t2      |\n| 00:SCAN HDFS        | 1      | 247.59ms | 247.59ms | 2.05K   | 150.00K    | 24.39 MB | 64.00 MB      | tpch.customer t1      |\n+---------------------+--------+----------+----------+---------+------------+----------+---------------+-----------------------+\n</div><p>\n        To see how the <span class=\"hue-doc-codeph\">LIVE_PROGRESS</span> and <span class=\"hue-doc-codeph\">LIVE_SUMMARY</span> query options\n        work in real time, see <a class=\"hue-doc-external-link\" href=\"https://asciinema.org/a/1rv7qippo0fe7h5k1b6k4nexk\" target=\"_blank\">this animated demo</a>.\n      </p></div></div></div>","title":"LIVE_SUMMARY Query Option (Impala 2.3 or higher only)"}