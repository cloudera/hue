{"body":"<div><div>\n        <div id=\"title\">\n                        <h1 class=\"hue-doc-title-hive\">Indexing</h1>\n        </div>\n\n        <!--<div id=\"toc\" class=\"content prepend-top\">\n            <h1>Table of Contents</h1>\n            $replacement.render(\"toc\")\n        </div>-->\n\n        <div id=\"src-31822176\">\n            <p>\n                </p>\n    <ul><li>            <p>\n    <a data-doc-anchor-id=\"src-31822176_LanguageManualIndexing-IndexingIsRemovedsince3.0\" class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_31822176\">Indexing Is Removed since 3.0</a>            </p>\n    </li><li>            <p>\n    <a data-doc-anchor-id=\"src-31822176_LanguageManualIndexing-OverviewofHiveIndexes\" class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_31822176\">Overview of Hive Indexes</a>            </p>\n    </li><li>            <p>\n    <a data-doc-anchor-id=\"src-31822176_LanguageManualIndexing-IndexingResources\" class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_31822176\">Indexing Resources</a>            </p>\n    <ul><li>            <p>\n    <a data-doc-anchor-id=\"src-31822176_LanguageManualIndexing-ConfigurationParametersforHiveIndexes\" class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_31822176\">Configuration Parameters for Hive Indexes</a>            </p>\n    </li></ul></li><li>            <p>\n    <a data-doc-anchor-id=\"src-31822176_LanguageManualIndexing-SimpleExamples\" class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_31822176\">Simple Examples</a>            </p>\n    </li></ul>    <div id=\"src-31822176_LanguageManualIndexing-IndexingIsRemovedsince3.0\">\n        <h2><span>Indexing Is Removed since 3.0</span></h2>\n            <p>\n    There are alternate options which might work similarily to indexing:            </p>\n    <ul><li>            <p>\n    Materialized views with automatic rewriting can result in very similar results. <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/HIVE-14249\" target=\"_blank\">Hive 2.3.0</a> adds support for materialzed views.            </p>\n    </li><li>            <p>\n    Using columnar file formats (<a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_38570914\">Parquet</a>, <a class=\"hue-doc-external-link\" href=\"https://orc.apache.org/docs/indexes.html\" target=\"_blank\">ORC</a>) – they can do selective scanning; they may even skip entire files/blocks.            </p>\n    </li></ul>    <div class=\"hue-doc-note-hive\">\n                    <p>\n    Indexing has been <strong>removed</strong> in version 3.0 (<a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/HIVE-18448\" target=\"_blank\">HIVE-18448</a>).            </p>\n        </div>\n        </div>\n    <div id=\"src-31822176_LanguageManualIndexing-OverviewofHiveIndexes\">\n        <h2><span>Overview of Hive Indexes</span></h2>\n            <p>\n    The goal of Hive indexing is to improve the speed of query lookup on certain columns of a table. Without an index, queries with predicates like 'WHERE tab1.col1 = 10' load the entire table or partition and process all the rows. But if an index exists for col1, then only a portion of the file needs to be loaded and processed.            </p>\n                <p>\n    The improvement in query speed that an index can provide comes at the cost of additional processing to create the index and disk space to store the index.            </p>\n        <div class=\"hue-doc-note-hive\">\n            <div>Versions</div>\n                    <p>\n    Hive indexing was added in version 0.7.0, and bitmap indexing was added in version 0.8.0.            </p>\n        </div>\n        </div>\n    <div id=\"src-31822176_LanguageManualIndexing-IndexingResources\">\n        <h2><span>Indexing Resources</span></h2>\n            <p>\n    Documentation and examples of how to use Hive indexes can be found here:            </p>\n    <ul><li>            <p>\n    <a class=\"hue-doc-external-link\" href=\"https://cwiki.apache.org/confluence/display/Hive/IndexDev\" target=\"_blank\">Indexes</a> – design document (lists indexing JIRAs with current status, starting with <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/HIVE-417\" target=\"_blank\">HIVE-417</a>)            </p>\n    </li></ul><ul><li>            <p>\n    <a data-doc-anchor-id=\"src-27362034_safe-id-TGFuZ3VhZ2VNYW51YWxEREwtQ3JlYXRlL0Ryb3AvQWx0ZXJJbmRleA\" class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_27362034\">Create/Drop/Alter Index</a> – <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_27362034\">HiveQL Language Manual DDL</a>            </p>\n    </li></ul><ul><li>            <p>\n    <a data-doc-anchor-id=\"src-27362034_LanguageManualDDL-ShowIndexes\" class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_27362034\">Show Indexes</a> – <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_27362034\">HiveQL Language Manual DDL</a>            </p>\n    </li></ul><ul><li>            <p>\n    <a class=\"hue-doc-external-link\" href=\"https://cwiki.apache.org/confluence/display/Hive/IndexDev+Bitmap\" target=\"_blank\">Bitmap indexes</a> – added in Hive version 0.8.0 (<a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/HIVE-1803\" target=\"_blank\">HIVE-1803</a>)            </p>\n    </li></ul><ul><li>            <p>\n    <a class=\"hue-doc-external-link\" href=\"http://www.slideshare.net/NikhilDeshpande/indexed-hive\" target=\"_blank\">Indexed Hive</a> – overview and examples by Prafulla Tekawade and Nikhil Deshpande, October 2010            </p>\n    </li></ul><ul><li>            <p>\n    <a class=\"hue-doc-external-link\" href=\"http://asheeshgarg.blogspot.com/2012/04/sql-like-join-and-index-with-mr-using.html\" target=\"_blank\">Tutorial: SQL-like join and index with MapReduce using Hadoop and Hive</a> – blog by Ashish Garg, April 2012            </p>\n    </li></ul>    <div id=\"src-31822176_LanguageManualIndexing-ConfigurationParametersforHiveIndexes\">\n        <h3><span>Configuration Parameters for Hive Indexes</span></h3>\n            <p>\n    The <a data-doc-anchor-id=\"src-27842758_ConfigurationProperties-Indexing\" class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_27842758\">Configuration Properties</a> document describes parameters that configure Hive indexes.            </p>\n        </div>\n    </div>\n    <div id=\"src-31822176_LanguageManualIndexing-SimpleExamples\">\n        <h2><span>Simple Examples</span></h2>\n            <p>\n    This section gives some indexing examples adapted from the Hive test suite.            </p>\n        <div class=\"hue-doc-note-hive\">\n            <div>Case sensitivity</div>\n                    <p>\n    In Hive 0.12.0 and earlier releases, the index name is case-sensitive for CREATE INDEX and DROP INDEX statements. However, ALTER INDEX requires an index name that was created with lowercase letters (see <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/HIVE-2752\" target=\"_blank\">HIVE-2752</a>). This bug is fixed in <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/HIVE-2752\" target=\"_blank\">Hive 0.13.0</a> by making index names case-insensitive for all HiveQL statements. For releases prior to 0.13.0, the best practice is to use lowercase letters for all index names.            </p>\n        </div>\n                <p>\n                </p>\n                <p>\n    Create/build, show, and drop index:            </p>\n        <div>\n                <div>\n        <pre><code>CREATE INDEX table01_index ON TABLE table01 (column2) AS 'COMPACT';\nSHOW INDEX ON table01;\nDROP INDEX table01_index ON table01;</code></pre>\n        </div>\n    </div>\n            <p>\n    Create then build, show formatted (with column names), and drop index:            </p>\n        <div>\n                <div>\n        <pre><code>CREATE INDEX table02_index ON TABLE table02 (column3) AS 'COMPACT' WITH DEFERRED REBUILD;\nALTER INDEX table02_index ON table2 REBUILD;\nSHOW FORMATTED INDEX ON table02;\nDROP INDEX table02_index ON table02;</code></pre>\n        </div>\n    </div>\n            <p>\n    Create bitmap index, build, show, and drop:            </p>\n        <div>\n                <div>\n        <pre><code>CREATE INDEX table03_index ON TABLE table03 (column4) AS 'BITMAP' WITH DEFERRED REBUILD;\nALTER INDEX table03_index ON table03 REBUILD;\nSHOW FORMATTED INDEX ON table03;\nDROP INDEX table03_index ON table03;</code></pre>\n        </div>\n    </div>\n            <p>\n    Create index in a new table:            </p>\n        <div>\n                <div>\n        <pre><code>CREATE INDEX table04_index ON TABLE table04 (column5) AS 'COMPACT' WITH DEFERRED REBUILD IN TABLE table04_index_table;</code></pre>\n        </div>\n    </div>\n            <p>\n    Create index stored as RCFile:            </p>\n        <div>\n                <div>\n        <pre><code>CREATE INDEX table05_index ON TABLE table05 (column6) AS 'COMPACT' STORED AS RCFILE;</code></pre>\n        </div>\n    </div>\n            <p>\n    Create index stored as text file:            </p>\n        <div>\n                <div>\n        <pre><code>CREATE INDEX table06_index ON TABLE table06 (column7) AS 'COMPACT' ROW FORMAT DELIMITED FIELDS TERMINATED BY '\\t' STORED AS TEXTFILE;</code></pre>\n        </div>\n    </div>\n            <p>\n    Create index with index properties:            </p>\n        <div>\n                <div>\n        <pre><code>CREATE INDEX table07_index ON TABLE table07 (column8) AS 'COMPACT' IDXPROPERTIES (\"prop1\"=\"value1\", \"prop2\"=\"value2\");</code></pre>\n        </div>\n    </div>\n            <p>\n    Create index with table properties:            </p>\n        <div>\n                <div>\n        <pre><code>CREATE INDEX table08_index ON TABLE table08 (column9) AS 'COMPACT' TBLPROPERTIES (\"prop3\"=\"value3\", \"prop4\"=\"value4\");</code></pre>\n        </div>\n    </div>\n            <p>\n    Drop index if exists:            </p>\n        <div>\n                <div>\n        <pre><code>DROP INDEX IF EXISTS table09_index ON table09;</code></pre>\n        </div>\n    </div>\n            <p>\n    Rebuild index on a partition:            </p>\n        <div>\n                <div>\n        <pre><code>ALTER INDEX table10_index ON table10 PARTITION (columnX='valueQ', columnY='valueR') REBUILD;</code></pre>\n        </div>\n    </div>\n    </div>\n        </div>\n    </div></div>","title":"Indexing"}