{"body":"<div><div>\n        <div id=\"title\">\n                        <h1 class=\"hue-doc-title-hive\">VariableSubstitution</h1>\n        </div>\n\n        <!--<div id=\"toc\" class=\"content prepend-top\">\n            <h1>Table of Contents</h1>\n            $replacement.render(\"toc\")\n        </div>-->\n\n        <div id=\"src-30754722\">\n    <div id=\"src-30754722_safe-id-TGFuZ3VhZ2VNYW51YWxWYXJpYWJsZVN1YnN0aXR1dGlvbi0vKjwhW0NEQVRBWyovZGl2LnJidG9jMTY1MDM2MjE0OTI4NXtwYWRkaW5nOjBweDt9ZGl2LnJidG9jMTY1MDM2MjE0OTI4NXVse2xpc3Qtc3R5bGU6ZGlzYzttYXJnaW4tbGVmdDowcHg7fWRpdi5yYnRvYzE2NTAzNjIxNDkyODVsaXttYXJnaW4tbGVmdDowcHg7cGFkZGluZy1sZWZ0OjBweDt9LypdXT4qL0ludHJvZHVjdGlvbiNMYW5ndWFnZU1hbnVhbFZhcmlhYmxlU3Vic3RpdHV0aW9u\">\n        <h2><span>/*&lt;![CDATA[*/ div.rbtoc1650362149285 {padding: 0px;} div.rbtoc1650362149285 ul {list-style: disc;margin-left: 0px;} div.rbtoc1650362149285 li {margin-left: 0px;padding-left: 0px;} /*]]&gt;*/</span></h2>\n<ul><li>            <p>\n    <a data-doc-anchor-id=\"src-30754722_LanguageManualVariableSubstitution-Introduction\" class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_30754722\">Introduction</a>            </p>\n    </li><li>            <p>\n    <a data-doc-anchor-id=\"src-30754722_LanguageManualVariableSubstitution-UsingVariables\" class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_30754722\">Using Variables</a>            </p>\n    </li><li>            <p>\n    <a data-doc-anchor-id=\"src-30754722_LanguageManualVariableSubstitution-SubstitutionDuringQueryConstruction\" class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_30754722\">Substitution During Query Construction</a>            </p>\n    </li><li>            <p>\n    <a data-doc-anchor-id=\"src-30754722_LanguageManualVariableSubstitution-DisablingVariableSubstitution\" class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_30754722\">Disabling Variable Substitution</a>            </p>\n    </li></ul>    </div>\n    <div id=\"src-30754722_LanguageManualVariableSubstitution-Introduction\">\n        <h2><span>Introduction</span></h2>\n            <p>\n    Hive is used for batch and interactive queries. Variable Substitution allows for tasks such as separating environment-specific configuration variables from code.            </p>\n                <p>\n    The Hive variable substitution mechanism was designed to avoid some of the code that was getting baked into the scripting language on top of Hive.            </p>\n                <p>\n    Examples such as the following shell commands may (inefficiently) be used to set variables within a script:            </p>\n        <div style=\"counter-reset: scroll-code-numbering 1\">\n                <div class=\"hue-doc-codeblock\">$ a=b\n$ hive -e \" describe $a \"\n</div>\n    </div>\n            <p>\n    This is frustrating as Hive becomes closely coupled with scripting languages. The Hive startup time of a couple seconds is non-trivial when doing thousands of manipulations such as multiple <tt>hive -e</tt> invocations.            </p>\n                <p>\n    Hive <strong>Variables</strong> combine the set capability you know and love with some limited yet powerful substitution ability.            </p>\n                <p>\n    The following example:            </p>\n        <div style=\"counter-reset: scroll-code-numbering 1\">\n                <div class=\"hue-doc-codeblock\">$ bin/hive --hiveconf a=b -e 'set a; set hiveconf:a; \\\ncreate table if not exists b (col int); describe ${hiveconf:a}'\n</div>\n    </div>\n            <p>\n    results in:            </p>\n        <div style=\"counter-reset: scroll-code-numbering 1\">\n                <div class=\"hue-doc-codeblock\">Hive history file=/tmp/edward/hive_job_log_edward_201011240906_1463048967.txt\na=b\nhiveconf:a=b\nOK\nTime taken: <span class=\"hue-doc-varname\">5.913</span> seconds\nOK\ncol\tint\t\nTime taken: <span class=\"hue-doc-varname\">0.754</span> seconds\n</div>\n    </div>\n            <p>\n    For general information about Hive command line options, see <a class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_27362033\">Hive CLI</a>.            </p>\n        <div class=\"hue-doc-note-hive\">\n            <div>Version information</div>\n                    <p>\n    The <tt>hiveconf</tt> option was added in version 0.7.0 (JIRA <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/HIVE-1096\" target=\"_blank\">HIVE-1096</a>). Version 0.8.0 added the options <tt>define</tt> and <tt>hivevar</tt> (JIRA <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/HIVE-2020\" target=\"_blank\">HIVE-2020</a>), which are equivalent and are not described here. They create custom variables in a namespace that is separate from the hiveconf, system, and env namespaces.            </p>\n        </div>\n        </div>\n    <div id=\"src-30754722_LanguageManualVariableSubstitution-UsingVariables\">\n        <h2><span>Using Variables</span></h2>\n            <p>\n    There are three namespaces for variables – hiveconf, system, and env. (<a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/HIVE-2020\" target=\"_blank\">Custom variables</a> can also be created in a separate namespace with the <tt>define</tt> or <tt>hivevar</tt> option in Hive 0.8.0 and later releases.)            </p>\n                <p>\n    The hiveconf variables are set as normal:            </p>\n        <div style=\"counter-reset: scroll-code-numbering 1\">\n                <div class=\"hue-doc-codeblock\">set x=myvalue\n</div>\n    </div>\n            <p>\n    However they are retrieved using:            </p>\n        <div style=\"counter-reset: scroll-code-numbering 1\">\n                <div class=\"hue-doc-codeblock\">${hiveconf:x}\n</div>\n    </div>\n            <p>\n    Annotated examples of usage from the test case ql/src/test/queries/clientpositive/set_processor_namespaces.q:            </p>\n        <div style=\"counter-reset: scroll-code-numbering 1\">\n                <div class=\"hue-doc-codeblock\">set zzz=<span class=\"hue-doc-varname\">5</span>;\n--  sets zzz=<span class=\"hue-doc-varname\">5</span>\nset zzz;\n \nset system:xxx=<span class=\"hue-doc-varname\">5</span>;\nset system:xxx;\n-- sets a system property xxx to <span class=\"hue-doc-varname\">5</span>\n \nset system:yyy=${system:xxx};\nset system:yyy;\n-- sets yyy with value of xxx\n \nset go=${hiveconf:zzz};\nset go;\n-- sets go base on value on zzz\n \nset hive.variable.substitute=false;\nset raw=${hiveconf:zzz};\nset raw;\n-- disable substitution set a value to the literal\n \nset hive.variable.substitute=true;\n \nEXPLAIN SELECT * FROM src where key=${hiveconf:zzz};\nSELECT * FROM src where key=${hiveconf:zzz};\n--use a variable in a query\n \nset a=<span class=\"hue-doc-varname\">1</span>;\nset b=a;\nset c=${hiveconf:${hiveconf:b}};\nset c;\n--uses nested variables. \n \n \nset jar=../lib/derby.jar;\n \nadd file ${hiveconf:jar};\nlist file;\ndelete file ${hiveconf:jar};\nlist file;\n</div>\n    </div>\n    </div>\n    <div id=\"src-30754722_LanguageManualVariableSubstitution-SubstitutionDuringQueryConstruction\">\n        <h2><span>Substitution During Query Construction</span></h2>\n            <p>\n    Hive substitutes the value for a variable when a query is constructed with the variable.            </p>\n    <ul><li>            <p>\n    If you run two different Hive sessions, variable values will not be mixed across sessions.            </p>\n    </li><li>            <p>\n    If you set variables with the same name in the same Hive session, a query uses the last set value.            </p>\n    </li></ul>    </div>\n    <div id=\"src-30754722_LanguageManualVariableSubstitution-DisablingVariableSubstitution\">\n        <h2><span>Disabling Variable Substitution</span></h2>\n            <p>\n    Variable substitution is on by default (<a data-doc-anchor-id=\"src-27842758_ConfigurationProperties-hive.variable.substitute\" class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_27842758\">hive.variable.substitute</a>=true). If this causes an issue with an already existing script, disable it using the following command:            </p>\n        <div style=\"counter-reset: scroll-code-numbering 1\">\n                <div class=\"hue-doc-codeblock\">set hive.variable.substitute=false;\n</div>\n    </div>\n    </div>\n        </div>\n    </div></div>","title":"VariableSubstitution"}