{"body":"<div><div>\n        <div id=\"title\">\n                        <h1 class=\"hue-doc-title-hive\">Managed vs. External Tables</h1>\n        </div>\n\n        <!--<div id=\"toc\" class=\"content prepend-top\">\n            <h1>Table of Contents</h1>\n            $replacement.render(\"toc\")\n        </div>-->\n\n        <div id=\"src-95654003\">\n            <p>\n    Hive fundamentally knows two different types of tables:            </p>\n    <ul><li>            <p>\n    Managed (Internal)            </p>\n    </li><li>            <p>\n    External            </p>\n    </li></ul>    <div id=\"src-95654003_Managedvs.ExternalTables-Introduction\">\n        <h2><span>Introduction</span></h2>\n            <p>\n    This document lists some of the differences between the two but the fundamental difference is that Hive assumes that it <i>owns</i> the data for managed tables. That means that the data, its properties and data layout will and can only be changed via Hive command. The data still lives in a normal file system and nothing is stopping you from changing it without telling Hive about it. If you do though it violates invariants and expectations of Hive and you might see undefined behavior.            </p>\n                <p>\n    Another consequence is that data is attached to the Hive entities. So, whenever you change an entity (e.g. drop a table) the data is also changed (in this case the data is deleted). This is very much like with traditional RDBMS where you would also not manage the data files on your own but use a SQL-based access to do so.            </p>\n                <p>\n    For external tables Hive assumes that it does <i>not</i> manage the data.            </p>\n                <p>\n    Managed or external tables can be identified using the <a data-doc-anchor-id=\"src-95654003_safe-id-TWFuYWdlZHZzLkV4dGVybmFsVGFibGVzLURlc2NyaWJlVGFibGUvVmlldy9Db2x1bW4\" class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_95654003\">DESCRIBE FORMATTED table_name</a> command, which will display either     <span style=\"color: #222222;\">\nMANAGED_TABLE or EXTERNAL_TABLE depending on table type.    </span>\n            </p>\n                <p>\n        <span style=\"color: #222222;\">\n<a class=\"hue-doc-external-link\" href=\"https://cwiki.apache.org/confluence/display/Hive/StatsDev\" target=\"_blank\">Statistics</a> can be managed on internal and external tables and partitions for query optimization.    </span>\n            </p>\n        </div>\n    <div id=\"src-95654003_Managedvs.ExternalTables-Featurecomparison\">\n        <h2><span>Feature comparison</span></h2>\n            <p>\n    This means that there are lots of features which are only available for one of the two table types but not the other. This is an incomplete list of things:            </p>\n    <ul><li>            <p>\n    ARCHIVE/UNARCHIVE/TRUNCATE/MERGE/CONCATENATE only work for managed tables            </p>\n    </li><li>            <p>\n    DROP deletes data for managed tables while it only deletes metadata for external ones            </p>\n    </li><li>            <p>\n    ACID/Transactional only works for managed tables            </p>\n    </li><li>            <p>\n    <a class=\"hue-doc-external-link\" href=\"https://issues.apache.org/jira/browse/HIVE-18513\" target=\"_blank\">Query Results Caching</a> only works for managed tables            </p>\n    </li><li>            <p>\n    Only the RELY constraint is allowed on external tables            </p>\n    </li><li>            <p>\n    Some Materialized View features only work on managed tables            </p>\n    </li></ul>    </div>\n    <div id=\"src-95654003_Managedvs.ExternalTables-Managedtables\">\n        <h2><span>Managed tables</span></h2>\n            <p>\n    A managed table is stored under the <a data-doc-anchor-id=\"src-27842758_ConfigurationProperties-hive.metastore.warehouse.dir\" class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_27842758\">hive.metastore.warehouse.dir</a> path property, by default in a folder path similar to <tt>/user/hive/warehouse/databasename.db/tablename/</tt>. The default location can be overridden by the <tt>location</tt> property during table creation. If a managed table or partition is dropped, the data and metadata associated with that table or partition are deleted. If the PURGE option is not specified, the data is moved to a trash folder for a defined duration.            </p>\n                <p>\n    Use managed tables when Hive should manage the lifecycle of the table, or when generating temporary tables.            </p>\n        </div>\n    <div id=\"src-95654003_Managedvs.ExternalTables-Externaltables\">\n        <h2><span>External tables</span></h2>\n            <p>\n    An external table describes the metadata / schema on external files. External table files can be accessed and managed by processes outside of Hive. External tables can access data stored in sources such as Azure Storage Volumes (ASV) or remote HDFS locations. If the structure or partitioning of an external table is changed, an <a data-doc-anchor-id=\"src-95654003_safe-id-TWFuYWdlZHZzLkV4dGVybmFsVGFibGVzLVJlY292ZXJQYXJ0aXRpb25zKE1TQ0tSRVBBSVJUQUJMRSk\" class=\"hue-doc-internal-link\" href=\"javascript:void(0);\" data-doc-ref=\"_95654003\">MSCK REPAIR TABLE table_name</a> statement can be used to refresh metadata information.            </p>\n                <p>\n    Use external tables when files are already present or in remote locations, and the files should remain even if the table is dropped.            </p>\n        </div>\n        </div>\n    </div></div>","title":"Managed vs. External Tables"}