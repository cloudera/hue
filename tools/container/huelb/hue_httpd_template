LoadModule proxy_module /usr/lib/apache2/modules/mod_proxy.so
LoadModule proxy_balancer_module /usr/lib/apache2/modules/mod_proxy_balancer.so
LoadModule proxy_http_module /usr/lib/apache2/modules/mod_proxy_http.so
LoadModule slotmem_shm_module /usr/lib/apache2/modules/mod_slotmem_shm.so
LoadModule unixd_module /usr/lib/apache2/modules/mod_unixd.so
LoadModule lbmethod_byrequests_module /usr/lib/apache2/modules/mod_lbmethod_byrequests.so
LoadModule authz_core_module /usr/lib/apache2/modules/mod_authz_core.so
LoadModule log_config_module /usr/lib/apache2/modules/mod_log_config.so
LoadModule mime_module /usr/lib/apache2/modules/mod_mime.so

LogLevel warn

PidFile /var/run/hue/httpd.pid

<IfModule mime_module>
  TypesConfig /etc/mime.types
  AddType application/x-compress .Z
  AddType application/x-gzip .gz .tgz
</IfModule>

<Directory />
  Options FollowSymlinks
  AllowOverride none
</Directory>

<Directory ${HUE_HOME}/build/static>
  Options -Indexes
  Require all granted
</Directory>

Alias /static ${HUE_HOME}/build/static

Header add Set-Cookie "ROUTEID=.%{BALANCER_WORKER_ROUTE}e; path=/" env=BALANCER_ROUTE_CHANGED
ProxyPreserveHost Off
ProxyAddHeaders On
ProxyPass /static !
ProxyPass / balancer://hue/ stickysession=ROUTEID nocanon

SetEnv proxy-initial-not-pooled 1
ProxyTimeout 900

<VirtualHost *:8080>
    AllowEncodedSlashes NoDecode
    ErrorLog "${HUE_LOG_DIR}/hue_httpd_error.log"

    <IfModule log_config_module>
      LogFormat "%{X-Forwarded-For}i %h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
      LogFormat "%h %l %u %t \"%r\" %>s %b" common
      CustomLog "${HUE_LOG_DIR}/hue_httpd_access.log" combined
    </IfModule>
</VirtualHost>

Include /etc/httpd/conf.d/hue.conf